
> graceful-books@0.1.0 test
> vitest src/components/dashboard/RevenueExpensesChart.test.tsx


[7m[1m[34m DEV [39m[22m[27m [34mv1.6.1[39m [90mC:/Users/Admin/graceful_books[39m

 [33mâ¯[39m src/components/dashboard/RevenueExpensesChart.test.tsx [2m ([22m[2m42 tests[22m [2m|[22m [31m21 failed[39m[2m)[22m[33m 786[2mms[22m[39m
[31m   [33mâ¯[31m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mrendering[2m > [22mshould render bar chart[39m
[31m     â†’ [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
[39m
[31m   [33mâ¯[31m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mrendering[2m > [22mshould render legend for revenue and expenses[39m
[31m     â†’ [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
[39m
[31m   [33mâ¯[31m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mdata visualization[2m > [22mshould display bars for revenue[39m
[31m     â†’ expected 0 to be greater than 0[39m
[31m   [33mâ¯[31m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mdata visualization[2m > [22mshould display bars for expenses[39m
[31m     â†’ expected 0 to be greater than 0[39m
[31m   [33mâ¯[31m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mdata visualization[2m > [22mshould handle single data point[39m
[31m     â†’ [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
[39m
[31m   [33mâ¯[31m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mdata visualization[2m > [22mshould handle varying data ranges[39m
[31m     â†’ [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
[39m
[31m   [33mâ¯[31m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mtooltip functionality[2m > [22mshould render tooltip on hover[39m
[31m     â†’ [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
[39m
[31m   [33mâ¯[31m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mtooltip functionality[2m > [22mshould format tooltip values as currency[39m
[31m     â†’ [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
[39m
[31m   [33mâ¯[31m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mformatting[2m > [22mshould handle large numbers[39m
[31m     â†’ [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
[39m
[31m   [33mâ¯[31m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mformatting[2m > [22mshould handle zero values[39m
[31m     â†’ [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
[39m
[31m   [33mâ¯[31m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mformatting[2m > [22mshould handle decimal values[39m
[31m     â†’ [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
[39m
[31m   [33mâ¯[31m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mformatting[2m > [22mshould format dates on x-axis[39m
[31m     â†’ [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
[39m
[31m   [33mâ¯[31m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mformatting[2m > [22mshould format currency on y-axis[39m
[31m     â†’ [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
[39m
[31m   [33mâ¯[31m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mprofitability insights[2m > [22mshould calculate net profit/loss for period[39m
[31m     â†’ Found multiple elements with the text: /\$16,700/

Here are the matching elements:

Ignored nodes: comments, script, style
[36m<span[31m
  [33mclass[31m=[32m"_summaryValue_9ac9be _profit_9ac9be"[31m
[36m>[31m
  [0m$16,700[0m
[36m</span>[31m

Ignored nodes: comments, script, style
[36m<p[31m
  [33mclass[31m=[32m"_insight_9ac9be"[31m
[36m>[31m
  [0mGreat job! Your revenue exceeded expenses by [0m
  [0m$16,700[0m
  [0m over this period.[0m
[36m</p>[31m

(If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33maria-label[31m=[32m"Revenue vs Expenses Chart"[31m
      [33mclass[31m=[32m"_widget_9ac9be "[31m
    [36m>[31m
      [36m<div[31m
        [33mclass[31m=[32m"_header_9ac9be"[31m
      [36m>[31m
        [36m<h2[31m
          [33mclass[31m=[32m"_title_9ac9be"[31m
        [36m>[31m
          [0mRevenue vs Expenses[0m
        [36m</h2>[31m
        [36m<span[31m
          [33mclass[31m=[32m"_period_9ac9be"[31m
        [36m>[31m
          [0mLast 6 Months[0m
        [36m</span>[31m
      [36m</div>[31m
      [36m<div>[31m
        [36m<span>[31m
          [0mProfitable[0m
        [36m</span>[31m
        [36m<span>[31m
          [0mGrowing[0m
        [36m</span>[31m
      [36m</div>[31m
      [36m<div[31m
        [33mclass[31m=[32m"_summarySection_9ac9be"[31m
      [36m>[31m
        [36m<div[31m
          [33mclass[31m=[32m"_summaryItem_9ac9be"[31m
        [36m>[31m
          [36m<span[31m
            [33mclass[31m=[32m"_summaryLabel_9ac9be"[31m
          [36m>[31m
            [0mTotal Revenue[0m
          [36m</span>[31m
          [36m<span[31m
            [33mclass[31m=[32m"_summaryValue_9ac9be _revenue_9ac9be"[31m
          [36m>[31m
            [0m$40,500[0m
          [36m</span>[31m
        [36m</div>[31m
        [36m<div[31m
          [33mclass[31m=[32m"_summaryItem_9ac9be"[31m
        [36m>[31m
          [36m<span[31m
            [33mclass[31m=[32m"_summaryLabel_9ac9be"[31m
          [36m>[31m
            [0mTotal Expenses[0m
          [36m</span>[31m
          [36m<span[31m
            [33mclass[31m=[32m"_summaryValue_9ac9be _expenses_9ac9be"[31m
          [36m>[31m
            [0m$23,800[0m
          [36m</span>[31m
        [36m</div>[31m
        [36m<div[31m
          [33mclass[31m=[32m"_summaryItem_9ac9be"[31m
        [36m>[31m
          [36m<span[31m
            [33mclass[31m=[32m"_summaryLabel_9ac9be"[31m
          [36m>[31m
            [0mNet [0m
            [0mProfit[0m
          [36m</span>[31m
          [36m<span[31m
            [33mclass[31m=[32m"_summaryValue_9ac9be _profit_9ac9be"[31m
          [36m>[31m
            [0m$16,700[0m
          [36m</span>[31m
        [36m</div>[31m
      [36m</div>[31m
      [36m<div[31m
        [33maria-label[31m=[32m"Revenue and expenses comparison chart"[31m
        [33mclass[31m=[32m"_chartSection_9ac9be"[31m
      [36m>[31m
        [36m<div[31m
          [33mclass[31m=[32m"recharts-responsive-container"[31m
          [33mstyle[31m=[32m"width: 100%; height: 300px; min-width: 0;"[31m
        [36m>[31m
          [36m<div[31m
            [33mstyle[31m=[32m"width: 0px; overflow-x: visible;"[31m
          [36m/>[31m
        [36m</div>[31m
      [36m</div>[31m
      [36m<div[31m
        [33mclass[31m=[32m"_insightSection_9ac9be"[31m
      [36m>[31m
        [36m<p[31m
          [33mclass[31m=[32m"_insight_9ac9be"[31m
        [36m>[31m
          [0mGreat job! Your revenue exceeded expenses by [0m
          [0m$16,700[0m
          [0m over this period.[0m
        [36m</p>[31m
      [36m</div>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
[31m   [33mâ¯[31m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mresponsive behavior[2m > [22mshould maintain aspect ratio[39m
[31m     â†’ [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
[39m
[31m   [33mâ¯[31m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22maccessibility[2m > [22mshould hide decorative elements from screen readers[39m
[31m     â†’ expected 0 to be greater than 0[39m
[31m   [33mâ¯[31m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mcolor coding[2m > [22mshould use distinct colors for revenue and expenses[39m
[31m     â†’ expected 0 to be greater than 0[39m
[31m   [33mâ¯[31m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mcolor coding[2m > [22mshould maintain color consistency in legend[39m
[31m     â†’ [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
[39m
[31m   [33mâ¯[31m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22medge cases[2m > [22mshould handle very long time periods[39m
[31m     â†’ [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
[39m
[31m   [33mâ¯[31m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22medge cases[2m > [22mshould handle negative values gracefully[39m
[31m     â†’ [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
[39m
[31m   [33mâ¯[31m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22medge cases[2m > [22mshould handle mixed date formats[39m
[31m     â†’ [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
[39m

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1m[7m Failed Tests 21 [27m[22mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[31m[1m[7m FAIL [27m[22m[39m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mrendering[2m > [22mshould render bar chart
[31m[1mError[22m: [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
[39m
[36m [2mâ¯[22m src/components/dashboard/RevenueExpensesChart.test.tsx:[2m34:21[22m[39m
    [90m 32| [39m
    [90m 33| [39m      [35mconst[39m chart [33m=[39m container[33m.[39m[34mquerySelector[39m([32m'.recharts-wrapper'[39m)[33m;[39m
    [90m 34| [39m      [34mexpect[39m(chart)[33m.[39m[34mtoBeInTheDocument[39m()[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m 35| [39m    })[33m;[39m
    [90m 36| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/21]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mrendering[2m > [22mshould render legend for revenue and expenses
[31m[1mError[22m: [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
[39m
[36m [2mâ¯[22m src/components/dashboard/RevenueExpensesChart.test.tsx:[2m41:22[22m[39m
    [90m 39| [39m
    [90m 40| [39m      [35mconst[39m legend [33m=[39m container[33m.[39m[34mquerySelector[39m([32m'.recharts-legend-wrapper[39mâ€¦
    [90m 41| [39m      [34mexpect[39m(legend)[33m.[39m[34mtoBeInTheDocument[39m()[33m;[39m
    [90m   | [39m                     [31m^[39m
    [90m 42| [39m    })[33m;[39m
    [90m 43| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[2/21]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mdata visualization[2m > [22mshould display bars for revenue
[31m[1mAssertionError[22m: expected 0 to be greater than 0[39m
[36m [2mâ¯[22m src/components/dashboard/RevenueExpensesChart.test.tsx:[2m101:34[22m[39m
    [90m 99| [39m
    [90m100| [39m      [35mconst[39m revenueBars [33m=[39m container[33m.[39m[34mquerySelectorAll[39m([32m'[data-key="reven[39mâ€¦
    [90m101| [39m      [34mexpect[39m(revenueBars[33m.[39mlength)[33m.[39m[34mtoBeGreaterThan[39m([34m0[39m)[33m;[39m
    [90m   | [39m                                 [31m^[39m
    [90m102| [39m    })[33m;[39m
    [90m103| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[3/21]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mdata visualization[2m > [22mshould display bars for expenses
[31m[1mAssertionError[22m: expected 0 to be greater than 0[39m
[36m [2mâ¯[22m src/components/dashboard/RevenueExpensesChart.test.tsx:[2m108:34[22m[39m
    [90m106| [39m
    [90m107| [39m      [35mconst[39m expenseBars [33m=[39m container[33m.[39m[34mquerySelectorAll[39m([32m'[data-key="expen[39mâ€¦
    [90m108| [39m      [34mexpect[39m(expenseBars[33m.[39mlength)[33m.[39m[34mtoBeGreaterThan[39m([34m0[39m)[33m;[39m
    [90m   | [39m                                 [31m^[39m
    [90m109| [39m    })[33m;[39m
    [90m110| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[4/21]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mdata visualization[2m > [22mshould handle single data point
[31m[1mError[22m: [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
[39m
[36m [2mâ¯[22m src/components/dashboard/RevenueExpensesChart.test.tsx:[2m119:21[22m[39m
    [90m117| [39m
    [90m118| [39m      [35mconst[39m chart [33m=[39m container[33m.[39m[34mquerySelector[39m([32m'.recharts-wrapper'[39m)[33m;[39m
    [90m119| [39m      [34mexpect[39m(chart)[33m.[39m[34mtoBeInTheDocument[39m()[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m120| [39m    })[33m;[39m
    [90m121| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[5/21]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mdata visualization[2m > [22mshould handle varying data ranges
[31m[1mError[22m: [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
[39m
[36m [2mâ¯[22m src/components/dashboard/RevenueExpensesChart.test.tsx:[2m132:21[22m[39m
    [90m130| [39m
    [90m131| [39m      [35mconst[39m chart [33m=[39m container[33m.[39m[34mquerySelector[39m([32m'.recharts-wrapper'[39m)[33m;[39m
    [90m132| [39m      [34mexpect[39m(chart)[33m.[39m[34mtoBeInTheDocument[39m()[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m133| [39m    })[33m;[39m
    [90m134| [39m  })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[6/21]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mtooltip functionality[2m > [22mshould render tooltip on hover
[31m[1mError[22m: [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
[39m
[36m [2mâ¯[22m src/components/dashboard/RevenueExpensesChart.test.tsx:[2m141:32[22m[39m
    [90m139| [39m
    [90m140| [39m      [35mconst[39m tooltipContainer [33m=[39m container[33m.[39m[34mquerySelector[39m([32m'.recharts-tool[39mâ€¦
    [90m141| [39m      [34mexpect[39m(tooltipContainer)[33m.[39m[34mtoBeInTheDocument[39m()[33m;[39m
    [90m   | [39m                               [31m^[39m
    [90m142| [39m    })[33m;[39m
    [90m143| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[7/21]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mtooltip functionality[2m > [22mshould format tooltip values as currency
[31m[1mError[22m: [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
[39m
[36m [2mâ¯[22m src/components/dashboard/RevenueExpensesChart.test.tsx:[2m150:21[22m[39m
    [90m148| [39m
    [90m149| [39m      [35mconst[39m chart [33m=[39m container[33m.[39m[34mquerySelector[39m([32m'.recharts-wrapper'[39m)[33m;[39m
    [90m150| [39m      [34mexpect[39m(chart)[33m.[39m[34mtoBeInTheDocument[39m()[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m151| [39m    })[33m;[39m
    [90m152| [39m  })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[8/21]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mformatting[2m > [22mshould handle large numbers
[31m[1mError[22m: [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
[39m
[36m [2mâ¯[22m src/components/dashboard/RevenueExpensesChart.test.tsx:[2m163:21[22m[39m
    [90m161| [39m
    [90m162| [39m      [35mconst[39m chart [33m=[39m container[33m.[39m[34mquerySelector[39m([32m'.recharts-wrapper'[39m)[33m;[39m
    [90m163| [39m      [34mexpect[39m(chart)[33m.[39m[34mtoBeInTheDocument[39m()[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m164| [39m    })[33m;[39m
    [90m165| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[9/21]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mformatting[2m > [22mshould handle zero values
[31m[1mError[22m: [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
[39m
[36m [2mâ¯[22m src/components/dashboard/RevenueExpensesChart.test.tsx:[2m175:21[22m[39m
    [90m173| [39m
    [90m174| [39m      [35mconst[39m chart [33m=[39m container[33m.[39m[34mquerySelector[39m([32m'.recharts-wrapper'[39m)[33m;[39m
    [90m175| [39m      [34mexpect[39m(chart)[33m.[39m[34mtoBeInTheDocument[39m()[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m176| [39m    })[33m;[39m
    [90m177| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[10/21]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mformatting[2m > [22mshould handle decimal values
[31m[1mError[22m: [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
[39m
[36m [2mâ¯[22m src/components/dashboard/RevenueExpensesChart.test.tsx:[2m186:21[22m[39m
    [90m184| [39m
    [90m185| [39m      [35mconst[39m chart [33m=[39m container[33m.[39m[34mquerySelector[39m([32m'.recharts-wrapper'[39m)[33m;[39m
    [90m186| [39m      [34mexpect[39m(chart)[33m.[39m[34mtoBeInTheDocument[39m()[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m187| [39m    })[33m;[39m
    [90m188| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[11/21]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mformatting[2m > [22mshould format dates on x-axis
[31m[1mError[22m: [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
[39m
[36m [2mâ¯[22m src/components/dashboard/RevenueExpensesChart.test.tsx:[2m193:21[22m[39m
    [90m191| [39m
    [90m192| [39m      [35mconst[39m xAxis [33m=[39m container[33m.[39m[34mquerySelector[39m([32m'.recharts-xAxis'[39m)[33m;[39m
    [90m193| [39m      [34mexpect[39m(xAxis)[33m.[39m[34mtoBeInTheDocument[39m()[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m194| [39m    })[33m;[39m
    [90m195| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[12/21]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mformatting[2m > [22mshould format currency on y-axis
[31m[1mError[22m: [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
[39m
[36m [2mâ¯[22m src/components/dashboard/RevenueExpensesChart.test.tsx:[2m200:21[22m[39m
    [90m198| [39m
    [90m199| [39m      [35mconst[39m yAxis [33m=[39m container[33m.[39m[34mquerySelector[39m([32m'.recharts-yAxis'[39m)[33m;[39m
    [90m200| [39m      [34mexpect[39m(yAxis)[33m.[39m[34mtoBeInTheDocument[39m()[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m201| [39m    })[33m;[39m
    [90m202| [39m  })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[13/21]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mprofitability insights[2m > [22mshould calculate net profit/loss for period
[31m[1mTestingLibraryElementError[22m: Found multiple elements with the text: /\$16,700/

Here are the matching elements:

Ignored nodes: comments, script, style
[36m<span[31m
  [33mclass[31m=[32m"_summaryValue_9ac9be _profit_9ac9be"[31m
[36m>[31m
  [0m$16,700[0m
[36m</span>[31m

Ignored nodes: comments, script, style
[36m<p[31m
  [33mclass[31m=[32m"_insight_9ac9be"[31m
[36m>[31m
  [0mGreat job! Your revenue exceeded expenses by [0m
  [0m$16,700[0m
  [0m over this period.[0m
[36m</p>[31m

(If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33maria-label[31m=[32m"Revenue vs Expenses Chart"[31m
      [33mclass[31m=[32m"_widget_9ac9be "[31m
    [36m>[31m
      [36m<div[31m
        [33mclass[31m=[32m"_header_9ac9be"[31m
      [36m>[31m
        [36m<h2[31m
          [33mclass[31m=[32m"_title_9ac9be"[31m
        [36m>[31m
          [0mRevenue vs Expenses[0m
        [36m</h2>[31m
        [36m<span[31m
          [33mclass[31m=[32m"_period_9ac9be"[31m
        [36m>[31m
          [0mLast 6 Months[0m
        [36m</span>[31m
      [36m</div>[31m
      [36m<div>[31m
        [36m<span>[31m
          [0mProfitable[0m
        [36m</span>[31m
        [36m<span>[31m
          [0mGrowing[0m
        [36m</span>[31m
      [36m</div>[31m
      [36m<div[31m
        [33mclass[31m=[32m"_summarySection_9ac9be"[31m
      [36m>[31m
        [36m<div[31m
          [33mclass[31m=[32m"_summaryItem_9ac9be"[31m
        [36m>[31m
          [36m<span[31m
            [33mclass[31m=[32m"_summaryLabel_9ac9be"[31m
          [36m>[31m
            [0mTotal Revenue[0m
          [36m</span>[31m
          [36m<span[31m
            [33mclass[31m=[32m"_summaryValue_9ac9be _revenue_9ac9be"[31m
          [36m>[31m
            [0m$40,500[0m
          [36m</span>[31m
        [36m</div>[31m
        [36m<div[31m
          [33mclass[31m=[32m"_summaryItem_9ac9be"[31m
        [36m>[31m
          [36m<span[31m
            [33mclass[31m=[32m"_summaryLabel_9ac9be"[31m
          [36m>[31m
            [0mTotal Expenses[0m
          [36m</span>[31m
          [36m<span[31m
            [33mclass[31m=[32m"_summaryValue_9ac9be _expenses_9ac9be"[31m
          [36m>[31m
            [0m$23,800[0m
          [36m</span>[31m
        [36m</div>[31m
        [36m<div[31m
          [33mclass[31m=[32m"_summaryItem_9ac9be"[31m
        [36m>[31m
          [36m<span[31m
            [33mclass[31m=[32m"_summaryLabel_9ac9be"[31m
          [36m>[31m
            [0mNet [0m
            [0mProfit[0m
          [36m</span>[31m
          [36m<span[31m
            [33mclass[31m=[32m"_summaryValue_9ac9be _profit_9ac9be"[31m
          [36m>[31m
            [0m$16,700[0m
          [36m</span>[31m
        [36m</div>[31m
      [36m</div>[31m
      [36m<div[31m
        [33maria-label[31m=[32m"Revenue and expenses comparison chart"[31m
        [33mclass[31m=[32m"_chartSection_9ac9be"[31m
      [36m>[31m
        [36m<div[31m
          [33mclass[31m=[32m"recharts-responsive-container"[31m
          [33mstyle[31m=[32m"width: 100%; height: 300px; min-width: 0;"[31m
        [36m>[31m
          [36m<div[31m
            [33mstyle[31m=[32m"width: 0px; overflow-x: visible;"[31m
          [36m/>[31m
        [36m</div>[31m
      [36m</div>[31m
      [36m<div[31m
        [33mclass[31m=[32m"_insightSection_9ac9be"[31m
      [36m>[31m
        [36m<p[31m
          [33mclass[31m=[32m"_insight_9ac9be"[31m
        [36m>[31m
          [0mGreat job! Your revenue exceeded expenses by [0m
          [0m$16,700[0m
          [0m over this period.[0m
        [36m</p>[31m
      [36m</div>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
[90m [2mâ¯[22m Object.getElementError node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/config.js:[2m37:19[22m[39m
[90m [2mâ¯[22m getElementError node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:[2m20:35[22m[39m
[90m [2mâ¯[22m getMultipleElementsFoundError node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:[2m23:10[22m[39m
[90m [2mâ¯[22m node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:[2m55:13[22m[39m
[90m [2mâ¯[22m node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:[2m95:19[22m[39m
[36m [2mâ¯[22m src/components/dashboard/RevenueExpensesChart.test.tsx:[2m231:21[22m[39m
    [90m229| [39m      [90m// Total expenses: 3000 + 3500 + 4000 + 3800 + 4500 + 5000 = 238[39mâ€¦
    [90m230| [39m      [90m// Net: 16700[39m
    [90m231| [39m      [34mexpect[39m(screen[33m.[39m[34mgetByText[39m([36m/\$16,700/[39m))[33m.[39m[34mtoBeInTheDocument[39m()[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m232| [39m    })[33m;[39m
    [90m233| [39m  })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[14/21]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mresponsive behavior[2m > [22mshould maintain aspect ratio
[31m[1mError[22m: [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
[39m
[36m [2mâ¯[22m src/components/dashboard/RevenueExpensesChart.test.tsx:[2m247:23[22m[39m
    [90m245| [39m
    [90m246| [39m      [35mconst[39m wrapper [33m=[39m container[33m.[39m[34mquerySelector[39m([32m'.recharts-wrapper'[39m)[33m;[39m
    [90m247| [39m      [34mexpect[39m(wrapper)[33m.[39m[34mtoBeInTheDocument[39m()[33m;[39m
    [90m   | [39m                      [31m^[39m
    [90m248| [39m    })[33m;[39m
    [90m249| [39m  })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[15/21]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22maccessibility[2m > [22mshould hide decorative elements from screen readers
[31m[1mAssertionError[22m: expected 0 to be greater than 0[39m
[36m [2mâ¯[22m src/components/dashboard/RevenueExpensesChart.test.tsx:[2m278:33[22m[39m
    [90m276| [39m
    [90m277| [39m      [35mconst[39m decorative [33m=[39m container[33m.[39m[34mquerySelectorAll[39m([32m'[aria-hidden="tru[39mâ€¦
    [90m278| [39m      [34mexpect[39m(decorative[33m.[39mlength)[33m.[39m[34mtoBeGreaterThan[39m([34m0[39m)[33m;[39m
    [90m   | [39m                                [31m^[39m
    [90m279| [39m    })[33m;[39m
    [90m280| [39m  })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[16/21]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mcolor coding[2m > [22mshould use distinct colors for revenue and expenses
[31m[1mAssertionError[22m: expected 0 to be greater than 0[39m
[36m [2mâ¯[22m src/components/dashboard/RevenueExpensesChart.test.tsx:[2m288:27[22m[39m
    [90m286| [39m      [90m// Revenue should be green, expenses should be red/orange[39m
    [90m287| [39m      [35mconst[39m bars [33m=[39m container[33m.[39m[34mquerySelectorAll[39m([32m'.recharts-bar-rectangle[39mâ€¦
    [90m288| [39m      [34mexpect[39m(bars[33m.[39mlength)[33m.[39m[34mtoBeGreaterThan[39m([34m0[39m)[33m;[39m
    [90m   | [39m                          [31m^[39m
    [90m289| [39m    })[33m;[39m
    [90m290| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[17/21]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mcolor coding[2m > [22mshould maintain color consistency in legend
[31m[1mError[22m: [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
[39m
[36m [2mâ¯[22m src/components/dashboard/RevenueExpensesChart.test.tsx:[2m295:22[22m[39m
    [90m293| [39m
    [90m294| [39m      [35mconst[39m legend [33m=[39m container[33m.[39m[34mquerySelector[39m([32m'.recharts-legend-wrapper[39mâ€¦
    [90m295| [39m      [34mexpect[39m(legend)[33m.[39m[34mtoBeInTheDocument[39m()[33m;[39m
    [90m   | [39m                     [31m^[39m
    [90m296| [39m    })[33m;[39m
    [90m297| [39m  })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[18/21]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22medge cases[2m > [22mshould handle very long time periods
[31m[1mError[22m: [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
[39m
[36m [2mâ¯[22m src/components/dashboard/RevenueExpensesChart.test.tsx:[2m321:21[22m[39m
    [90m319| [39m
    [90m320| [39m      [35mconst[39m chart [33m=[39m container[33m.[39m[34mquerySelector[39m([32m'.recharts-wrapper'[39m)[33m;[39m
    [90m321| [39m      [34mexpect[39m(chart)[33m.[39m[34mtoBeInTheDocument[39m()[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m322| [39m    })[33m;[39m
    [90m323| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[19/21]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22medge cases[2m > [22mshould handle negative values gracefully
[31m[1mError[22m: [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
[39m
[36m [2mâ¯[22m src/components/dashboard/RevenueExpensesChart.test.tsx:[2m332:21[22m[39m
    [90m330| [39m
    [90m331| [39m      [35mconst[39m chart [33m=[39m container[33m.[39m[34mquerySelector[39m([32m'.recharts-wrapper'[39m)[33m;[39m
    [90m332| [39m      [34mexpect[39m(chart)[33m.[39m[34mtoBeInTheDocument[39m()[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m333| [39m    })[33m;[39m
    [90m334| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[20/21]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22medge cases[2m > [22mshould handle mixed date formats
[31m[1mError[22m: [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
[39m
[36m [2mâ¯[22m src/components/dashboard/RevenueExpensesChart.test.tsx:[2m344:21[22m[39m
    [90m342| [39m
    [90m343| [39m      [35mconst[39m chart [33m=[39m container[33m.[39m[34mquerySelector[39m([32m'.recharts-wrapper'[39m)[33m;[39m
    [90m344| [39m      [34mexpect[39m(chart)[33m.[39m[34mtoBeInTheDocument[39m()[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m345| [39m    })[33m;[39m
    [90m346| [39m  })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[21/21]âŽ¯[22m[39m

[2m Test Files [22m [1m[31m1 failed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[31m21 failed[39m[22m[2m | [22m[1m[32m21 passed[39m[22m[90m (42)[39m
[2m   Start at [22m 18:10:30
[2m   Duration [22m 19.57s[2m (transform 799ms, setup 3.26s, collect 3.93s, tests 786ms, environment 5.84s, prepare 1.45s)[22m


[1m[7m[31m FAIL [39m[27m[22m[31m Tests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
[3Jc
[7m[1m[34m RERUN [39m[22m[27m[2m src/services/ocr/billOcr.service.test.ts[22m [34mx1[39m

 [33mâ¯[39m src/services/ocr/billOcr.service.test.ts [2m ([22m[2m51 tests[22m [2m|[22m [31m9 failed[39m[2m)[22m[33m 20738[2mms[22m[39m
[31m   [33mâ¯[31m src/services/ocr/billOcr.service.test.ts[2m > [22mBillOCRService[2m > [22mextractInvoiceNumber[2m > [22mshould handle invoice numbers with dashes[39m
[31m     â†’ expected 'Number' to contain '2024'[39m
[31m   [33mâ¯[31m src/services/ocr/billOcr.service.test.ts[2m > [22mBillOCRService[2m > [22mextractTotalAmount[2m > [22mshould extract amount with "Total Due:" pattern[39m
[31m     â†’ expected 1.23 to be 1234.56 // Object.is equality[39m
[31m   [33mâ¯[31m src/services/ocr/billOcr.service.test.ts[2m > [22mBillOCRService[2m > [22mextractTotalAmount[2m > [22mshould extract amount with "Total:" pattern[39m
[31m     â†’ expected 2.5 to be 2500 // Object.is equality[39m
[31m   [33mâ¯[31m src/services/ocr/billOcr.service.test.ts[2m > [22mBillOCRService[2m > [22mextractPaymentTerms[2m > [22mshould return null when no terms found[39m
[31m     â†’ expected 'specified' to be null[39m
[31m   [33mâ¯[31m src/services/ocr/billOcr.service.test.ts[2m > [22mBillOCRService[2m > [22mgetConfidence[2m > [22mshould return medium confidence for partial data[39m
[31m     â†’ expected 'low' to be 'medium' // Object.is equality[39m
[31m   [33mâ¯[31m src/services/ocr/billOcr.service.test.ts[2m > [22mBillOCRService[2m > [22massessImageQuality[2m > [22mshould assess image quality in test environment[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[31m   [33mâ¯[31m src/services/ocr/billOcr.service.test.ts[2m > [22mBillOCRService[2m > [22massessImageQuality[2m > [22mshould return acceptable quality in test environment[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[31m   [33mâ¯[31m src/services/ocr/billOcr.service.test.ts[2m > [22mBillOCRService[2m > [22mpreprocessImage[2m > [22mshould preprocess image in test environment[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[31m   [33mâ¯[31m src/services/ocr/billOcr.service.test.ts[2m > [22mBillOCRService[2m > [22mpreprocessImage[2m > [22mshould return unmodified data in test environment[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1m[7m Failed Tests 9 [27m[22mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/ocr/billOcr.service.test.ts[2m > [22mBillOCRService[2m > [22mextractInvoiceNumber[2m > [22mshould handle invoice numbers with dashes
[31m[1mAssertionError[22m: expected 'Number' to contain '2024'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 2024[39m
[31m+ Number[39m

[36m [2mâ¯[22m src/services/ocr/billOcr.service.test.ts:[2m80:28[22m[39m
    [90m 78| [39m      [35mconst[39m text [33m=[39m [32m'Invoice Number: 2024-Q1-0001'[39m[33m;[39m
    [90m 79| [39m      [35mconst[39m result [33m=[39m service[33m.[39m[34mextractInvoiceNumber[39m(text)[33m;[39m
    [90m 80| [39m      [34mexpect[39m(result[33m.[39mvalue)[33m.[39m[34mtoContain[39m([32m'2024'[39m)[33m;[39m
    [90m   | [39m                           [31m^[39m
    [90m 81| [39m    })[33m;[39m
    [90m 82| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/9]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/ocr/billOcr.service.test.ts[2m > [22mBillOCRService[2m > [22mextractTotalAmount[2m > [22mshould extract amount with "Total Due:" pattern
[31m[1mAssertionError[22m: expected 1.23 to be 1234.56 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 1234.56[39m
[31m+ 1.23[39m

[36m [2mâ¯[22m src/services/ocr/billOcr.service.test.ts:[2m154:28[22m[39m
    [90m152| [39m      [35mconst[39m text [33m=[39m [32m'Total Due: $1,234.56'[39m[33m;[39m
    [90m153| [39m      [35mconst[39m result [33m=[39m service[33m.[39m[34mextractTotalAmount[39m(text)[33m;[39m
    [90m154| [39m      [34mexpect[39m(result[33m.[39mvalue)[33m.[39m[34mtoBe[39m([34m1234.56[39m)[33m;[39m
    [90m   | [39m                           [31m^[39m
    [90m155| [39m      [34mexpect[39m(result[33m.[39mconfidence)[33m.[39m[34mtoBeGreaterThanOrEqual[39m([34m90[39m)[33m;[39m
    [90m156| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[2/9]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/ocr/billOcr.service.test.ts[2m > [22mBillOCRService[2m > [22mextractTotalAmount[2m > [22mshould extract amount with "Total:" pattern
[31m[1mAssertionError[22m: expected 2.5 to be 2500 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 2500[39m
[31m+ 2.5[39m

[36m [2mâ¯[22m src/services/ocr/billOcr.service.test.ts:[2m173:28[22m[39m
    [90m171| [39m      [35mconst[39m text [33m=[39m [32m'Total: $2,500.00'[39m[33m;[39m
    [90m172| [39m      [35mconst[39m result [33m=[39m service[33m.[39m[34mextractTotalAmount[39m(text)[33m;[39m
    [90m173| [39m      [34mexpect[39m(result[33m.[39mvalue)[33m.[39m[34mtoBe[39m([34m2500.0[39m)[33m;[39m
    [90m   | [39m                           [31m^[39m
    [90m174| [39m    })[33m;[39m
    [90m175| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[3/9]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/ocr/billOcr.service.test.ts[2m > [22mBillOCRService[2m > [22mextractPaymentTerms[2m > [22mshould return null when no terms found
[31m[1mAssertionError[22m: expected 'specified' to be null[39m
[36m [2mâ¯[22m src/services/ocr/billOcr.service.test.ts:[2m259:28[22m[39m
    [90m257| [39m      [35mconst[39m text [33m=[39m [32m'No payment terms specified'[39m[33m;[39m
    [90m258| [39m      [35mconst[39m result [33m=[39m service[33m.[39m[34mextractPaymentTerms[39m(text)[33m;[39m
    [90m259| [39m      [34mexpect[39m(result[33m.[39mvalue)[33m.[39m[34mtoBeNull[39m()[33m;[39m
    [90m   | [39m                           [31m^[39m
    [90m260| [39m    })[33m;[39m
    [90m261| [39m  })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[4/9]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/ocr/billOcr.service.test.ts[2m > [22mBillOCRService[2m > [22mgetConfidence[2m > [22mshould return medium confidence for partial data
[31m[1mAssertionError[22m: expected 'low' to be 'medium' // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- medium[39m
[31m+ low[39m

[36m [2mâ¯[22m src/services/ocr/billOcr.service.test.ts:[2m318:28[22m[39m
    [90m316| [39m      [34mexpect[39m(result[33m.[39moverall)[33m.[39m[34mtoBeGreaterThan[39m([34m40[39m)[33m;[39m
    [90m317| [39m      [34mexpect[39m(result[33m.[39moverall)[33m.[39m[34mtoBeLessThan[39m([34m80[39m)[33m;[39m
    [90m318| [39m      [34mexpect[39m(result[33m.[39mlevel)[33m.[39m[34mtoBe[39m([32m'medium'[39m)[33m;[39m
    [90m   | [39m                           [31m^[39m
    [90m319| [39m    })[33m;[39m
    [90m320| [39m  })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[5/9]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/ocr/billOcr.service.test.ts[2m > [22mBillOCRService[2m > [22massessImageQuality[2m > [22mshould assess image quality in test environment
[31m[1m[7m FAIL [27m[22m[39m src/services/ocr/billOcr.service.test.ts[2m > [22mBillOCRService[2m > [22massessImageQuality[2m > [22mshould return acceptable quality in test environment
[31m[1m[7m FAIL [27m[22m[39m src/services/ocr/billOcr.service.test.ts[2m > [22mBillOCRService[2m > [22mpreprocessImage[2m > [22mshould preprocess image in test environment
[31m[1m[7m FAIL [27m[22m[39m src/services/ocr/billOcr.service.test.ts[2m > [22mBillOCRService[2m > [22mpreprocessImage[2m > [22mshould return unmodified data in test environment
[31m[1mError[22m: Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[6/9]âŽ¯[22m[39m

[2m Test Files [22m [1m[31m1 failed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[31m9 failed[39m[22m[2m | [22m[1m[32m42 passed[39m[22m[90m (51)[39m
[2m   Start at [22m 18:24:19
[2m   Duration [22m 47.87s


[1m[7m[31m FAIL [39m[27m[22m[31m Tests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
       [34mrerun x1[39m
[2K[1A[2K[G       [90mrerun x1[39m
[2K[1A[2K[G       [2m[90mrerun x1[39m[22m
[2K[1A[2K[G[3Jc
[7m[1m[34m RERUN [39m[22m[27m[2m src/services/ocr/billOcr.integration.test.ts[22m [34mx1[39m

 [33mâ¯[39m src/services/ocr/billOcr.integration.test.ts [2m ([22m[2m18 tests[22m [2m|[22m [31m10 failed[39m[2m)[22m[33m 50367[2mms[22m[39m
[31m   [33mâ¯[31m src/services/ocr/billOcr.integration.test.ts[2m > [22mBillOCRService Integration Tests[2m > [22mFull OCR workflow[2m > [22mshould process bill image end-to-end[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[31m   [33mâ¯[31m src/services/ocr/billOcr.integration.test.ts[2m > [22mBillOCRService Integration Tests[2m > [22mFull OCR workflow[2m > [22mshould extract vendor information correctly[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[31m   [33mâ¯[31m src/services/ocr/billOcr.integration.test.ts[2m > [22mBillOCRService Integration Tests[2m > [22mFull OCR workflow[2m > [22mshould extract invoice details correctly[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[31m   [33mâ¯[31m src/services/ocr/billOcr.integration.test.ts[2m > [22mBillOCRService Integration Tests[2m > [22mFull OCR workflow[2m > [22mshould extract total amount correctly[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[31m   [33mâ¯[31m src/services/ocr/billOcr.integration.test.ts[2m > [22mBillOCRService Integration Tests[2m > [22mFull OCR workflow[2m > [22mshould extract payment terms correctly[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[31m   [33mâ¯[31m src/services/ocr/billOcr.integration.test.ts[2m > [22mBillOCRService Integration Tests[2m > [22mFull OCR workflow[2m > [22mshould extract line items when requested[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[31m   [33mâ¯[31m src/services/ocr/billOcr.integration.test.ts[2m > [22mBillOCRService Integration Tests[2m > [22mConfidence scoring[2m > [22mshould assign high confidence to complete bills[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[31m   [33mâ¯[31m src/services/ocr/billOcr.integration.test.ts[2m > [22mBillOCRService Integration Tests[2m > [22mConfidence scoring[2m > [22mshould flag low confidence for manual review[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[31m   [33mâ¯[31m src/services/ocr/billOcr.integration.test.ts[2m > [22mBillOCRService Integration Tests[2m > [22mError handling[2m > [22mshould handle invalid image data gracefully[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[31m   [33mâ¯[31m src/services/ocr/billOcr.integration.test.ts[2m > [22mBillOCRService Integration Tests[2m > [22mPerformance[2m > [22mshould process bill within reasonable time[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1m[7m Failed Tests 10 [27m[22mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/ocr/billOcr.integration.test.ts[2m > [22mBillOCRService Integration Tests[2m > [22mFull OCR workflow[2m > [22mshould process bill image end-to-end
[31m[1m[7m FAIL [27m[22m[39m src/services/ocr/billOcr.integration.test.ts[2m > [22mBillOCRService Integration Tests[2m > [22mFull OCR workflow[2m > [22mshould extract vendor information correctly
[31m[1m[7m FAIL [27m[22m[39m src/services/ocr/billOcr.integration.test.ts[2m > [22mBillOCRService Integration Tests[2m > [22mFull OCR workflow[2m > [22mshould extract invoice details correctly
[31m[1m[7m FAIL [27m[22m[39m src/services/ocr/billOcr.integration.test.ts[2m > [22mBillOCRService Integration Tests[2m > [22mFull OCR workflow[2m > [22mshould extract total amount correctly
[31m[1m[7m FAIL [27m[22m[39m src/services/ocr/billOcr.integration.test.ts[2m > [22mBillOCRService Integration Tests[2m > [22mFull OCR workflow[2m > [22mshould extract payment terms correctly
[31m[1m[7m FAIL [27m[22m[39m src/services/ocr/billOcr.integration.test.ts[2m > [22mBillOCRService Integration Tests[2m > [22mFull OCR workflow[2m > [22mshould extract line items when requested
[31m[1m[7m FAIL [27m[22m[39m src/services/ocr/billOcr.integration.test.ts[2m > [22mBillOCRService Integration Tests[2m > [22mConfidence scoring[2m > [22mshould assign high confidence to complete bills
[31m[1m[7m FAIL [27m[22m[39m src/services/ocr/billOcr.integration.test.ts[2m > [22mBillOCRService Integration Tests[2m > [22mConfidence scoring[2m > [22mshould flag low confidence for manual review
[31m[1m[7m FAIL [27m[22m[39m src/services/ocr/billOcr.integration.test.ts[2m > [22mBillOCRService Integration Tests[2m > [22mError handling[2m > [22mshould handle invalid image data gracefully
[31m[1m[7m FAIL [27m[22m[39m src/services/ocr/billOcr.integration.test.ts[2m > [22mBillOCRService Integration Tests[2m > [22mPerformance[2m > [22mshould process bill within reasonable time
[31m[1mError[22m: Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/10]âŽ¯[22m[39m

[2m Test Files [22m [1m[31m1 failed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[31m10 failed[39m[22m[2m | [22m[1m[32m8 passed[39m[22m[90m (18)[39m
[2m   Start at [22m 18:26:21
[2m   Duration [22m 72.61s


[1m[7m[31m FAIL [39m[27m[22m[31m Tests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
       [34mrerun x1[39m
[2K[1A[2K[G       [90mrerun x1[39m
[2K[1A[2K[G       [2m[90mrerun x1[39m[22m
[2K[1A[2K[G[3Jc
[7m[1m[34m RERUN [39m[22m[27m[2m src/services/reports/reportBuilder.service.test.ts[22m [34mx1[39m


[2m Test Files [22m [2mno tests[22m
[2m      Tests [22m [2mno tests[22m
[2m   Start at [22m 19:17:34
[2m   Duration [22m 0ms


[1m[7m[32m PASS [39m[27m[22m[32m Waiting for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
       [34mrerun x1[39m
[2K[1A[2K[G       [90mrerun x1[39m
[2K[1A[2K[G       [2m[90mrerun x1[39m[22m
[2K[1A[2K[G[3Jc
[7m[1m[34m RERUN [39m[22m[27m[2m src/services/reports/reportBuilder.service.test.ts[22m [34mx2[39m


[2m Test Files [22m [2mno tests[22m
[2m      Tests [22m [2mno tests[22m
[2m   Start at [22m 19:18:36
[2m   Duration [22m 0ms


[1m[7m[32m PASS [39m[27m[22m[32m Waiting for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
       [34mrerun x2[39m
[2K[1A[2K[G       [90mrerun x2[39m
[2K[1A[2K[G       [2m[90mrerun x2[39m[22m
[2K[1A[2K[G[3Jc
[7m[1m[34m RERUN [39m[22m[27m[2m src/services/reports/reportBuilder.service.test.ts[22m [34mx3[39m


[2m Test Files [22m [2mno tests[22m
[2m      Tests [22m [2mno tests[22m
[2m   Start at [22m 19:19:05
[2m   Duration [22m 0ms


[1m[7m[32m PASS [39m[27m[22m[32m Waiting for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
       [34mrerun x3[39m
[2K[1A[2K[G       [90mrerun x3[39m
[2K[1A[2K[G       [2m[90mrerun x3[39m[22m
[2K[1A[2K[G[3Jc
[7m[1m[34m RERUN [39m[22m[27m[2m src/services/reports/reportBuilder.service.test.ts[22m [34mx4[39m


[2m Test Files [22m [2mno tests[22m
[2m      Tests [22m [2mno tests[22m
[2m   Start at [22m 19:19:33
[2m   Duration [22m 0ms


[1m[7m[32m PASS [39m[27m[22m[32m Waiting for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
       [34mrerun x4[39m
[2K[1A[2K[G       [90mrerun x4[39m
[2K[1A[2K[G       [2m[90mrerun x4[39m[22m
[2K[1A[2K[G[3Jc
[7m[1m[34m RERUN [39m[22m[27m[2m src/services/reports/reportBuilder.service.test.ts[22m [34mx5[39m


[2m Test Files [22m [2mno tests[22m
[2m      Tests [22m [2mno tests[22m
[2m   Start at [22m 19:21:51
[2m   Duration [22m 0ms


[1m[7m[32m PASS [39m[27m[22m[32m Waiting for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
       [34mrerun x5[39m
[2K[1A[2K[G       [90mrerun x5[39m
[2K[1A[2K[G       [2m[90mrerun x5[39m[22m
[2K[1A[2K[G[3Jc
[7m[1m[34m RERUN [39m[22m[27m[2m src/services/reports/reportBuilder.service.test.ts[22m [34mx6[39m


[2m Test Files [22m [2mno tests[22m
[2m      Tests [22m [2mno tests[22m
[2m   Start at [22m 19:24:33
[2m   Duration [22m 0ms


[1m[7m[32m PASS [39m[27m[22m[32m Waiting for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
       [34mrerun x6[39m
[2K[1A[2K[G       [90mrerun x6[39m
[2K[1A[2K[G       [2m[90mrerun x6[39m[22m
[2K[1A[2K[G[3Jc
[7m[1m[34m RERUN [39m[22m[27m[2m relay/package.json[22m

 [33mâ¯[39m src/services/ocr/billOcr.service.test.ts [2m ([22m[2m51 tests[22m [2m|[22m [31m9 failed[39m[2m)[22m[33m 20566[2mms[22m[39m
[31m   [33mâ¯[31m src/services/ocr/billOcr.service.test.ts[2m > [22mBillOCRService[2m > [22mextractInvoiceNumber[2m > [22mshould handle invoice numbers with dashes[39m
[31m     â†’ expected 'Number' to contain '2024'[39m
[31m   [33mâ¯[31m src/services/ocr/billOcr.service.test.ts[2m > [22mBillOCRService[2m > [22mextractTotalAmount[2m > [22mshould extract amount with "Total Due:" pattern[39m
[31m     â†’ expected 1.23 to be 1234.56 // Object.is equality[39m
[31m   [33mâ¯[31m src/services/ocr/billOcr.service.test.ts[2m > [22mBillOCRService[2m > [22mextractTotalAmount[2m > [22mshould extract amount with "Total:" pattern[39m
[31m     â†’ expected 2.5 to be 2500 // Object.is equality[39m
[31m   [33mâ¯[31m src/services/ocr/billOcr.service.test.ts[2m > [22mBillOCRService[2m > [22mextractPaymentTerms[2m > [22mshould return null when no terms found[39m
[31m     â†’ expected 'specified' to be null[39m
[31m   [33mâ¯[31m src/services/ocr/billOcr.service.test.ts[2m > [22mBillOCRService[2m > [22mgetConfidence[2m > [22mshould return medium confidence for partial data[39m
[31m     â†’ expected 'low' to be 'medium' // Object.is equality[39m
[31m   [33mâ¯[31m src/services/ocr/billOcr.service.test.ts[2m > [22mBillOCRService[2m > [22massessImageQuality[2m > [22mshould assess image quality in test environment[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[31m   [33mâ¯[31m src/services/ocr/billOcr.service.test.ts[2m > [22mBillOCRService[2m > [22massessImageQuality[2m > [22mshould return acceptable quality in test environment[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[31m   [33mâ¯[31m src/services/ocr/billOcr.service.test.ts[2m > [22mBillOCRService[2m > [22mpreprocessImage[2m > [22mshould preprocess image in test environment[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[31m   [33mâ¯[31m src/services/ocr/billOcr.service.test.ts[2m > [22mBillOCRService[2m > [22mpreprocessImage[2m > [22mshould return unmodified data in test environment[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
 [33mâ¯[39m src/services/ocr/billOcr.integration.test.ts [2m ([22m[2m18 tests[22m [2m|[22m [31m10 failed[39m[2m)[22m[33m 50916[2mms[22m[39m
[31m   [33mâ¯[31m src/services/ocr/billOcr.integration.test.ts[2m > [22mBillOCRService Integration Tests[2m > [22mFull OCR workflow[2m > [22mshould process bill image end-to-end[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[31m   [33mâ¯[31m src/services/ocr/billOcr.integration.test.ts[2m > [22mBillOCRService Integration Tests[2m > [22mFull OCR workflow[2m > [22mshould extract vendor information correctly[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[31m   [33mâ¯[31m src/services/ocr/billOcr.integration.test.ts[2m > [22mBillOCRService Integration Tests[2m > [22mFull OCR workflow[2m > [22mshould extract invoice details correctly[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[31m   [33mâ¯[31m src/services/ocr/billOcr.integration.test.ts[2m > [22mBillOCRService Integration Tests[2m > [22mFull OCR workflow[2m > [22mshould extract total amount correctly[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[31m   [33mâ¯[31m src/services/ocr/billOcr.integration.test.ts[2m > [22mBillOCRService Integration Tests[2m > [22mFull OCR workflow[2m > [22mshould extract payment terms correctly[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[31m   [33mâ¯[31m src/services/ocr/billOcr.integration.test.ts[2m > [22mBillOCRService Integration Tests[2m > [22mFull OCR workflow[2m > [22mshould extract line items when requested[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[31m   [33mâ¯[31m src/services/ocr/billOcr.integration.test.ts[2m > [22mBillOCRService Integration Tests[2m > [22mConfidence scoring[2m > [22mshould assign high confidence to complete bills[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[31m   [33mâ¯[31m src/services/ocr/billOcr.integration.test.ts[2m > [22mBillOCRService Integration Tests[2m > [22mConfidence scoring[2m > [22mshould flag low confidence for manual review[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[31m   [33mâ¯[31m src/services/ocr/billOcr.integration.test.ts[2m > [22mBillOCRService Integration Tests[2m > [22mError handling[2m > [22mshould handle invalid image data gracefully[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[31m   [33mâ¯[31m src/services/ocr/billOcr.integration.test.ts[2m > [22mBillOCRService Integration Tests[2m > [22mPerformance[2m > [22mshould process bill within reasonable time[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
 [33mâ¯[39m src/components/dashboard/RevenueExpensesChart.test.tsx [2m ([22m[2m42 tests[22m [2m|[22m [31m21 failed[39m[2m)[22m[33m 5062[2mms[22m[39m
[31m   [33mâ¯[31m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mrendering[2m > [22mshould render bar chart[39m
[31m     â†’ [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
[39m
[31m   [33mâ¯[31m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mrendering[2m > [22mshould render legend for revenue and expenses[39m
[31m     â†’ [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
[39m
[31m   [33mâ¯[31m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mdata visualization[2m > [22mshould display bars for revenue[39m
[31m     â†’ expected 0 to be greater than 0[39m
[31m   [33mâ¯[31m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mdata visualization[2m > [22mshould display bars for expenses[39m
[31m     â†’ expected 0 to be greater than 0[39m
[31m   [33mâ¯[31m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mdata visualization[2m > [22mshould handle single data point[39m
[31m     â†’ [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
[39m
[31m   [33mâ¯[31m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mdata visualization[2m > [22mshould handle varying data ranges[39m
[31m     â†’ [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
[39m
[31m   [33mâ¯[31m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mtooltip functionality[2m > [22mshould render tooltip on hover[39m
[31m     â†’ [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
[39m
[31m   [33mâ¯[31m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mtooltip functionality[2m > [22mshould format tooltip values as currency[39m
[31m     â†’ [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
[39m
[31m   [33mâ¯[31m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mformatting[2m > [22mshould handle large numbers[39m
[31m     â†’ [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
[39m
[31m   [33mâ¯[31m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mformatting[2m > [22mshould handle zero values[39m
[31m     â†’ [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
[39m
[31m   [33mâ¯[31m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mformatting[2m > [22mshould handle decimal values[39m
[31m     â†’ [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
[39m
[31m   [33mâ¯[31m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mformatting[2m > [22mshould format dates on x-axis[39m
[31m     â†’ [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
[39m
[31m   [33mâ¯[31m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mformatting[2m > [22mshould format currency on y-axis[39m
[31m     â†’ [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
[39m
[31m   [33mâ¯[31m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mprofitability insights[2m > [22mshould calculate net profit/loss for period[39m
[31m     â†’ Found multiple elements with the text: /\$16,700/

Here are the matching elements:

Ignored nodes: comments, script, style
[36m<span[31m
  [33mclass[31m=[32m"_summaryValue_9ac9be _profit_9ac9be"[31m
[36m>[31m
  [0m$16,700[0m
[36m</span>[31m

Ignored nodes: comments, script, style
[36m<p[31m
  [33mclass[31m=[32m"_insight_9ac9be"[31m
[36m>[31m
  [0mGreat job! Your revenue exceeded expenses by [0m
  [0m$16,700[0m
  [0m over this period.[0m
[36m</p>[31m

(If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33maria-label[31m=[32m"Revenue vs Expenses Chart"[31m
      [33mclass[31m=[32m"_widget_9ac9be "[31m
    [36m>[31m
      [36m<div[31m
        [33mclass[31m=[32m"_header_9ac9be"[31m
      [36m>[31m
        [36m<h2[31m
          [33mclass[31m=[32m"_title_9ac9be"[31m
        [36m>[31m
          [0mRevenue vs Expenses[0m
        [36m</h2>[31m
        [36m<span[31m
          [33mclass[31m=[32m"_period_9ac9be"[31m
        [36m>[31m
          [0mLast 6 Months[0m
        [36m</span>[31m
      [36m</div>[31m
      [36m<div>[31m
        [36m<span>[31m
          [0mProfitable[0m
        [36m</span>[31m
        [36m<span>[31m
          [0mGrowing[0m
        [36m</span>[31m
      [36m</div>[31m
      [36m<div[31m
        [33mclass[31m=[32m"_summarySection_9ac9be"[31m
      [36m>[31m
        [36m<div[31m
          [33mclass[31m=[32m"_summaryItem_9ac9be"[31m
        [36m>[31m
          [36m<span[31m
            [33mclass[31m=[32m"_summaryLabel_9ac9be"[31m
          [36m>[31m
            [0mTotal Revenue[0m
          [36m</span>[31m
          [36m<span[31m
            [33mclass[31m=[32m"_summaryValue_9ac9be _revenue_9ac9be"[31m
          [36m>[31m
            [0m$40,500[0m
          [36m</span>[31m
        [36m</div>[31m
        [36m<div[31m
          [33mclass[31m=[32m"_summaryItem_9ac9be"[31m
        [36m>[31m
          [36m<span[31m
            [33mclass[31m=[32m"_summaryLabel_9ac9be"[31m
          [36m>[31m
            [0mTotal Expenses[0m
          [36m</span>[31m
          [36m<span[31m
            [33mclass[31m=[32m"_summaryValue_9ac9be _expenses_9ac9be"[31m
          [36m>[31m
            [0m$23,800[0m
          [36m</span>[31m
        [36m</div>[31m
        [36m<div[31m
          [33mclass[31m=[32m"_summaryItem_9ac9be"[31m
        [36m>[31m
          [36m<span[31m
            [33mclass[31m=[32m"_summaryLabel_9ac9be"[31m
          [36m>[31m
            [0mNet [0m
            [0mProfit[0m
          [36m</span>[31m
          [36m<span[31m
            [33mclass[31m=[32m"_summaryValue_9ac9be _profit_9ac9be"[31m
          [36m>[31m
            [0m$16,700[0m
          [36m</span>[31m
        [36m</div>[31m
      [36m</div>[31m
      [36m<div[31m
        [33maria-label[31m=[32m"Revenue and expenses comparison chart"[31m
        [33mclass[31m=[32m"_chartSection_9ac9be"[31m
      [36m>[31m
        [36m<div[31m
          [33mclass[31m=[32m"recharts-responsive-container"[31m
          [33mstyle[31m=[32m"width: 100%; height: 300px; min-width: 0;"[31m
        [36m>[31m
          [36m<div[31m
            [33mstyle[31m=[32m"width: 0px; overflow-x: visible;"[31m
          [36m/>[31m
        [36m</div>[31m
      [36m</div>[31m
      [36m<div[31m
        [33mclass[31m=[32m"_insightSection_9ac9be"[31m
      [36m>[31m
        [36m<p[31m
          [33mclass[31m=[32m"_insight_9ac9be"[31m
        [36m>[31m
          [0mGreat job! Your revenue exceeded expenses by [0m
          [0m$16,700[0m
          [0m over this period.[0m
        [36m</p>[31m
      [36m</div>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
[31m   [33mâ¯[31m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mresponsive behavior[2m > [22mshould maintain aspect ratio[39m
[31m     â†’ [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
[39m
[31m   [33mâ¯[31m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22maccessibility[2m > [22mshould hide decorative elements from screen readers[39m
[31m     â†’ expected 0 to be greater than 0[39m
[31m   [33mâ¯[31m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mcolor coding[2m > [22mshould use distinct colors for revenue and expenses[39m
[31m     â†’ expected 0 to be greater than 0[39m
[31m   [33mâ¯[31m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mcolor coding[2m > [22mshould maintain color consistency in legend[39m
[31m     â†’ [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
[39m
[31m   [33mâ¯[31m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22medge cases[2m > [22mshould handle very long time periods[39m
[31m     â†’ [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
[39m
[31m   [33mâ¯[31m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22medge cases[2m > [22mshould handle negative values gracefully[39m
[31m     â†’ [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
[39m
[31m   [33mâ¯[31m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22medge cases[2m > [22mshould handle mixed date formats[39m
[31m     â†’ [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
[39m

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1m[7m Failed Tests 40 [27m[22mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[31m[1m[7m FAIL [27m[22m[39m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mrendering[2m > [22mshould render bar chart
[31m[1mError[22m: [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
[39m
[36m [2mâ¯[22m src/components/dashboard/RevenueExpensesChart.test.tsx:[2m34:21[22m[39m
    [90m 32| [39m
    [90m 33| [39m      [35mconst[39m chart [33m=[39m container[33m.[39m[34mquerySelector[39m([32m'.recharts-wrapper'[39m)[33m;[39m
    [90m 34| [39m      [34mexpect[39m(chart)[33m.[39m[34mtoBeInTheDocument[39m()[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m 35| [39m    })[33m;[39m
    [90m 36| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/40]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mrendering[2m > [22mshould render legend for revenue and expenses
[31m[1mError[22m: [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
[39m
[36m [2mâ¯[22m src/components/dashboard/RevenueExpensesChart.test.tsx:[2m41:22[22m[39m
    [90m 39| [39m
    [90m 40| [39m      [35mconst[39m legend [33m=[39m container[33m.[39m[34mquerySelector[39m([32m'.recharts-legend-wrapper[39mâ€¦
    [90m 41| [39m      [34mexpect[39m(legend)[33m.[39m[34mtoBeInTheDocument[39m()[33m;[39m
    [90m   | [39m                     [31m^[39m
    [90m 42| [39m    })[33m;[39m
    [90m 43| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[2/40]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mdata visualization[2m > [22mshould display bars for revenue
[31m[1mAssertionError[22m: expected 0 to be greater than 0[39m
[36m [2mâ¯[22m src/components/dashboard/RevenueExpensesChart.test.tsx:[2m101:34[22m[39m
    [90m 99| [39m
    [90m100| [39m      [35mconst[39m revenueBars [33m=[39m container[33m.[39m[34mquerySelectorAll[39m([32m'[data-key="reven[39mâ€¦
    [90m101| [39m      [34mexpect[39m(revenueBars[33m.[39mlength)[33m.[39m[34mtoBeGreaterThan[39m([34m0[39m)[33m;[39m
    [90m   | [39m                                 [31m^[39m
    [90m102| [39m    })[33m;[39m
    [90m103| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[3/40]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mdata visualization[2m > [22mshould display bars for expenses
[31m[1mAssertionError[22m: expected 0 to be greater than 0[39m
[36m [2mâ¯[22m src/components/dashboard/RevenueExpensesChart.test.tsx:[2m108:34[22m[39m
    [90m106| [39m
    [90m107| [39m      [35mconst[39m expenseBars [33m=[39m container[33m.[39m[34mquerySelectorAll[39m([32m'[data-key="expen[39mâ€¦
    [90m108| [39m      [34mexpect[39m(expenseBars[33m.[39mlength)[33m.[39m[34mtoBeGreaterThan[39m([34m0[39m)[33m;[39m
    [90m   | [39m                                 [31m^[39m
    [90m109| [39m    })[33m;[39m
    [90m110| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[4/40]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mdata visualization[2m > [22mshould handle single data point
[31m[1mError[22m: [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
[39m
[36m [2mâ¯[22m src/components/dashboard/RevenueExpensesChart.test.tsx:[2m119:21[22m[39m
    [90m117| [39m
    [90m118| [39m      [35mconst[39m chart [33m=[39m container[33m.[39m[34mquerySelector[39m([32m'.recharts-wrapper'[39m)[33m;[39m
    [90m119| [39m      [34mexpect[39m(chart)[33m.[39m[34mtoBeInTheDocument[39m()[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m120| [39m    })[33m;[39m
    [90m121| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[5/40]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mdata visualization[2m > [22mshould handle varying data ranges
[31m[1mError[22m: [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
[39m
[36m [2mâ¯[22m src/components/dashboard/RevenueExpensesChart.test.tsx:[2m132:21[22m[39m
    [90m130| [39m
    [90m131| [39m      [35mconst[39m chart [33m=[39m container[33m.[39m[34mquerySelector[39m([32m'.recharts-wrapper'[39m)[33m;[39m
    [90m132| [39m      [34mexpect[39m(chart)[33m.[39m[34mtoBeInTheDocument[39m()[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m133| [39m    })[33m;[39m
    [90m134| [39m  })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[6/40]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mtooltip functionality[2m > [22mshould render tooltip on hover
[31m[1mError[22m: [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
[39m
[36m [2mâ¯[22m src/components/dashboard/RevenueExpensesChart.test.tsx:[2m141:32[22m[39m
    [90m139| [39m
    [90m140| [39m      [35mconst[39m tooltipContainer [33m=[39m container[33m.[39m[34mquerySelector[39m([32m'.recharts-tool[39mâ€¦
    [90m141| [39m      [34mexpect[39m(tooltipContainer)[33m.[39m[34mtoBeInTheDocument[39m()[33m;[39m
    [90m   | [39m                               [31m^[39m
    [90m142| [39m    })[33m;[39m
    [90m143| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[7/40]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mtooltip functionality[2m > [22mshould format tooltip values as currency
[31m[1mError[22m: [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
[39m
[36m [2mâ¯[22m src/components/dashboard/RevenueExpensesChart.test.tsx:[2m150:21[22m[39m
    [90m148| [39m
    [90m149| [39m      [35mconst[39m chart [33m=[39m container[33m.[39m[34mquerySelector[39m([32m'.recharts-wrapper'[39m)[33m;[39m
    [90m150| [39m      [34mexpect[39m(chart)[33m.[39m[34mtoBeInTheDocument[39m()[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m151| [39m    })[33m;[39m
    [90m152| [39m  })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[8/40]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mformatting[2m > [22mshould handle large numbers
[31m[1mError[22m: [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
[39m
[36m [2mâ¯[22m src/components/dashboard/RevenueExpensesChart.test.tsx:[2m163:21[22m[39m
    [90m161| [39m
    [90m162| [39m      [35mconst[39m chart [33m=[39m container[33m.[39m[34mquerySelector[39m([32m'.recharts-wrapper'[39m)[33m;[39m
    [90m163| [39m      [34mexpect[39m(chart)[33m.[39m[34mtoBeInTheDocument[39m()[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m164| [39m    })[33m;[39m
    [90m165| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[9/40]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mformatting[2m > [22mshould handle zero values
[31m[1mError[22m: [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
[39m
[36m [2mâ¯[22m src/components/dashboard/RevenueExpensesChart.test.tsx:[2m175:21[22m[39m
    [90m173| [39m
    [90m174| [39m      [35mconst[39m chart [33m=[39m container[33m.[39m[34mquerySelector[39m([32m'.recharts-wrapper'[39m)[33m;[39m
    [90m175| [39m      [34mexpect[39m(chart)[33m.[39m[34mtoBeInTheDocument[39m()[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m176| [39m    })[33m;[39m
    [90m177| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[10/40]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mformatting[2m > [22mshould handle decimal values
[31m[1mError[22m: [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
[39m
[36m [2mâ¯[22m src/components/dashboard/RevenueExpensesChart.test.tsx:[2m186:21[22m[39m
    [90m184| [39m
    [90m185| [39m      [35mconst[39m chart [33m=[39m container[33m.[39m[34mquerySelector[39m([32m'.recharts-wrapper'[39m)[33m;[39m
    [90m186| [39m      [34mexpect[39m(chart)[33m.[39m[34mtoBeInTheDocument[39m()[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m187| [39m    })[33m;[39m
    [90m188| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[11/40]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mformatting[2m > [22mshould format dates on x-axis
[31m[1mError[22m: [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
[39m
[36m [2mâ¯[22m src/components/dashboard/RevenueExpensesChart.test.tsx:[2m193:21[22m[39m
    [90m191| [39m
    [90m192| [39m      [35mconst[39m xAxis [33m=[39m container[33m.[39m[34mquerySelector[39m([32m'.recharts-xAxis'[39m)[33m;[39m
    [90m193| [39m      [34mexpect[39m(xAxis)[33m.[39m[34mtoBeInTheDocument[39m()[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m194| [39m    })[33m;[39m
    [90m195| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[12/40]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mformatting[2m > [22mshould format currency on y-axis
[31m[1mError[22m: [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
[39m
[36m [2mâ¯[22m src/components/dashboard/RevenueExpensesChart.test.tsx:[2m200:21[22m[39m
    [90m198| [39m
    [90m199| [39m      [35mconst[39m yAxis [33m=[39m container[33m.[39m[34mquerySelector[39m([32m'.recharts-yAxis'[39m)[33m;[39m
    [90m200| [39m      [34mexpect[39m(yAxis)[33m.[39m[34mtoBeInTheDocument[39m()[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m201| [39m    })[33m;[39m
    [90m202| [39m  })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[13/40]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mprofitability insights[2m > [22mshould calculate net profit/loss for period
[31m[1mTestingLibraryElementError[22m: Found multiple elements with the text: /\$16,700/

Here are the matching elements:

Ignored nodes: comments, script, style
[36m<span[31m
  [33mclass[31m=[32m"_summaryValue_9ac9be _profit_9ac9be"[31m
[36m>[31m
  [0m$16,700[0m
[36m</span>[31m

Ignored nodes: comments, script, style
[36m<p[31m
  [33mclass[31m=[32m"_insight_9ac9be"[31m
[36m>[31m
  [0mGreat job! Your revenue exceeded expenses by [0m
  [0m$16,700[0m
  [0m over this period.[0m
[36m</p>[31m

(If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33maria-label[31m=[32m"Revenue vs Expenses Chart"[31m
      [33mclass[31m=[32m"_widget_9ac9be "[31m
    [36m>[31m
      [36m<div[31m
        [33mclass[31m=[32m"_header_9ac9be"[31m
      [36m>[31m
        [36m<h2[31m
          [33mclass[31m=[32m"_title_9ac9be"[31m
        [36m>[31m
          [0mRevenue vs Expenses[0m
        [36m</h2>[31m
        [36m<span[31m
          [33mclass[31m=[32m"_period_9ac9be"[31m
        [36m>[31m
          [0mLast 6 Months[0m
        [36m</span>[31m
      [36m</div>[31m
      [36m<div>[31m
        [36m<span>[31m
          [0mProfitable[0m
        [36m</span>[31m
        [36m<span>[31m
          [0mGrowing[0m
        [36m</span>[31m
      [36m</div>[31m
      [36m<div[31m
        [33mclass[31m=[32m"_summarySection_9ac9be"[31m
      [36m>[31m
        [36m<div[31m
          [33mclass[31m=[32m"_summaryItem_9ac9be"[31m
        [36m>[31m
          [36m<span[31m
            [33mclass[31m=[32m"_summaryLabel_9ac9be"[31m
          [36m>[31m
            [0mTotal Revenue[0m
          [36m</span>[31m
          [36m<span[31m
            [33mclass[31m=[32m"_summaryValue_9ac9be _revenue_9ac9be"[31m
          [36m>[31m
            [0m$40,500[0m
          [36m</span>[31m
        [36m</div>[31m
        [36m<div[31m
          [33mclass[31m=[32m"_summaryItem_9ac9be"[31m
        [36m>[31m
          [36m<span[31m
            [33mclass[31m=[32m"_summaryLabel_9ac9be"[31m
          [36m>[31m
            [0mTotal Expenses[0m
          [36m</span>[31m
          [36m<span[31m
            [33mclass[31m=[32m"_summaryValue_9ac9be _expenses_9ac9be"[31m
          [36m>[31m
            [0m$23,800[0m
          [36m</span>[31m
        [36m</div>[31m
        [36m<div[31m
          [33mclass[31m=[32m"_summaryItem_9ac9be"[31m
        [36m>[31m
          [36m<span[31m
            [33mclass[31m=[32m"_summaryLabel_9ac9be"[31m
          [36m>[31m
            [0mNet [0m
            [0mProfit[0m
          [36m</span>[31m
          [36m<span[31m
            [33mclass[31m=[32m"_summaryValue_9ac9be _profit_9ac9be"[31m
          [36m>[31m
            [0m$16,700[0m
          [36m</span>[31m
        [36m</div>[31m
      [36m</div>[31m
      [36m<div[31m
        [33maria-label[31m=[32m"Revenue and expenses comparison chart"[31m
        [33mclass[31m=[32m"_chartSection_9ac9be"[31m
      [36m>[31m
        [36m<div[31m
          [33mclass[31m=[32m"recharts-responsive-container"[31m
          [33mstyle[31m=[32m"width: 100%; height: 300px; min-width: 0;"[31m
        [36m>[31m
          [36m<div[31m
            [33mstyle[31m=[32m"width: 0px; overflow-x: visible;"[31m
          [36m/>[31m
        [36m</div>[31m
      [36m</div>[31m
      [36m<div[31m
        [33mclass[31m=[32m"_insightSection_9ac9be"[31m
      [36m>[31m
        [36m<p[31m
          [33mclass[31m=[32m"_insight_9ac9be"[31m
        [36m>[31m
          [0mGreat job! Your revenue exceeded expenses by [0m
          [0m$16,700[0m
          [0m over this period.[0m
        [36m</p>[31m
      [36m</div>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
[90m [2mâ¯[22m Object.getElementError node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/config.js:[2m37:19[22m[39m
[90m [2mâ¯[22m getElementError node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:[2m20:35[22m[39m
[90m [2mâ¯[22m getMultipleElementsFoundError node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:[2m23:10[22m[39m
[90m [2mâ¯[22m node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:[2m55:13[22m[39m
[90m [2mâ¯[22m node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:[2m95:19[22m[39m
[36m [2mâ¯[22m src/components/dashboard/RevenueExpensesChart.test.tsx:[2m231:21[22m[39m
    [90m229| [39m      [90m// Total expenses: 3000 + 3500 + 4000 + 3800 + 4500 + 5000 = 238[39mâ€¦
    [90m230| [39m      [90m// Net: 16700[39m
    [90m231| [39m      [34mexpect[39m(screen[33m.[39m[34mgetByText[39m([36m/\$16,700/[39m))[33m.[39m[34mtoBeInTheDocument[39m()[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m232| [39m    })[33m;[39m
    [90m233| [39m  })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[14/40]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mresponsive behavior[2m > [22mshould maintain aspect ratio
[31m[1mError[22m: [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
[39m
[36m [2mâ¯[22m src/components/dashboard/RevenueExpensesChart.test.tsx:[2m247:23[22m[39m
    [90m245| [39m
    [90m246| [39m      [35mconst[39m wrapper [33m=[39m container[33m.[39m[34mquerySelector[39m([32m'.recharts-wrapper'[39m)[33m;[39m
    [90m247| [39m      [34mexpect[39m(wrapper)[33m.[39m[34mtoBeInTheDocument[39m()[33m;[39m
    [90m   | [39m                      [31m^[39m
    [90m248| [39m    })[33m;[39m
    [90m249| [39m  })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[15/40]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22maccessibility[2m > [22mshould hide decorative elements from screen readers
[31m[1mAssertionError[22m: expected 0 to be greater than 0[39m
[36m [2mâ¯[22m src/components/dashboard/RevenueExpensesChart.test.tsx:[2m278:33[22m[39m
    [90m276| [39m
    [90m277| [39m      [35mconst[39m decorative [33m=[39m container[33m.[39m[34mquerySelectorAll[39m([32m'[aria-hidden="tru[39mâ€¦
    [90m278| [39m      [34mexpect[39m(decorative[33m.[39mlength)[33m.[39m[34mtoBeGreaterThan[39m([34m0[39m)[33m;[39m
    [90m   | [39m                                [31m^[39m
    [90m279| [39m    })[33m;[39m
    [90m280| [39m  })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[16/40]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mcolor coding[2m > [22mshould use distinct colors for revenue and expenses
[31m[1mAssertionError[22m: expected 0 to be greater than 0[39m
[36m [2mâ¯[22m src/components/dashboard/RevenueExpensesChart.test.tsx:[2m288:27[22m[39m
    [90m286| [39m      [90m// Revenue should be green, expenses should be red/orange[39m
    [90m287| [39m      [35mconst[39m bars [33m=[39m container[33m.[39m[34mquerySelectorAll[39m([32m'.recharts-bar-rectangle[39mâ€¦
    [90m288| [39m      [34mexpect[39m(bars[33m.[39mlength)[33m.[39m[34mtoBeGreaterThan[39m([34m0[39m)[33m;[39m
    [90m   | [39m                          [31m^[39m
    [90m289| [39m    })[33m;[39m
    [90m290| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[17/40]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22mcolor coding[2m > [22mshould maintain color consistency in legend
[31m[1mError[22m: [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
[39m
[36m [2mâ¯[22m src/components/dashboard/RevenueExpensesChart.test.tsx:[2m295:22[22m[39m
    [90m293| [39m
    [90m294| [39m      [35mconst[39m legend [33m=[39m container[33m.[39m[34mquerySelector[39m([32m'.recharts-legend-wrapper[39mâ€¦
    [90m295| [39m      [34mexpect[39m(legend)[33m.[39m[34mtoBeInTheDocument[39m()[33m;[39m
    [90m   | [39m                     [31m^[39m
    [90m296| [39m    })[33m;[39m
    [90m297| [39m  })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[18/40]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22medge cases[2m > [22mshould handle very long time periods
[31m[1mError[22m: [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
[39m
[36m [2mâ¯[22m src/components/dashboard/RevenueExpensesChart.test.tsx:[2m321:21[22m[39m
    [90m319| [39m
    [90m320| [39m      [35mconst[39m chart [33m=[39m container[33m.[39m[34mquerySelector[39m([32m'.recharts-wrapper'[39m)[33m;[39m
    [90m321| [39m      [34mexpect[39m(chart)[33m.[39m[34mtoBeInTheDocument[39m()[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m322| [39m    })[33m;[39m
    [90m323| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[19/40]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22medge cases[2m > [22mshould handle negative values gracefully
[31m[1mError[22m: [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
[39m
[36m [2mâ¯[22m src/components/dashboard/RevenueExpensesChart.test.tsx:[2m332:21[22m[39m
    [90m330| [39m
    [90m331| [39m      [35mconst[39m chart [33m=[39m container[33m.[39m[34mquerySelector[39m([32m'.recharts-wrapper'[39m)[33m;[39m
    [90m332| [39m      [34mexpect[39m(chart)[33m.[39m[34mtoBeInTheDocument[39m()[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m333| [39m    })[33m;[39m
    [90m334| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[20/40]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/components/dashboard/RevenueExpensesChart.test.tsx[2m > [22mRevenueExpensesChart[2m > [22medge cases[2m > [22mshould handle mixed date formats
[31m[1mError[22m: [2mexpect([22m[31mreceived[31m[2m).toBeInTheDocument()[22m

[31mreceived[31m value must be an HTMLElement or an SVGElement.
[39m
[36m [2mâ¯[22m src/components/dashboard/RevenueExpensesChart.test.tsx:[2m344:21[22m[39m
    [90m342| [39m
    [90m343| [39m      [35mconst[39m chart [33m=[39m container[33m.[39m[34mquerySelector[39m([32m'.recharts-wrapper'[39m)[33m;[39m
    [90m344| [39m      [34mexpect[39m(chart)[33m.[39m[34mtoBeInTheDocument[39m()[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m345| [39m    })[33m;[39m
    [90m346| [39m  })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[21/40]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/ocr/billOcr.service.test.ts[2m > [22mBillOCRService[2m > [22mextractInvoiceNumber[2m > [22mshould handle invoice numbers with dashes
[31m[1mAssertionError[22m: expected 'Number' to contain '2024'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 2024[39m
[31m+ Number[39m

[36m [2mâ¯[22m src/services/ocr/billOcr.service.test.ts:[2m80:28[22m[39m
    [90m 78| [39m      [35mconst[39m text [33m=[39m [32m'Invoice Number: 2024-Q1-0001'[39m[33m;[39m
    [90m 79| [39m      [35mconst[39m result [33m=[39m service[33m.[39m[34mextractInvoiceNumber[39m(text)[33m;[39m
    [90m 80| [39m      [34mexpect[39m(result[33m.[39mvalue)[33m.[39m[34mtoContain[39m([32m'2024'[39m)[33m;[39m
    [90m   | [39m                           [31m^[39m
    [90m 81| [39m    })[33m;[39m
    [90m 82| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[22/40]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/ocr/billOcr.service.test.ts[2m > [22mBillOCRService[2m > [22mextractTotalAmount[2m > [22mshould extract amount with "Total Due:" pattern
[31m[1mAssertionError[22m: expected 1.23 to be 1234.56 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 1234.56[39m
[31m+ 1.23[39m

[36m [2mâ¯[22m src/services/ocr/billOcr.service.test.ts:[2m154:28[22m[39m
    [90m152| [39m      [35mconst[39m text [33m=[39m [32m'Total Due: $1,234.56'[39m[33m;[39m
    [90m153| [39m      [35mconst[39m result [33m=[39m service[33m.[39m[34mextractTotalAmount[39m(text)[33m;[39m
    [90m154| [39m      [34mexpect[39m(result[33m.[39mvalue)[33m.[39m[34mtoBe[39m([34m1234.56[39m)[33m;[39m
    [90m   | [39m                           [31m^[39m
    [90m155| [39m      [34mexpect[39m(result[33m.[39mconfidence)[33m.[39m[34mtoBeGreaterThanOrEqual[39m([34m90[39m)[33m;[39m
    [90m156| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[23/40]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/ocr/billOcr.service.test.ts[2m > [22mBillOCRService[2m > [22mextractTotalAmount[2m > [22mshould extract amount with "Total:" pattern
[31m[1mAssertionError[22m: expected 2.5 to be 2500 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 2500[39m
[31m+ 2.5[39m

[36m [2mâ¯[22m src/services/ocr/billOcr.service.test.ts:[2m173:28[22m[39m
    [90m171| [39m      [35mconst[39m text [33m=[39m [32m'Total: $2,500.00'[39m[33m;[39m
    [90m172| [39m      [35mconst[39m result [33m=[39m service[33m.[39m[34mextractTotalAmount[39m(text)[33m;[39m
    [90m173| [39m      [34mexpect[39m(result[33m.[39mvalue)[33m.[39m[34mtoBe[39m([34m2500.0[39m)[33m;[39m
    [90m   | [39m                           [31m^[39m
    [90m174| [39m    })[33m;[39m
    [90m175| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[24/40]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/ocr/billOcr.service.test.ts[2m > [22mBillOCRService[2m > [22mextractPaymentTerms[2m > [22mshould return null when no terms found
[31m[1mAssertionError[22m: expected 'specified' to be null[39m
[36m [2mâ¯[22m src/services/ocr/billOcr.service.test.ts:[2m259:28[22m[39m
    [90m257| [39m      [35mconst[39m text [33m=[39m [32m'No payment terms specified'[39m[33m;[39m
    [90m258| [39m      [35mconst[39m result [33m=[39m service[33m.[39m[34mextractPaymentTerms[39m(text)[33m;[39m
    [90m259| [39m      [34mexpect[39m(result[33m.[39mvalue)[33m.[39m[34mtoBeNull[39m()[33m;[39m
    [90m   | [39m                           [31m^[39m
    [90m260| [39m    })[33m;[39m
    [90m261| [39m  })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[25/40]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/ocr/billOcr.service.test.ts[2m > [22mBillOCRService[2m > [22mgetConfidence[2m > [22mshould return medium confidence for partial data
[31m[1mAssertionError[22m: expected 'low' to be 'medium' // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- medium[39m
[31m+ low[39m

[36m [2mâ¯[22m src/services/ocr/billOcr.service.test.ts:[2m318:28[22m[39m
    [90m316| [39m      [34mexpect[39m(result[33m.[39moverall)[33m.[39m[34mtoBeGreaterThan[39m([34m40[39m)[33m;[39m
    [90m317| [39m      [34mexpect[39m(result[33m.[39moverall)[33m.[39m[34mtoBeLessThan[39m([34m80[39m)[33m;[39m
    [90m318| [39m      [34mexpect[39m(result[33m.[39mlevel)[33m.[39m[34mtoBe[39m([32m'medium'[39m)[33m;[39m
    [90m   | [39m                           [31m^[39m
    [90m319| [39m    })[33m;[39m
    [90m320| [39m  })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[26/40]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/ocr/billOcr.service.test.ts[2m > [22mBillOCRService[2m > [22massessImageQuality[2m > [22mshould assess image quality in test environment
[31m[1m[7m FAIL [27m[22m[39m src/services/ocr/billOcr.service.test.ts[2m > [22mBillOCRService[2m > [22massessImageQuality[2m > [22mshould return acceptable quality in test environment
[31m[1m[7m FAIL [27m[22m[39m src/services/ocr/billOcr.service.test.ts[2m > [22mBillOCRService[2m > [22mpreprocessImage[2m > [22mshould preprocess image in test environment
[31m[1m[7m FAIL [27m[22m[39m src/services/ocr/billOcr.service.test.ts[2m > [22mBillOCRService[2m > [22mpreprocessImage[2m > [22mshould return unmodified data in test environment
[31m[1m[7m FAIL [27m[22m[39m src/services/ocr/billOcr.integration.test.ts[2m > [22mBillOCRService Integration Tests[2m > [22mFull OCR workflow[2m > [22mshould process bill image end-to-end
[31m[1m[7m FAIL [27m[22m[39m src/services/ocr/billOcr.integration.test.ts[2m > [22mBillOCRService Integration Tests[2m > [22mFull OCR workflow[2m > [22mshould extract vendor information correctly
[31m[1m[7m FAIL [27m[22m[39m src/services/ocr/billOcr.integration.test.ts[2m > [22mBillOCRService Integration Tests[2m > [22mFull OCR workflow[2m > [22mshould extract invoice details correctly
[31m[1m[7m FAIL [27m[22m[39m src/services/ocr/billOcr.integration.test.ts[2m > [22mBillOCRService Integration Tests[2m > [22mFull OCR workflow[2m > [22mshould extract total amount correctly
[31m[1m[7m FAIL [27m[22m[39m src/services/ocr/billOcr.integration.test.ts[2m > [22mBillOCRService Integration Tests[2m > [22mFull OCR workflow[2m > [22mshould extract payment terms correctly
[31m[1m[7m FAIL [27m[22m[39m src/services/ocr/billOcr.integration.test.ts[2m > [22mBillOCRService Integration Tests[2m > [22mFull OCR workflow[2m > [22mshould extract line items when requested
[31m[1m[7m FAIL [27m[22m[39m src/services/ocr/billOcr.integration.test.ts[2m > [22mBillOCRService Integration Tests[2m > [22mConfidence scoring[2m > [22mshould assign high confidence to complete bills
[31m[1m[7m FAIL [27m[22m[39m src/services/ocr/billOcr.integration.test.ts[2m > [22mBillOCRService Integration Tests[2m > [22mConfidence scoring[2m > [22mshould flag low confidence for manual review
[31m[1m[7m FAIL [27m[22m[39m src/services/ocr/billOcr.integration.test.ts[2m > [22mBillOCRService Integration Tests[2m > [22mError handling[2m > [22mshould handle invalid image data gracefully
[31m[1m[7m FAIL [27m[22m[39m src/services/ocr/billOcr.integration.test.ts[2m > [22mBillOCRService Integration Tests[2m > [22mPerformance[2m > [22mshould process bill within reasonable time
[31m[1mError[22m: Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[27/40]âŽ¯[22m[39m

[2m Test Files [22m [1m[31m3 failed[39m[22m[90m (3)[39m
[2m      Tests [22m [1m[31m40 failed[39m[22m[2m | [22m[1m[32m71 passed[39m[22m[90m (111)[39m
[2m   Start at [22m 22:17:29
[2m   Duration [22m 280.59s


[1m[7m[31m FAIL [39m[27m[22m[31m Tests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
[3Jc
[7m[1m[34m RERUN [39m[22m[27m[2m src/services/auditLogExtended.test.ts[22m [34mx1[39m


[2m Test Files [22m [2mno tests[22m
[2m      Tests [22m [2mno tests[22m
[2m   Start at [22m 22:52:18
[2m   Duration [22m 0ms


[1m[7m[32m PASS [39m[27m[22m[32m Waiting for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
       [34mrerun x1[39m
[2K[1A[2K[G       [90mrerun x1[39m
[2K[1A[2K[G       [2m[90mrerun x1[39m[22m
[2K[1A[2K[G[3Jc
[7m[1m[34m RERUN [39m[22m[27m[2m src/services/auditLogExtended.test.ts[22m [34mx2[39m


[2m Test Files [22m [2mno tests[22m
[2m      Tests [22m [2mno tests[22m
[2m   Start at [22m 23:06:07
[2m   Duration [22m 0ms


[1m[7m[32m PASS [39m[27m[22m[32m Waiting for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
       [34mrerun x2[39m
[2K[1A[2K[G       [90mrerun x2[39m
[2K[1A[2K[G       [2m[90mrerun x2[39m[22m
[2K[1A[2K[G[3Jc
[7m[1m[34m RERUN [39m[22m[27m[2m src/services/auditLogExtended.test.ts[22m [34mx3[39m


[2m Test Files [22m [2mno tests[22m
[2m      Tests [22m [2mno tests[22m
[2m   Start at [22m 23:07:46
[2m   Duration [22m 0ms


[1m[7m[32m PASS [39m[27m[22m[32m Waiting for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
       [34mrerun x3[39m
[2K[1A[2K[G       [90mrerun x3[39m
[2K[1A[2K[G       [2m[90mrerun x3[39m[22m
[2K[1A[2K[G[3Jc
[7m[1m[34m RERUN [39m[22m[27m[2m relay/src/__tests__/relay.test.ts[22m [34mx1[39m

 [33mâ¯[39m relay/src/__tests__/relay.test.ts [2m ([22m[2m16 tests[22m [2m|[22m [31m3 failed[39m[2m)[22m[33m 7280[2mms[22m[39m
[31m   [33mâ¯[31m relay/src/__tests__/relay.test.ts[2m > [22mSync Relay - Zero Knowledge Architecture[2m > [22mshould never decrypt encrypted payloads[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[31m   [33mâ¯[31m relay/src/__tests__/relay.test.ts[2m > [22mSync Relay - SLA Tracking[2m > [22mshould calculate SLA metrics correctly[39m
[31m     â†’ env is not defined[39m
[31m   [33mâ¯[31m relay/src/__tests__/relay.test.ts[2m > [22mSync Relay - Protocol Validation[2m > [22mshould validate protocol version[39m
[31m     â†’ Cannot find module '../types'
Require stack:
- C:\Users\Admin\graceful_books\relay\src\__tests__\relay.test.ts[39m

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1m[7m Failed Tests 3 [27m[22mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[31m[1m[7m FAIL [27m[22m[39m relay/src/__tests__/relay.test.ts[2m > [22mSync Relay - Zero Knowledge Architecture[2m > [22mshould never decrypt encrypted payloads
[31m[1mError[22m: Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/3]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m relay/src/__tests__/relay.test.ts[2m > [22mSync Relay - SLA Tracking[2m > [22mshould calculate SLA metrics correctly
[31m[1mReferenceError[22m: env is not defined[39m
[36m [2mâ¯[22m relay/src/__tests__/relay.test.ts:[2m273:5[22m[39m
    [90m271| [39m
    [90m272| [39m  [34mit[39m([32m'should calculate SLA metrics correctly'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m273| [39m    env [33m=[39m [34mcreateMockEnv[39m()[33m;[39m
    [90m   | [39m    [31m^[39m
    [90m274| [39m
    [90m275| [39m    [90m// Mock SLA data[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[2/3]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m relay/src/__tests__/relay.test.ts[2m > [22mSync Relay - Protocol Validation[2m > [22mshould validate protocol version
[31m[1mError[22m: Cannot find module '../types'
Require stack:
- C:\Users\Admin\graceful_books\relay\src\__tests__\relay.test.ts[39m
[90m [2mâ¯[22m TracingChannel.traceSync node:diagnostics_channel:[2m328:14[22m[39m
[36m [2mâ¯[22m relay/src/__tests__/relay.test.ts:[2m332:39[22m[39m
    [90m330| [39m[34mdescribe[39m([32m'Sync Relay - Protocol Validation'[39m[33m,[39m () [33m=>[39m {
    [90m331| [39m  [34mit[39m([32m'should validate protocol version'[39m[33m,[39m () [33m=>[39m {
    [90m332| [39m    [35mconst[39m { [33mSYNC_PROTOCOL_VERSION[39m } [33m=[39m [34mrequire[39m([32m'../types'[39m)[33m;[39m
    [90m   | [39m                                      [31m^[39m
    [90m333| [39m    [34mexpect[39m([33mSYNC_PROTOCOL_VERSION[39m)[33m.[39m[34mtoBe[39m([32m'1.0.0'[39m)[33m;[39m
    [90m334| [39m  })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[22m[39m
[31m[1mSerialized Error:[22m[39m [90m{ code: 'MODULE_NOT_FOUND', requireStack: [ 'C:\Users\Admin\graceful_books\relay\src\__tests__\relay.test.ts' ] }[39m
[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[3/3]âŽ¯[22m[39m

[2m Test Files [22m [1m[31m1 failed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[31m3 failed[39m[22m[2m | [22m[1m[32m13 passed[39m[22m[90m (16)[39m
[2m   Start at [22m 02:06:16
[2m   Duration [22m 67.14s


[1m[7m[31m FAIL [39m[27m[22m[31m Tests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
       [34mrerun x1[39m
[2K[1A[2K[G       [90mrerun x1[39m
[2K[1A[2K[G       [2m[90mrerun x1[39m[22m
[2K[1A[2K[G[3Jc
[7m[1m[34m RERUN [39m[22m[27m[2m src/api/__tests__/relayClient.test.ts[22m [34mx1[39m

[90mstdout[2m | src/api/__tests__/relayClient.test.ts[2m > [22m[2mRelayClient - Failover[2m > [22m[2mshould failover to next region on error[22m[39m
Failing over to: https://sync-eu.gracefulbooks.com

[90mstderr[2m | src/api/__tests__/relayClient.test.ts[2m > [22m[2mRelayClient - Failover[2m > [22m[2mshould failover to next region on error[22m[39m
Request failed (attempt 1): Error: Network error
    at [90mC:\Users\Admin\graceful_books\[39msrc\api\__tests__\relayClient.test.ts:61:15
    at mockCall [90m(file:///C:/Users/Admin/graceful_books/[39mnode_modules/[4m@vitest/spy[24m/dist/index.js:50:17[90m)[39m
    at spy [90m(file:///C:/Users/Admin/graceful_books/[39mnode_modules/[4mtinyspy[24m/dist/index.js:42:80[90m)[39m
    at RelayClient.request [90m(C:\Users\Admin\graceful_books\[39msrc\api\relayClient.ts:213:32[90m)[39m
    at RelayClient.push [90m(C:\Users\Admin\graceful_books\[39msrc\api\relayClient.ts:259:17[90m)[39m
    at [90mC:\Users\Admin\graceful_books\[39msrc\api\__tests__\relayClient.test.ts:89:35
    at [90mfile:///C:/Users/Admin/graceful_books/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:135:14
    at [90mfile:///C:/Users/Admin/graceful_books/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:60:26
    at runTest [90m(file:///C:/Users/Admin/graceful_books/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:781:17[90m)[39m
    at runSuite [90m(file:///C:/Users/Admin/graceful_books/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:909:15[90m)[39m

[90mstdout[2m | src/api/__tests__/relayClient.test.ts[2m > [22m[2mRelayClient - Failover[2m > [22m[2mshould respect retry attempts limit[22m[39m
Failing over to: https://sync-eu.gracefulbooks.com

[90mstderr[2m | src/api/__tests__/relayClient.test.ts[2m > [22m[2mRelayClient - Failover[2m > [22m[2mshould respect retry attempts limit[22m[39m
Request failed (attempt 1): Error: Network error
    at [90mC:\Users\Admin\graceful_books\[39msrc\api\__tests__\relayClient.test.ts:96:45
    at [90mfile:///C:/Users/Admin/graceful_books/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:135:14
    at [90mfile:///C:/Users/Admin/graceful_books/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:60:26
    at runTest [90m(file:///C:/Users/Admin/graceful_books/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:781:17[90m)[39m
    at runSuite [90m(file:///C:/Users/Admin/graceful_books/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:909:15[90m)[39m
    at runSuite [90m(file:///C:/Users/Admin/graceful_books/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:909:15[90m)[39m
    at runFiles [90m(file:///C:/Users/Admin/graceful_books/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:958:5[90m)[39m
    at startTests [90m(file:///C:/Users/Admin/graceful_books/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:967:3[90m)[39m
    at [90mfile:///C:/Users/Admin/graceful_books/[39mnode_modules/[4mvitest[24m/dist/chunks/runtime-runBaseTests.oAvMKtQC.js:116:7
    at withEnv [90m(file:///C:/Users/Admin/graceful_books/[39mnode_modules/[4mvitest[24m/dist/chunks/runtime-runBaseTests.oAvMKtQC.js:83:5[90m)[39m
Request failed (attempt 2): Error: Network error
    at [90mC:\Users\Admin\graceful_books\[39msrc\api\__tests__\relayClient.test.ts:96:45
    at [90mfile:///C:/Users/Admin/graceful_books/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:135:14
    at [90mfile:///C:/Users/Admin/graceful_books/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:60:26
    at runTest [90m(file:///C:/Users/Admin/graceful_books/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:781:17[90m)[39m
    at runSuite [90m(file:///C:/Users/Admin/graceful_books/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:909:15[90m)[39m
    at runSuite [90m(file:///C:/Users/Admin/graceful_books/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:909:15[90m)[39m
    at runFiles [90m(file:///C:/Users/Admin/graceful_books/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:958:5[90m)[39m
    at startTests [90m(file:///C:/Users/Admin/graceful_books/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:967:3[90m)[39m
    at [90mfile:///C:/Users/Admin/graceful_books/[39mnode_modules/[4mvitest[24m/dist/chunks/runtime-runBaseTests.oAvMKtQC.js:116:7
    at withEnv [90m(file:///C:/Users/Admin/graceful_books/[39mnode_modules/[4mvitest[24m/dist/chunks/runtime-runBaseTests.oAvMKtQC.js:83:5[90m)[39m

[90mstdout[2m | src/api/__tests__/relayClient.test.ts[2m > [22m[2mRelayClient - Timeout Handling[2m > [22m[2mshould timeout long requests[22m[39m
WebSocket disconnected
WebSocket disconnected

[90mstderr[2m | src/api/__tests__/relayClient.test.ts[2m > [22m[2mRelayClient - Timeout Handling[2m > [22m[2mshould timeout long requests[22m[39m
WebSocket error: Event { isTrusted: [36m[Getter][39m }
WebSocket error: Event { isTrusted: [36m[Getter][39m }

 [33mâ¯[39m src/api/__tests__/relayClient.test.ts [2m ([22m[2m10 tests[22m [2m|[22m [31m1 failed[39m[2m)[22m[33m 6030[2mms[22m[39m
[31m   [33mâ¯[31m src/api/__tests__/relayClient.test.ts[2m > [22mRelayClient - Timeout Handling[2m > [22mshould timeout long requests[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1m[7m Failed Tests 1 [27m[22mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/__tests__/relayClient.test.ts[2m > [22mRelayClient - Timeout Handling[2m > [22mshould timeout long requests
[31m[1mError[22m: Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/1]âŽ¯[22m[39m

[2m Test Files [22m [1m[31m1 failed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[31m1 failed[39m[22m[2m | [22m[1m[32m9 passed[39m[22m[90m (10)[39m
[2m   Start at [22m 02:20:58
[2m   Duration [22m 50.43s


[1m[7m[31m FAIL [39m[27m[22m[31m Tests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
       [34mrerun x1[39m
[2K[1A[2K[G       [90mrerun x1[39m
[2K[1A[2K[G       [2m[90mrerun x1[39m[22m
[2K[1A[2K[G[3Jc
[7m[1m[34m RERUN [39m[22m[27m[2m src/services/interestSplit/__tests__/loanPaymentDetection.test.ts[22m [34mx1[39m

 [33mâ¯[39m src/services/interestSplit/__tests__/loanPaymentDetection.test.ts [2m ([22m[2m9 tests[22m [2m|[22m [31m2 failed[39m[2m)[22m[33m 623[2mms[22m[39m
[31m   [33mâ¯[31m src/services/interestSplit/__tests__/loanPaymentDetection.test.ts[2m > [22mLoanPaymentDetectionService[2m > [22mdetectLoanPayment[2m > [22mshould detect a simple loan payment[39m
[31m     â†’ expected false to be true // Object.is equality[39m
[31m   [33mâ¯[31m src/services/interestSplit/__tests__/loanPaymentDetection.test.ts[2m > [22mLoanPaymentDetectionService[2m > [22mdetectLoanPayment[2m > [22mshould return higher confidence for loan keywords in account name[39m
[31m     â†’ expected 0 to be greater than 30[39m

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1m[7m Failed Tests 2 [27m[22mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/interestSplit/__tests__/loanPaymentDetection.test.ts[2m > [22mLoanPaymentDetectionService[2m > [22mdetectLoanPayment[2m > [22mshould detect a simple loan payment
[31m[1mAssertionError[22m: expected false to be true // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- true[39m
[31m+ false[39m

[36m [2mâ¯[22m src/services/interestSplit/__tests__/loanPaymentDetection.test.ts:[2m103:41[22m[39m
    [90m101| [39m      [35mconst[39m result [33m=[39m [35mawait[39m service[33m.[39m[34mdetectLoanPayment[39m(transaction[33m,[39m lineâ€¦
    [90m102| [39m
    [90m103| [39m      [34mexpect[39m(result[33m.[39misLiabilityPayment)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
    [90m   | [39m                                        [31m^[39m
    [90m104| [39m      [34mexpect[39m(result[33m.[39mconfidence)[33m.[39m[34mtoBeGreaterThan[39m([34m50[39m)[33m;[39m
    [90m105| [39m      [34mexpect[39m(result[33m.[39mliabilityAccountId)[33m.[39m[34mtoBe[39m([32m'account-loan'[39m)[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/2]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/interestSplit/__tests__/loanPaymentDetection.test.ts[2m > [22mLoanPaymentDetectionService[2m > [22mdetectLoanPayment[2m > [22mshould return higher confidence for loan keywords in account name
[31m[1mAssertionError[22m: expected 0 to be greater than 30[39m
[36m [2mâ¯[22m src/services/interestSplit/__tests__/loanPaymentDetection.test.ts:[2m203:33[22m[39m
    [90m201| [39m      [35mconst[39m result [33m=[39m [35mawait[39m service[33m.[39m[34mdetectLoanPayment[39m(transaction[33m,[39m lineâ€¦
    [90m202| [39m
    [90m203| [39m      [34mexpect[39m(result[33m.[39mconfidence)[33m.[39m[34mtoBeGreaterThan[39m([34m30[39m)[33m;[39m [90m// Base confidence[39m
    [90m   | [39m                                [31m^[39m
    [90m204| [39m    })[33m;[39m
    [90m205| [39m  })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[2/2]âŽ¯[22m[39m

[2m Test Files [22m [1m[31m1 failed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[31m2 failed[39m[22m[2m | [22m[1m[32m7 passed[39m[22m[90m (9)[39m
[2m   Start at [22m 03:10:44
[2m   Duration [22m 111.82s


[1m[7m[31m FAIL [39m[27m[22m[31m Tests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
       [34mrerun x1[39m
[2K[1A[2K[G       [90mrerun x1[39m
[2K[1A[2K[G       [2m[90mrerun x1[39m[22m
[2K[1A[2K[G[3Jc
[7m[1m[34m RERUN [39m[22m[27m[2m src/services/interestSplit/__tests__/amortization.test.ts[22m [34mx1[39m

 [33mâ¯[39m src/services/interestSplit/__tests__/amortization.test.ts [2m ([22m[2m15 tests[22m [2m|[22m [31m8 failed[39m[2m)[22m[33m 335[2mms[22m[39m
[31m   [33mâ¯[31m src/services/interestSplit/__tests__/amortization.test.ts[2m > [22mAmortizationService[2m > [22mcalculateAmortizationSchedule[2m > [22mshould calculate correct monthly payment for standard loan[39m
[31m     â†’ CompoundingFrequency is not defined[39m
[31m   [33mâ¯[31m src/services/interestSplit/__tests__/amortization.test.ts[2m > [22mAmortizationService[2m > [22mcalculateAmortizationSchedule[2m > [22mshould handle zero interest rate loans[39m
[31m     â†’ CompoundingFrequency is not defined[39m
[31m   [33mâ¯[31m src/services/interestSplit/__tests__/amortization.test.ts[2m > [22mAmortizationService[2m > [22mcalculateAmortizationSchedule[2m > [22mshould calculate correct totals[39m
[31m     â†’ CompoundingFrequency is not defined[39m
[31m   [33mâ¯[31m src/services/interestSplit/__tests__/amortization.test.ts[2m > [22mAmortizationService[2m > [22mcalculateAmortizationSchedule[2m > [22mshould handle quarterly compounding[39m
[31m     â†’ CompoundingFrequency is not defined[39m
[31m   [33mâ¯[31m src/services/interestSplit/__tests__/amortization.test.ts[2m > [22mAmortizationService[2m > [22mcalculateSinglePayment[2m > [22mshould correctly split payment into principal and interest[39m
[31m     â†’ CompoundingFrequency is not defined[39m
[31m   [33mâ¯[31m src/services/interestSplit/__tests__/amortization.test.ts[2m > [22mAmortizationService[2m > [22mcalculateSinglePayment[2m > [22mshould handle zero balance[39m
[31m     â†’ CompoundingFrequency is not defined[39m
[31m   [33mâ¯[31m src/services/interestSplit/__tests__/amortization.test.ts[2m > [22mAmortizationService[2m > [22medge cases[2m > [22mshould handle very small loans[39m
[31m     â†’ CompoundingFrequency is not defined[39m
[31m   [33mâ¯[31m src/services/interestSplit/__tests__/amortization.test.ts[2m > [22mAmortizationService[2m > [22medge cases[2m > [22mshould handle very long terms[39m
[31m     â†’ CompoundingFrequency is not defined[39m

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1m[7m Failed Tests 8 [27m[22mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/interestSplit/__tests__/amortization.test.ts[2m > [22mAmortizationService[2m > [22mcalculateAmortizationSchedule[2m > [22mshould calculate correct monthly payment for standard loan
[31m[1mReferenceError[22m: CompoundingFrequency is not defined[39m
[36m [2mâ¯[22m AmortizationService.calculateMonthlyRate src/services/interestSplit/amortization.service.ts:[2m127:12[22m[39m
    [90m125| [39m  )[33m:[39m [33mDecimal[39m {
    [90m126| [39m    [35mswitch[39m (frequency) {
    [90m127| [39m      [35mcase[39m [33mCompoundingFrequency[39m[33m.[39m[33mMONTHLY[39m[33m:[39m
    [90m   | [39m           [31m^[39m
    [90m128| [39m        [35mreturn[39m annualRate[33m.[39m[34mdividedBy[39m([34m12[39m)[33m;[39m
    [90m129| [39m
[90m [2mâ¯[22m AmortizationService.calculateAmortizationSchedule src/services/interestSplit/amortization.service.ts:[2m36:30[22m[39m
[90m [2mâ¯[22m src/services/interestSplit/__tests__/amortization.test.ts:[2m29:30[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/8]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/interestSplit/__tests__/amortization.test.ts[2m > [22mAmortizationService[2m > [22mcalculateAmortizationSchedule[2m > [22mshould handle zero interest rate loans
[31m[1mReferenceError[22m: CompoundingFrequency is not defined[39m
[36m [2mâ¯[22m AmortizationService.calculateMonthlyRate src/services/interestSplit/amortization.service.ts:[2m127:12[22m[39m
    [90m125| [39m  )[33m:[39m [33mDecimal[39m {
    [90m126| [39m    [35mswitch[39m (frequency) {
    [90m127| [39m      [35mcase[39m [33mCompoundingFrequency[39m[33m.[39m[33mMONTHLY[39m[33m:[39m
    [90m   | [39m           [31m^[39m
    [90m128| [39m        [35mreturn[39m annualRate[33m.[39m[34mdividedBy[39m([34m12[39m)[33m;[39m
    [90m129| [39m
[90m [2mâ¯[22m AmortizationService.calculateAmortizationSchedule src/services/interestSplit/amortization.service.ts:[2m36:30[22m[39m
[90m [2mâ¯[22m src/services/interestSplit/__tests__/amortization.test.ts:[2m71:30[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[2/8]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/interestSplit/__tests__/amortization.test.ts[2m > [22mAmortizationService[2m > [22mcalculateAmortizationSchedule[2m > [22mshould calculate correct totals
[31m[1mReferenceError[22m: CompoundingFrequency is not defined[39m
[36m [2mâ¯[22m AmortizationService.calculateMonthlyRate src/services/interestSplit/amortization.service.ts:[2m127:12[22m[39m
    [90m125| [39m  )[33m:[39m [33mDecimal[39m {
    [90m126| [39m    [35mswitch[39m (frequency) {
    [90m127| [39m      [35mcase[39m [33mCompoundingFrequency[39m[33m.[39m[33mMONTHLY[39m[33m:[39m
    [90m   | [39m           [31m^[39m
    [90m128| [39m        [35mreturn[39m annualRate[33m.[39m[34mdividedBy[39m([34m12[39m)[33m;[39m
    [90m129| [39m
[90m [2mâ¯[22m AmortizationService.calculateAmortizationSchedule src/services/interestSplit/amortization.service.ts:[2m36:30[22m[39m
[90m [2mâ¯[22m src/services/interestSplit/__tests__/amortization.test.ts:[2m100:30[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[3/8]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/interestSplit/__tests__/amortization.test.ts[2m > [22mAmortizationService[2m > [22mcalculateAmortizationSchedule[2m > [22mshould handle quarterly compounding
[31m[1mReferenceError[22m: CompoundingFrequency is not defined[39m
[36m [2mâ¯[22m AmortizationService.calculateMonthlyRate src/services/interestSplit/amortization.service.ts:[2m127:12[22m[39m
    [90m125| [39m  )[33m:[39m [33mDecimal[39m {
    [90m126| [39m    [35mswitch[39m (frequency) {
    [90m127| [39m      [35mcase[39m [33mCompoundingFrequency[39m[33m.[39m[33mMONTHLY[39m[33m:[39m
    [90m   | [39m           [31m^[39m
    [90m128| [39m        [35mreturn[39m annualRate[33m.[39m[34mdividedBy[39m([34m12[39m)[33m;[39m
    [90m129| [39m
[90m [2mâ¯[22m AmortizationService.calculateAmortizationSchedule src/services/interestSplit/amortization.service.ts:[2m36:30[22m[39m
[90m [2mâ¯[22m src/services/interestSplit/__tests__/amortization.test.ts:[2m139:30[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[4/8]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/interestSplit/__tests__/amortization.test.ts[2m > [22mAmortizationService[2m > [22mcalculateSinglePayment[2m > [22mshould correctly split payment into principal and interest
[31m[1mReferenceError[22m: CompoundingFrequency is not defined[39m
[36m [2mâ¯[22m AmortizationService.calculateMonthlyRate src/services/interestSplit/amortization.service.ts:[2m127:12[22m[39m
    [90m125| [39m  )[33m:[39m [33mDecimal[39m {
    [90m126| [39m    [35mswitch[39m (frequency) {
    [90m127| [39m      [35mcase[39m [33mCompoundingFrequency[39m[33m.[39m[33mMONTHLY[39m[33m:[39m
    [90m   | [39m           [31m^[39m
    [90m128| [39m        [35mreturn[39m annualRate[33m.[39m[34mdividedBy[39m([34m12[39m)[33m;[39m
    [90m129| [39m
[90m [2mâ¯[22m AmortizationService.calculateSinglePayment src/services/interestSplit/amortization.service.ts:[2m297:30[22m[39m
[90m [2mâ¯[22m src/services/interestSplit/__tests__/amortization.test.ts:[2m264:30[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[5/8]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/interestSplit/__tests__/amortization.test.ts[2m > [22mAmortizationService[2m > [22mcalculateSinglePayment[2m > [22mshould handle zero balance
[31m[1mReferenceError[22m: CompoundingFrequency is not defined[39m
[36m [2mâ¯[22m AmortizationService.calculateMonthlyRate src/services/interestSplit/amortization.service.ts:[2m127:12[22m[39m
    [90m125| [39m  )[33m:[39m [33mDecimal[39m {
    [90m126| [39m    [35mswitch[39m (frequency) {
    [90m127| [39m      [35mcase[39m [33mCompoundingFrequency[39m[33m.[39m[33mMONTHLY[39m[33m:[39m
    [90m   | [39m           [31m^[39m
    [90m128| [39m        [35mreturn[39m annualRate[33m.[39m[34mdividedBy[39m([34m12[39m)[33m;[39m
    [90m129| [39m
[90m [2mâ¯[22m AmortizationService.calculateSinglePayment src/services/interestSplit/amortization.service.ts:[2m297:30[22m[39m
[90m [2mâ¯[22m src/services/interestSplit/__tests__/amortization.test.ts:[2m279:30[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[6/8]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/interestSplit/__tests__/amortization.test.ts[2m > [22mAmortizationService[2m > [22medge cases[2m > [22mshould handle very small loans
[31m[1mReferenceError[22m: CompoundingFrequency is not defined[39m
[36m [2mâ¯[22m AmortizationService.calculateMonthlyRate src/services/interestSplit/amortization.service.ts:[2m127:12[22m[39m
    [90m125| [39m  )[33m:[39m [33mDecimal[39m {
    [90m126| [39m    [35mswitch[39m (frequency) {
    [90m127| [39m      [35mcase[39m [33mCompoundingFrequency[39m[33m.[39m[33mMONTHLY[39m[33m:[39m
    [90m   | [39m           [31m^[39m
    [90m128| [39m        [35mreturn[39m annualRate[33m.[39m[34mdividedBy[39m([34m12[39m)[33m;[39m
    [90m129| [39m
[90m [2mâ¯[22m AmortizationService.calculateAmortizationSchedule src/services/interestSplit/amortization.service.ts:[2m36:30[22m[39m
[90m [2mâ¯[22m src/services/interestSplit/__tests__/amortization.test.ts:[2m302:30[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[7/8]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/interestSplit/__tests__/amortization.test.ts[2m > [22mAmortizationService[2m > [22medge cases[2m > [22mshould handle very long terms
[31m[1mReferenceError[22m: CompoundingFrequency is not defined[39m
[36m [2mâ¯[22m AmortizationService.calculateMonthlyRate src/services/interestSplit/amortization.service.ts:[2m127:12[22m[39m
    [90m125| [39m  )[33m:[39m [33mDecimal[39m {
    [90m126| [39m    [35mswitch[39m (frequency) {
    [90m127| [39m      [35mcase[39m [33mCompoundingFrequency[39m[33m.[39m[33mMONTHLY[39m[33m:[39m
    [90m   | [39m           [31m^[39m
    [90m128| [39m        [35mreturn[39m annualRate[33m.[39m[34mdividedBy[39m([34m12[39m)[33m;[39m
    [90m129| [39m
[90m [2mâ¯[22m AmortizationService.calculateAmortizationSchedule src/services/interestSplit/amortization.service.ts:[2m36:30[22m[39m
[90m [2mâ¯[22m src/services/interestSplit/__tests__/amortization.test.ts:[2m321:30[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[8/8]âŽ¯[22m[39m

[2m Test Files [22m [1m[31m1 failed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[31m8 failed[39m[22m[2m | [22m[1m[32m7 passed[39m[22m[90m (15)[39m
[2m   Start at [22m 03:28:52
[2m   Duration [22m 64.61s


[1m[7m[31m FAIL [39m[27m[22m[31m Tests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
       [34mrerun x1[39m
[2K[1A[2K[G       [90mrerun x1[39m
[2K[1A[2K[G       [2m[90mrerun x1[39m[22m
[2K[1A[2K[G[3Jc
[7m[1m[34m RERUN [39m[22m[27m[2m src/services/interestSplit/__tests__/interestSplitJournal.test.ts[22m [34mx1[39m

 [32mâœ“[39m src/services/interestSplit/__tests__/interestSplitJournal.test.ts [2m ([22m[2m14 tests[22m[2m)[22m[90m 33[2mms[22m[39m

[2m Test Files [22m [1m[32m1 passed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[32m14 passed[39m[22m[90m (14)[39m
[2m   Start at [22m 03:39:17
[2m   Duration [22m 112.13s


[1m[7m[32m PASS [39m[27m[22m[32m Waiting for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
       [34mrerun x1[39m
[2K[1A[2K[G       [90mrerun x1[39m
[2K[1A[2K[G       [2m[90mrerun x1[39m[22m
[2K[1A[2K[G[3Jc
[7m[1m[34m RERUN [39m[22m[27m[2m src/types/database.types.ts[22m

 [32mâœ“[39m src/services/interestSplit/__tests__/interestSplitJournal.test.ts [2m ([22m[2m14 tests[22m[2m)[22m[90m 33[2mms[22m[39m
 [33mâ¯[39m src/services/interestSplit/__tests__/loanPaymentDetection.test.ts [2m ([22m[2m9 tests[22m [2m|[22m [31m2 failed[39m[2m)[22m[33m 339[2mms[22m[39m
[31m   [33mâ¯[31m src/services/interestSplit/__tests__/loanPaymentDetection.test.ts[2m > [22mLoanPaymentDetectionService[2m > [22mdetectLoanPayment[2m > [22mshould detect a simple loan payment[39m
[31m     â†’ expected false to be true // Object.is equality[39m
[31m   [33mâ¯[31m src/services/interestSplit/__tests__/loanPaymentDetection.test.ts[2m > [22mLoanPaymentDetectionService[2m > [22mdetectLoanPayment[2m > [22mshould return higher confidence for loan keywords in account name[39m
[31m     â†’ expected 0 to be greater than 30[39m

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1m[7m Failed Tests 2 [27m[22mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/interestSplit/__tests__/loanPaymentDetection.test.ts[2m > [22mLoanPaymentDetectionService[2m > [22mdetectLoanPayment[2m > [22mshould detect a simple loan payment
[31m[1mAssertionError[22m: expected false to be true // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- true[39m
[31m+ false[39m

[36m [2mâ¯[22m src/services/interestSplit/__tests__/loanPaymentDetection.test.ts:[2m103:41[22m[39m
    [90m101| [39m      [35mconst[39m result [33m=[39m [35mawait[39m service[33m.[39m[34mdetectLoanPayment[39m(transaction[33m,[39m lineâ€¦
    [90m102| [39m
    [90m103| [39m      [34mexpect[39m(result[33m.[39misLiabilityPayment)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
    [90m   | [39m                                        [31m^[39m
    [90m104| [39m      [34mexpect[39m(result[33m.[39mconfidence)[33m.[39m[34mtoBeGreaterThan[39m([34m50[39m)[33m;[39m
    [90m105| [39m      [34mexpect[39m(result[33m.[39mliabilityAccountId)[33m.[39m[34mtoBe[39m([32m'account-loan'[39m)[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/2]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/interestSplit/__tests__/loanPaymentDetection.test.ts[2m > [22mLoanPaymentDetectionService[2m > [22mdetectLoanPayment[2m > [22mshould return higher confidence for loan keywords in account name
[31m[1mAssertionError[22m: expected 0 to be greater than 30[39m
[36m [2mâ¯[22m src/services/interestSplit/__tests__/loanPaymentDetection.test.ts:[2m203:33[22m[39m
    [90m201| [39m      [35mconst[39m result [33m=[39m [35mawait[39m service[33m.[39m[34mdetectLoanPayment[39m(transaction[33m,[39m lineâ€¦
    [90m202| [39m
    [90m203| [39m      [34mexpect[39m(result[33m.[39mconfidence)[33m.[39m[34mtoBeGreaterThan[39m([34m30[39m)[33m;[39m [90m// Base confidence[39m
    [90m   | [39m                                [31m^[39m
    [90m204| [39m    })[33m;[39m
    [90m205| [39m  })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[2/2]âŽ¯[22m[39m

[2m Test Files [22m [1m[31m1 failed[39m[22m[2m | [22m[1m[32m1 passed[39m[22m[90m (2)[39m
[2m      Tests [22m [1m[31m2 failed[39m[22m[2m | [22m[1m[32m21 passed[39m[22m[90m (23)[39m
[2m   Start at [22m 03:47:52
[2m   Duration [22m 240.12s


[1m[7m[31m FAIL [39m[27m[22m[31m Tests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
[3Jc
[7m[1m[34m RERUN [39m[22m[27m[2m src/db/schema/transactions.schema.ts[22m

 [33mâ¯[39m src/services/interestSplit/__tests__/loanPaymentDetection.test.ts [2m ([22m[2m9 tests[22m [2m|[22m [31m2 failed[39m[2m)[22m[33m 567[2mms[22m[39m
[31m   [33mâ¯[31m src/services/interestSplit/__tests__/loanPaymentDetection.test.ts[2m > [22mLoanPaymentDetectionService[2m > [22mdetectLoanPayment[2m > [22mshould detect a simple loan payment[39m
[31m     â†’ expected false to be true // Object.is equality[39m
[31m   [33mâ¯[31m src/services/interestSplit/__tests__/loanPaymentDetection.test.ts[2m > [22mLoanPaymentDetectionService[2m > [22mdetectLoanPayment[2m > [22mshould return higher confidence for loan keywords in account name[39m
[31m     â†’ expected 0 to be greater than 30[39m
 [32mâœ“[39m src/services/interestSplit/__tests__/interestSplitJournal.test.ts [2m ([22m[2m14 tests[22m[2m)[22m[90m 50[2mms[22m[39m

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1m[7m Failed Tests 2 [27m[22mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/interestSplit/__tests__/loanPaymentDetection.test.ts[2m > [22mLoanPaymentDetectionService[2m > [22mdetectLoanPayment[2m > [22mshould detect a simple loan payment
[31m[1mAssertionError[22m: expected false to be true // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- true[39m
[31m+ false[39m

[36m [2mâ¯[22m src/services/interestSplit/__tests__/loanPaymentDetection.test.ts:[2m103:41[22m[39m
    [90m101| [39m      [35mconst[39m result [33m=[39m [35mawait[39m service[33m.[39m[34mdetectLoanPayment[39m(transaction[33m,[39m lineâ€¦
    [90m102| [39m
    [90m103| [39m      [34mexpect[39m(result[33m.[39misLiabilityPayment)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
    [90m   | [39m                                        [31m^[39m
    [90m104| [39m      [34mexpect[39m(result[33m.[39mconfidence)[33m.[39m[34mtoBeGreaterThan[39m([34m50[39m)[33m;[39m
    [90m105| [39m      [34mexpect[39m(result[33m.[39mliabilityAccountId)[33m.[39m[34mtoBe[39m([32m'account-loan'[39m)[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/2]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/interestSplit/__tests__/loanPaymentDetection.test.ts[2m > [22mLoanPaymentDetectionService[2m > [22mdetectLoanPayment[2m > [22mshould return higher confidence for loan keywords in account name
[31m[1mAssertionError[22m: expected 0 to be greater than 30[39m
[36m [2mâ¯[22m src/services/interestSplit/__tests__/loanPaymentDetection.test.ts:[2m203:33[22m[39m
    [90m201| [39m      [35mconst[39m result [33m=[39m [35mawait[39m service[33m.[39m[34mdetectLoanPayment[39m(transaction[33m,[39m lineâ€¦
    [90m202| [39m
    [90m203| [39m      [34mexpect[39m(result[33m.[39mconfidence)[33m.[39m[34mtoBeGreaterThan[39m([34m30[39m)[33m;[39m [90m// Base confidence[39m
    [90m   | [39m                                [31m^[39m
    [90m204| [39m    })[33m;[39m
    [90m205| [39m  })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[2/2]âŽ¯[22m[39m

[2m Test Files [22m [1m[31m1 failed[39m[22m[2m | [22m[1m[32m1 passed[39m[22m[90m (2)[39m
[2m      Tests [22m [1m[31m2 failed[39m[22m[2m | [22m[1m[32m21 passed[39m[22m[90m (23)[39m
[2m   Start at [22m 04:11:10
[2m   Duration [22m 167.78s


[1m[7m[31m FAIL [39m[27m[22m[31m Tests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
[3Jc
[7m[1m[34m RERUN [39m[22m[27m[2m src/db/schema/transactions.schema.ts[22m

 [33mâ¯[39m src/services/interestSplit/__tests__/loanPaymentDetection.test.ts [2m ([22m[2m9 tests[22m [2m|[22m [31m2 failed[39m[2m)[22m[90m 299[2mms[22m[39m
[31m   [33mâ¯[31m src/services/interestSplit/__tests__/loanPaymentDetection.test.ts[2m > [22mLoanPaymentDetectionService[2m > [22mdetectLoanPayment[2m > [22mshould detect a simple loan payment[39m
[31m     â†’ expected false to be true // Object.is equality[39m
[31m   [33mâ¯[31m src/services/interestSplit/__tests__/loanPaymentDetection.test.ts[2m > [22mLoanPaymentDetectionService[2m > [22mdetectLoanPayment[2m > [22mshould return higher confidence for loan keywords in account name[39m
[31m     â†’ expected 0 to be greater than 30[39m
 [32mâœ“[39m src/services/interestSplit/__tests__/interestSplitJournal.test.ts [2m ([22m[2m14 tests[22m[2m)[22m[90m 131[2mms[22m[39m

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1m[7m Failed Tests 2 [27m[22mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/interestSplit/__tests__/loanPaymentDetection.test.ts[2m > [22mLoanPaymentDetectionService[2m > [22mdetectLoanPayment[2m > [22mshould detect a simple loan payment
[31m[1mAssertionError[22m: expected false to be true // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- true[39m
[31m+ false[39m

[36m [2mâ¯[22m src/services/interestSplit/__tests__/loanPaymentDetection.test.ts:[2m103:41[22m[39m
    [90m101| [39m      [35mconst[39m result [33m=[39m [35mawait[39m service[33m.[39m[34mdetectLoanPayment[39m(transaction[33m,[39m lineâ€¦
    [90m102| [39m
    [90m103| [39m      [34mexpect[39m(result[33m.[39misLiabilityPayment)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
    [90m   | [39m                                        [31m^[39m
    [90m104| [39m      [34mexpect[39m(result[33m.[39mconfidence)[33m.[39m[34mtoBeGreaterThan[39m([34m50[39m)[33m;[39m
    [90m105| [39m      [34mexpect[39m(result[33m.[39mliabilityAccountId)[33m.[39m[34mtoBe[39m([32m'account-loan'[39m)[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/2]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/interestSplit/__tests__/loanPaymentDetection.test.ts[2m > [22mLoanPaymentDetectionService[2m > [22mdetectLoanPayment[2m > [22mshould return higher confidence for loan keywords in account name
[31m[1mAssertionError[22m: expected 0 to be greater than 30[39m
[36m [2mâ¯[22m src/services/interestSplit/__tests__/loanPaymentDetection.test.ts:[2m203:33[22m[39m
    [90m201| [39m      [35mconst[39m result [33m=[39m [35mawait[39m service[33m.[39m[34mdetectLoanPayment[39m(transaction[33m,[39m lineâ€¦
    [90m202| [39m
    [90m203| [39m      [34mexpect[39m(result[33m.[39mconfidence)[33m.[39m[34mtoBeGreaterThan[39m([34m30[39m)[33m;[39m [90m// Base confidence[39m
    [90m   | [39m                                [31m^[39m
    [90m204| [39m    })[33m;[39m
    [90m205| [39m  })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[2/2]âŽ¯[22m[39m

[2m Test Files [22m [1m[31m1 failed[39m[22m[2m | [22m[1m[32m1 passed[39m[22m[90m (2)[39m
[2m      Tests [22m [1m[31m2 failed[39m[22m[2m | [22m[1m[32m21 passed[39m[22m[90m (23)[39m
[2m   Start at [22m 04:25:32
[2m   Duration [22m 205.96s


[1m[7m[31m FAIL [39m[27m[22m[31m Tests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
[3Jc
[7m[1m[34m RERUN [39m[22m[27m[2m src/services/__tests__/currency.service.test.ts[22m [34mx1[39m

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mcreateCurrency[2m > [22m[2mshould create a new currency[22m[39m
[Database] TreasureChest database initialized successfully 

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mcreateCurrency[2m > [22m[2mshould create a new currency[22m[39m
<empty line>
[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mcreateCurrency[2m > [22m[2mshould create a new currency[22m[39m
The query {"company_id":"hmW28KtOLviEJme6zdG_G","code":"USD"} on currencies would benefit from a compound index [company_id+code]

[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mcreateCurrency[2m > [22m[2mshould create a new currency[22m[39m
<empty line>
[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mcreateCurrency[2m > [22m[2mshould create a new currency[22m[39m
[CurrencyService] Created currency USD for company hmW28KtOLviEJme6zdG_G 

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mcreateCurrency[2m > [22m[2mshould create a new currency[22m[39m
<empty line>
[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mcreateCurrency[2m > [22m[2mshould create a new currency[22m[39m
[Database] TreasureChest database deleted 

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mcreateCurrency[2m > [22m[2mshould create home currency[22m[39m
[Database] TreasureChest database initialized successfully 

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mcreateCurrency[2m > [22m[2mshould create home currency[22m[39m
<empty line>
[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mcreateCurrency[2m > [22m[2mshould create home currency[22m[39m
The query {"company_id":"DGL_ZOy-Nhfd6zubXJ6-N","code":"USD"} on currencies would benefit from a compound index [company_id+code]
The query {"company_id":"DGL_ZOy-Nhfd6zubXJ6-N","is_home_currency":1} on currencies would benefit from a compound index [company_id+is_home_currency]

[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mcreateCurrency[2m > [22m[2mshould create home currency[22m[39m
<empty line>
[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mcreateCurrency[2m > [22m[2mshould create home currency[22m[39m
[CurrencyService] Created currency USD for company DGL_ZOy-Nhfd6zubXJ6-N 

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mcreateCurrency[2m > [22m[2mshould create home currency[22m[39m
<empty line>
[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mcreateCurrency[2m > [22m[2mshould create home currency[22m[39m
[Database] TreasureChest database deleted 

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mcreateCurrency[2m > [22m[2mshould prevent duplicate currency codes[22m[39m
[Database] TreasureChest database initialized successfully 

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mcreateCurrency[2m > [22m[2mshould prevent duplicate currency codes[22m[39m
<empty line>
[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mcreateCurrency[2m > [22m[2mshould prevent duplicate currency codes[22m[39m
The query {"company_id":"pOzQ_mI4ccKwbQfT8NEC8","code":"USD"} on currencies would benefit from a compound index [company_id+code]

[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mcreateCurrency[2m > [22m[2mshould prevent duplicate currency codes[22m[39m
<empty line>
[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mcreateCurrency[2m > [22m[2mshould prevent duplicate currency codes[22m[39m
[CurrencyService] Created currency USD for company pOzQ_mI4ccKwbQfT8NEC8 

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mcreateCurrency[2m > [22m[2mshould prevent duplicate currency codes[22m[39m
<empty line>
[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mcreateCurrency[2m > [22m[2mshould prevent duplicate currency codes[22m[39m
The query {"company_id":"pOzQ_mI4ccKwbQfT8NEC8","code":"USD"} on currencies would benefit from a compound index [company_id+code]

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mcreateCurrency[2m > [22m[2mshould prevent duplicate currency codes[22m[39m
<empty line>
[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mcreateCurrency[2m > [22m[2mshould prevent duplicate currency codes[22m[39m
[Database] TreasureChest database deleted 

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mcreateCurrency[2m > [22m[2mshould prevent multiple home currencies[22m[39m
[Database] TreasureChest database initialized successfully 

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mcreateCurrency[2m > [22m[2mshould prevent multiple home currencies[22m[39m
<empty line>
[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mcreateCurrency[2m > [22m[2mshould prevent multiple home currencies[22m[39m
The query {"company_id":"IEbFy7erLPjSJA4HBdQZr","code":"USD"} on currencies would benefit from a compound index [company_id+code]
The query {"company_id":"IEbFy7erLPjSJA4HBdQZr","is_home_currency":1} on currencies would benefit from a compound index [company_id+is_home_currency]

[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mcreateCurrency[2m > [22m[2mshould prevent multiple home currencies[22m[39m
<empty line>
[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mcreateCurrency[2m > [22m[2mshould prevent multiple home currencies[22m[39m
[CurrencyService] Created currency USD for company IEbFy7erLPjSJA4HBdQZr 

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mcreateCurrency[2m > [22m[2mshould prevent multiple home currencies[22m[39m
<empty line>
[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mcreateCurrency[2m > [22m[2mshould prevent multiple home currencies[22m[39m
The query {"company_id":"IEbFy7erLPjSJA4HBdQZr","code":"EUR"} on currencies would benefit from a compound index [company_id+code]

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mcreateCurrency[2m > [22m[2mshould prevent multiple home currencies[22m[39m
<empty line>
[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mcreateCurrency[2m > [22m[2mshould prevent multiple home currencies[22m[39m
The query {"company_id":"IEbFy7erLPjSJA4HBdQZr","is_home_currency":1} on currencies would benefit from a compound index [company_id+is_home_currency]

[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mcreateCurrency[2m > [22m[2mshould prevent multiple home currencies[22m[39m
<empty line>
[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mcreateCurrency[2m > [22m[2mshould prevent multiple home currencies[22m[39m
[CurrencyService] Created currency EUR for company IEbFy7erLPjSJA4HBdQZr 

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mcreateCurrency[2m > [22m[2mshould prevent multiple home currencies[22m[39m
<empty line>
[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mcreateCurrency[2m > [22m[2mshould prevent multiple home currencies[22m[39m
[Database] TreasureChest database deleted 

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mcreateCurrency[2m > [22m[2mshould uppercase currency codes[22m[39m
[Database] TreasureChest database initialized successfully 

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mcreateCurrency[2m > [22m[2mshould uppercase currency codes[22m[39m
<empty line>
[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mcreateCurrency[2m > [22m[2mshould uppercase currency codes[22m[39m
The query {"company_id":"jhvUA75HY6kuRuDFvAV0I","code":"usd"} on currencies would benefit from a compound index [company_id+code]

[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mcreateCurrency[2m > [22m[2mshould uppercase currency codes[22m[39m
<empty line>
[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mcreateCurrency[2m > [22m[2mshould uppercase currency codes[22m[39m
[CurrencyService] Created currency USD for company jhvUA75HY6kuRuDFvAV0I 

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mcreateCurrency[2m > [22m[2mshould uppercase currency codes[22m[39m
<empty line>
[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mcreateCurrency[2m > [22m[2mshould uppercase currency codes[22m[39m
[Database] TreasureChest database deleted 

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mcreateCurrency[2m > [22m[2mshould default decimal_places to 2[22m[39m
[Database] TreasureChest database initialized successfully 

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mcreateCurrency[2m > [22m[2mshould default decimal_places to 2[22m[39m
<empty line>
[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mcreateCurrency[2m > [22m[2mshould default decimal_places to 2[22m[39m
The query {"company_id":"v8cnZD3YpYl3jsjeh-BbQ","code":"USD"} on currencies would benefit from a compound index [company_id+code]

[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mcreateCurrency[2m > [22m[2mshould default decimal_places to 2[22m[39m
<empty line>
[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mcreateCurrency[2m > [22m[2mshould default decimal_places to 2[22m[39m
[CurrencyService] Created currency USD for company v8cnZD3YpYl3jsjeh-BbQ 

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mcreateCurrency[2m > [22m[2mshould default decimal_places to 2[22m[39m
<empty line>
[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mcreateCurrency[2m > [22m[2mshould default decimal_places to 2[22m[39m
[Database] TreasureChest database deleted 

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mgetCurrenciesByCompany[2m > [22m[2mshould return only active currencies[22m[39m
[Database] TreasureChest database initialized successfully 

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mgetCurrenciesByCompany[2m > [22m[2mshould return only active currencies[22m[39m
<empty line>
[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mgetCurrenciesByCompany[2m > [22m[2mshould return only active currencies[22m[39m
The query {"company_id":"FKxdTRGNjr-BM6bNKU-Ih","code":"USD"} on currencies would benefit from a compound index [company_id+code]

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mgetCurrenciesByCompany[2m > [22m[2mshould return only active currencies[22m[39m
[CurrencyService] Created currency USD for company FKxdTRGNjr-BM6bNKU-Ih 

[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mgetCurrenciesByCompany[2m > [22m[2mshould return only active currencies[22m[39m
The query {"company_id":"FKxdTRGNjr-BM6bNKU-Ih","code":"EUR"} on currencies would benefit from a compound index [company_id+code]

[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mgetCurrenciesByCompany[2m > [22m[2mshould return only active currencies[22m[39m
<empty line>
[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mgetCurrenciesByCompany[2m > [22m[2mshould return only active currencies[22m[39m
[CurrencyService] Created currency EUR for company FKxdTRGNjr-BM6bNKU-Ih 

[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mgetCurrenciesByCompany[2m > [22m[2mshould return only active currencies[22m[39m
<empty line>
[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mgetCurrenciesByCompany[2m > [22m[2mshould return only active currencies[22m[39m
[CurrencyService] Updated currency EUR 

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mgetCurrenciesByCompany[2m > [22m[2mshould return only active currencies[22m[39m
<empty line>
[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mgetCurrenciesByCompany[2m > [22m[2mshould return only active currencies[22m[39m
[Database] TreasureChest database deleted 

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mgetCurrencyByCode[2m > [22m[2mshould find currency by code[22m[39m
[Database] TreasureChest database initialized successfully 

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mgetCurrencyByCode[2m > [22m[2mshould find currency by code[22m[39m
<empty line>
[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mgetCurrencyByCode[2m > [22m[2mshould find currency by code[22m[39m
The query {"company_id":"JnCMOnbe638BZ3Y5gL1Qw","code":"USD"} on currencies would benefit from a compound index [company_id+code]

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mgetCurrencyByCode[2m > [22m[2mshould find currency by code[22m[39m
[CurrencyService] Created currency USD for company JnCMOnbe638BZ3Y5gL1Qw 

[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mgetCurrencyByCode[2m > [22m[2mshould find currency by code[22m[39m
The query {"company_id":"JnCMOnbe638BZ3Y5gL1Qw","code":"USD"} on currencies would benefit from a compound index [company_id+code]

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mgetCurrencyByCode[2m > [22m[2mshould find currency by code[22m[39m
<empty line>
[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mgetCurrencyByCode[2m > [22m[2mshould find currency by code[22m[39m
[Database] TreasureChest database deleted 

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mgetCurrencyByCode[2m > [22m[2mshould be case-insensitive[22m[39m
[Database] TreasureChest database initialized successfully 

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mgetCurrencyByCode[2m > [22m[2mshould be case-insensitive[22m[39m
<empty line>
[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mgetCurrencyByCode[2m > [22m[2mshould be case-insensitive[22m[39m
The query {"company_id":"dUUemcrJcVGp8Ne4cTT0P","code":"USD"} on currencies would benefit from a compound index [company_id+code]

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mgetCurrencyByCode[2m > [22m[2mshould be case-insensitive[22m[39m
[CurrencyService] Created currency USD for company dUUemcrJcVGp8Ne4cTT0P 

[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mgetCurrencyByCode[2m > [22m[2mshould be case-insensitive[22m[39m
The query {"company_id":"dUUemcrJcVGp8Ne4cTT0P","code":"USD"} on currencies would benefit from a compound index [company_id+code]

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mgetCurrencyByCode[2m > [22m[2mshould be case-insensitive[22m[39m
<empty line>
[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mgetCurrencyByCode[2m > [22m[2mshould be case-insensitive[22m[39m
[Database] TreasureChest database deleted 

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mgetCurrencyByCode[2m > [22m[2mshould return undefined for non-existent currency[22m[39m
[Database] TreasureChest database initialized successfully 

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mgetCurrencyByCode[2m > [22m[2mshould return undefined for non-existent currency[22m[39m
<empty line>
[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mgetCurrencyByCode[2m > [22m[2mshould return undefined for non-existent currency[22m[39m
The query {"company_id":"pOd4P_ok0SK2Dr665esIu","code":"XYZ"} on currencies would benefit from a compound index [company_id+code]

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mgetCurrencyByCode[2m > [22m[2mshould return undefined for non-existent currency[22m[39m
<empty line>
[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mgetCurrencyByCode[2m > [22m[2mshould return undefined for non-existent currency[22m[39m
[Database] TreasureChest database deleted 

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mgetHomeCurrency[2m > [22m[2mshould return the home currency[22m[39m
[Database] TreasureChest database initialized successfully 

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mgetHomeCurrency[2m > [22m[2mshould return the home currency[22m[39m
<empty line>
[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mgetHomeCurrency[2m > [22m[2mshould return the home currency[22m[39m
The query {"company_id":"grjy6RqkA_adKVyC10Tw7","code":"USD"} on currencies would benefit from a compound index [company_id+code]
The query {"company_id":"grjy6RqkA_adKVyC10Tw7","is_home_currency":1} on currencies would benefit from a compound index [company_id+is_home_currency]

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mgetHomeCurrency[2m > [22m[2mshould return the home currency[22m[39m
[CurrencyService] Created currency USD for company grjy6RqkA_adKVyC10Tw7 

[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mgetHomeCurrency[2m > [22m[2mshould return the home currency[22m[39m
The query {"company_id":"grjy6RqkA_adKVyC10Tw7","is_home_currency":1} on currencies would benefit from a compound index [company_id+is_home_currency]

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mgetHomeCurrency[2m > [22m[2mshould return the home currency[22m[39m
<empty line>
[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mgetHomeCurrency[2m > [22m[2mshould return the home currency[22m[39m
[Database] TreasureChest database deleted 

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mgetHomeCurrency[2m > [22m[2mshould return undefined if no home currency[22m[39m
[Database] TreasureChest database initialized successfully 

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mgetHomeCurrency[2m > [22m[2mshould return undefined if no home currency[22m[39m
<empty line>
[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mgetHomeCurrency[2m > [22m[2mshould return undefined if no home currency[22m[39m
The query {"company_id":"28BmU3usIjgGQZbgcT8Z0","is_home_currency":1} on currencies would benefit from a compound index [company_id+is_home_currency]

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mgetHomeCurrency[2m > [22m[2mshould return undefined if no home currency[22m[39m
<empty line>
[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mgetHomeCurrency[2m > [22m[2mshould return undefined if no home currency[22m[39m
[Database] TreasureChest database deleted 

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2msetHomeCurrency[2m > [22m[2mshould set a currency as home currency[22m[39m
[Database] TreasureChest database initialized successfully 

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2msetHomeCurrency[2m > [22m[2mshould set a currency as home currency[22m[39m
<empty line>
[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2msetHomeCurrency[2m > [22m[2mshould set a currency as home currency[22m[39m
The query {"company_id":"V569CHcvVphKVnsPKf1Q6","code":"USD"} on currencies would benefit from a compound index [company_id+code]

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2msetHomeCurrency[2m > [22m[2mshould set a currency as home currency[22m[39m
[CurrencyService] Created currency USD for company V569CHcvVphKVnsPKf1Q6 

[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2msetHomeCurrency[2m > [22m[2mshould set a currency as home currency[22m[39m
The query {"company_id":"V569CHcvVphKVnsPKf1Q6","is_home_currency":1} on currencies would benefit from a compound index [company_id+is_home_currency]

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2msetHomeCurrency[2m > [22m[2mshould set a currency as home currency[22m[39m
[CurrencyService] Updated currency USD 

[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2msetHomeCurrency[2m > [22m[2mshould set a currency as home currency[22m[39m
The query {"company_id":"V569CHcvVphKVnsPKf1Q6","is_home_currency":1} on currencies would benefit from a compound index [company_id+is_home_currency]

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2msetHomeCurrency[2m > [22m[2mshould set a currency as home currency[22m[39m
<empty line>
[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2msetHomeCurrency[2m > [22m[2mshould set a currency as home currency[22m[39m
[Database] TreasureChest database deleted 

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2msetHomeCurrency[2m > [22m[2mshould unset previous home currency[22m[39m
[Database] TreasureChest database initialized successfully 

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2msetHomeCurrency[2m > [22m[2mshould unset previous home currency[22m[39m
<empty line>
[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2msetHomeCurrency[2m > [22m[2mshould unset previous home currency[22m[39m
The query {"company_id":"yGXp8Vtn-FLb6DmSgS2oW","code":"USD"} on currencies would benefit from a compound index [company_id+code]
The query {"company_id":"yGXp8Vtn-FLb6DmSgS2oW","is_home_currency":1} on currencies would benefit from a compound index [company_id+is_home_currency]

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2msetHomeCurrency[2m > [22m[2mshould unset previous home currency[22m[39m
[CurrencyService] Created currency USD for company yGXp8Vtn-FLb6DmSgS2oW 

[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2msetHomeCurrency[2m > [22m[2mshould unset previous home currency[22m[39m
The query {"company_id":"yGXp8Vtn-FLb6DmSgS2oW","code":"EUR"} on currencies would benefit from a compound index [company_id+code]

[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2msetHomeCurrency[2m > [22m[2mshould unset previous home currency[22m[39m
<empty line>
[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2msetHomeCurrency[2m > [22m[2mshould unset previous home currency[22m[39m
[CurrencyService] Created currency EUR for company yGXp8Vtn-FLb6DmSgS2oW 

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2msetHomeCurrency[2m > [22m[2mshould unset previous home currency[22m[39m
<empty line>
[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2msetHomeCurrency[2m > [22m[2mshould unset previous home currency[22m[39m
The query {"company_id":"yGXp8Vtn-FLb6DmSgS2oW","is_home_currency":1} on currencies would benefit from a compound index [company_id+is_home_currency]

[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2msetHomeCurrency[2m > [22m[2mshould unset previous home currency[22m[39m
<empty line>
[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2msetHomeCurrency[2m > [22m[2mshould unset previous home currency[22m[39m
[CurrencyService] Updated currency EUR 

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2msetHomeCurrency[2m > [22m[2mshould unset previous home currency[22m[39m
<empty line>
[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2msetHomeCurrency[2m > [22m[2mshould unset previous home currency[22m[39m
[Database] TreasureChest database deleted 

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mdeactivateCurrency[2m > [22m[2mshould deactivate a currency[22m[39m
[Database] TreasureChest database initialized successfully 

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mdeactivateCurrency[2m > [22m[2mshould deactivate a currency[22m[39m
<empty line>
[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mdeactivateCurrency[2m > [22m[2mshould deactivate a currency[22m[39m
The query {"company_id":"QUxnrs99vpEMa3tYL9s2t","code":"EUR"} on currencies would benefit from a compound index [company_id+code]

[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mdeactivateCurrency[2m > [22m[2mshould deactivate a currency[22m[39m
<empty line>
[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mdeactivateCurrency[2m > [22m[2mshould deactivate a currency[22m[39m
[CurrencyService] Created currency EUR for company QUxnrs99vpEMa3tYL9s2t 

[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mdeactivateCurrency[2m > [22m[2mshould deactivate a currency[22m[39m
<empty line>
[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mdeactivateCurrency[2m > [22m[2mshould deactivate a currency[22m[39m
[CurrencyService] Updated currency EUR 

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mdeactivateCurrency[2m > [22m[2mshould deactivate a currency[22m[39m
<empty line>
[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mdeactivateCurrency[2m > [22m[2mshould deactivate a currency[22m[39m
[Database] TreasureChest database deleted 

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mdeactivateCurrency[2m > [22m[2mshould prevent deactivating home currency[22m[39m
[Database] TreasureChest database initialized successfully 

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mdeactivateCurrency[2m > [22m[2mshould prevent deactivating home currency[22m[39m
<empty line>
[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mdeactivateCurrency[2m > [22m[2mshould prevent deactivating home currency[22m[39m
The query {"company_id":"dbu6_Y57sY6PrWXcwlqmV","code":"USD"} on currencies would benefit from a compound index [company_id+code]
The query {"company_id":"dbu6_Y57sY6PrWXcwlqmV","is_home_currency":1} on currencies would benefit from a compound index [company_id+is_home_currency]

[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mdeactivateCurrency[2m > [22m[2mshould prevent deactivating home currency[22m[39m
<empty line>
[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mdeactivateCurrency[2m > [22m[2mshould prevent deactivating home currency[22m[39m
[CurrencyService] Created currency USD for company dbu6_Y57sY6PrWXcwlqmV 

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mdeactivateCurrency[2m > [22m[2mshould prevent deactivating home currency[22m[39m
<empty line>
[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mdeactivateCurrency[2m > [22m[2mshould prevent deactivating home currency[22m[39m
[Database] TreasureChest database deleted 

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mdeleteCurrency[2m > [22m[2mshould soft delete a currency[22m[39m
[Database] TreasureChest database initialized successfully 

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mdeleteCurrency[2m > [22m[2mshould soft delete a currency[22m[39m
<empty line>
[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mdeleteCurrency[2m > [22m[2mshould soft delete a currency[22m[39m
The query {"company_id":"kxraQwobvfo_p1N661ZU_","code":"EUR"} on currencies would benefit from a compound index [company_id+code]

[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mdeleteCurrency[2m > [22m[2mshould soft delete a currency[22m[39m
<empty line>
[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mdeleteCurrency[2m > [22m[2mshould soft delete a currency[22m[39m
[CurrencyService] Created currency EUR for company kxraQwobvfo_p1N661ZU_ 

[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mdeleteCurrency[2m > [22m[2mshould soft delete a currency[22m[39m
<empty line>
[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mdeleteCurrency[2m > [22m[2mshould soft delete a currency[22m[39m
[CurrencyService] Deleted currency EUR 

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mdeleteCurrency[2m > [22m[2mshould soft delete a currency[22m[39m
<empty line>
[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mdeleteCurrency[2m > [22m[2mshould soft delete a currency[22m[39m
[Database] TreasureChest database deleted 

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mdeleteCurrency[2m > [22m[2mshould prevent deleting home currency[22m[39m
[Database] TreasureChest database initialized successfully 

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mdeleteCurrency[2m > [22m[2mshould prevent deleting home currency[22m[39m
<empty line>
[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mdeleteCurrency[2m > [22m[2mshould prevent deleting home currency[22m[39m
The query {"company_id":"n7COqOsR8-HvM07ehtcy0","code":"USD"} on currencies would benefit from a compound index [company_id+code]
The query {"company_id":"n7COqOsR8-HvM07ehtcy0","is_home_currency":1} on currencies would benefit from a compound index [company_id+is_home_currency]

[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mdeleteCurrency[2m > [22m[2mshould prevent deleting home currency[22m[39m
<empty line>
[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mdeleteCurrency[2m > [22m[2mshould prevent deleting home currency[22m[39m
[CurrencyService] Created currency USD for company n7COqOsR8-HvM07ehtcy0 

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mdeleteCurrency[2m > [22m[2mshould prevent deleting home currency[22m[39m
<empty line>
[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mdeleteCurrency[2m > [22m[2mshould prevent deleting home currency[22m[39m
[Database] TreasureChest database deleted 

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2minitializeHomeCurrency[2m > [22m[2mshould initialize USD as default[22m[39m
[Database] TreasureChest database initialized successfully 

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2minitializeHomeCurrency[2m > [22m[2mshould initialize USD as default[22m[39m
<empty line>
[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2minitializeHomeCurrency[2m > [22m[2mshould initialize USD as default[22m[39m
The query {"company_id":"YQN711FIG65iIB15FC7cT","is_home_currency":1} on currencies would benefit from a compound index [company_id+is_home_currency]

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2minitializeHomeCurrency[2m > [22m[2mshould initialize USD as default[22m[39m
<empty line>
[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2minitializeHomeCurrency[2m > [22m[2mshould initialize USD as default[22m[39m
[Database] TreasureChest database deleted 

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2minitializeHomeCurrency[2m > [22m[2mshould initialize custom currency[22m[39m
[Database] TreasureChest database initialized successfully 

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2minitializeHomeCurrency[2m > [22m[2mshould initialize custom currency[22m[39m
<empty line>
[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2minitializeHomeCurrency[2m > [22m[2mshould initialize custom currency[22m[39m
The query {"company_id":"K7hmWXsgBvdO4JAmlHF6O","is_home_currency":1} on currencies would benefit from a compound index [company_id+is_home_currency]

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2minitializeHomeCurrency[2m > [22m[2mshould initialize custom currency[22m[39m
<empty line>
[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2minitializeHomeCurrency[2m > [22m[2mshould initialize custom currency[22m[39m
[Database] TreasureChest database deleted 

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2minitializeHomeCurrency[2m > [22m[2mshould not duplicate if home currency exists[22m[39m
[Database] TreasureChest database initialized successfully 

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2minitializeHomeCurrency[2m > [22m[2mshould not duplicate if home currency exists[22m[39m
<empty line>
[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2minitializeHomeCurrency[2m > [22m[2mshould not duplicate if home currency exists[22m[39m
The query {"company_id":"KRJFxqWednkwwbV4y8yV7","is_home_currency":1} on currencies would benefit from a compound index [company_id+is_home_currency]

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2minitializeHomeCurrency[2m > [22m[2mshould not duplicate if home currency exists[22m[39m
<empty line>
[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2minitializeHomeCurrency[2m > [22m[2mshould not duplicate if home currency exists[22m[39m
[Database] TreasureChest database deleted 

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mgetCommonCurrencies[2m > [22m[2mshould return list of common currencies[22m[39m
[Database] TreasureChest database initialized successfully 

[90mstdout[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mgetCommonCurrencies[2m > [22m[2mshould return list of common currencies[22m[39m
<empty line>
[90mstderr[2m | src/services/__tests__/currency.service.test.ts[2m > [22m[2mCurrencyService[2m > [22m[2mgetCommonCurrencies[2m > [22m[2mshould return list of common currencies[22m[39m
[Database] TreasureChest database deleted 

 [33mâ¯[39m src/services/__tests__/currency.service.test.ts [2m ([22m[2m22 tests[22m [2m|[22m [31m8 failed[39m[2m)[22m[33m 5086[2mms[22m[39m
[31m   [33mâ¯[31m src/services/__tests__/currency.service.test.ts[2m > [22mCurrencyService[2m > [22mcreateCurrency[2m > [22mshould prevent multiple home currencies[39m
[31m     â†’ promise resolved "{ id: 'g425hExZ3T_avKL2PHKkZ', â€¦(11) }" instead of rejecting[39m
[31m   [33mâ¯[31m src/services/__tests__/currency.service.test.ts[2m > [22mCurrencyService[2m > [22mgetHomeCurrency[2m > [22mshould return the home currency[39m
[31m     â†’ expected undefined not to be undefined[39m
[31m   [33mâ¯[31m src/services/__tests__/currency.service.test.ts[2m > [22mCurrencyService[2m > [22msetHomeCurrency[2m > [22mshould set a currency as home currency[39m
[31m     â†’ expected undefined to be 'GtOtqzZmAcYl-okrCSROA' // Object.is equality[39m
[31m   [33mâ¯[31m src/services/__tests__/currency.service.test.ts[2m > [22mCurrencyService[2m > [22msetHomeCurrency[2m > [22mshould unset previous home currency[39m
[31m     â†’ expected true to be false // Object.is equality[39m
[31m   [33mâ¯[31m src/services/__tests__/currency.service.test.ts[2m > [22mCurrencyService[2m > [22minitializeHomeCurrency[2m > [22mshould initialize USD as default[39m
[31m     â†’ COMMON_CURRENCIES is not defined[39m
[31m   [33mâ¯[31m src/services/__tests__/currency.service.test.ts[2m > [22mCurrencyService[2m > [22minitializeHomeCurrency[2m > [22mshould initialize custom currency[39m
[31m     â†’ COMMON_CURRENCIES is not defined[39m
[31m   [33mâ¯[31m src/services/__tests__/currency.service.test.ts[2m > [22mCurrencyService[2m > [22minitializeHomeCurrency[2m > [22mshould not duplicate if home currency exists[39m
[31m     â†’ COMMON_CURRENCIES is not defined[39m
[31m   [33mâ¯[31m src/services/__tests__/currency.service.test.ts[2m > [22mCurrencyService[2m > [22mgetCommonCurrencies[2m > [22mshould return list of common currencies[39m
[31m     â†’ COMMON_CURRENCIES is not defined[39m

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1m[7m Failed Tests 8 [27m[22mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/__tests__/currency.service.test.ts[2m > [22mCurrencyService[2m > [22mcreateCurrency[2m > [22mshould prevent multiple home currencies
[31m[1mAssertionError[22m: promise resolved "{ id: 'g425hExZ3T_avKL2PHKkZ', â€¦(11) }" instead of rejecting[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- [Error: rejected promise][39m
[31m+ Object {[39m
[31m+   "active": true,[39m
[31m+   "code": "EUR",[39m
[31m+   "company_id": "IEbFy7erLPjSJA4HBdQZr",[39m
[31m+   "created_at": 1768741404088,[39m
[31m+   "decimal_places": 2,[39m
[31m+   "deleted_at": null,[39m
[31m+   "id": "g425hExZ3T_avKL2PHKkZ",[39m
[31m+   "is_home_currency": true,[39m
[31m+   "name": "Euro",[39m
[31m+   "symbol": "â‚¬",[39m
[31m+   "updated_at": 1768741404088,[39m
[31m+   "version_vector": Object {},[39m
[31m+ }[39m

[36m [2mâ¯[22m src/services/__tests__/currency.service.test.ts:[2m110:7[22m[39m
    [90m108| [39m          is_home_currency[33m:[39m [35mtrue[39m[33m,[39m
    [90m109| [39m        })
    [90m110| [39m      )[33m.[39mrejects[33m.[39m[34mtoThrow[39m([32m'already has a home currency'[39m)[33m;[39m
    [90m   | [39m      [31m^[39m
    [90m111| [39m    })[33m;[39m
    [90m112| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/8]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/__tests__/currency.service.test.ts[2m > [22mCurrencyService[2m > [22mgetHomeCurrency[2m > [22mshould return the home currency
[31m[1mAssertionError[22m: expected undefined not to be undefined[39m
[36m [2mâ¯[22m src/services/__tests__/currency.service.test.ts:[2m202:28[22m[39m
    [90m200| [39m      [35mconst[39m homeCurrency [33m=[39m [35mawait[39m currencyService[33m.[39m[34mgetHomeCurrency[39m(compaâ€¦
    [90m201| [39m
    [90m202| [39m      [34mexpect[39m(homeCurrency)[33m.[39m[34mtoBeDefined[39m()[33m;[39m
    [90m   | [39m                           [31m^[39m
    [90m203| [39m      [34mexpect[39m(homeCurrency[33m?.[39mcode)[33m.[39m[34mtoBe[39m([32m'USD'[39m)[33m;[39m
    [90m204| [39m      [34mexpect[39m(homeCurrency[33m?.[39mis_home_currency)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[2/8]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/__tests__/currency.service.test.ts[2m > [22mCurrencyService[2m > [22msetHomeCurrency[2m > [22mshould set a currency as home currency
[31m[1mAssertionError[22m: expected undefined to be 'GtOtqzZmAcYl-okrCSROA' // Object.is equality[39m

[32m- Expected:[39m 
"GtOtqzZmAcYl-okrCSROA"

[31m+ Received:[39m 
undefined

[36m [2mâ¯[22m src/services/__tests__/currency.service.test.ts:[2m226:32[22m[39m
    [90m224| [39m      [35mconst[39m homeCurrency [33m=[39m [35mawait[39m currencyService[33m.[39m[34mgetHomeCurrency[39m(compaâ€¦
    [90m225| [39m
    [90m226| [39m      [34mexpect[39m(homeCurrency[33m?.[39mid)[33m.[39m[34mtoBe[39m(usd[33m.[39mid)[33m;[39m
    [90m   | [39m                               [31m^[39m
    [90m227| [39m    })[33m;[39m
    [90m228| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[3/8]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/__tests__/currency.service.test.ts[2m > [22mCurrencyService[2m > [22msetHomeCurrency[2m > [22mshould unset previous home currency
[31m[1mAssertionError[22m: expected true to be false // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- false[39m
[31m+ true[39m

[36m [2mâ¯[22m src/services/__tests__/currency.service.test.ts:[2m248:44[22m[39m
    [90m246| [39m      [35mconst[39m updatedEur [33m=[39m [35mawait[39m currencyService[33m.[39m[34mgetCurrencyById[39m(eur[33m.[39mid)[33m;[39m
    [90m247| [39m
    [90m248| [39m      [34mexpect[39m(updatedUsd[33m?.[39mis_home_currency)[33m.[39m[34mtoBe[39m([35mfalse[39m)[33m;[39m
    [90m   | [39m                                           [31m^[39m
    [90m249| [39m      [34mexpect[39m(updatedEur[33m?.[39mis_home_currency)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
    [90m250| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[4/8]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/__tests__/currency.service.test.ts[2m > [22mCurrencyService[2m > [22minitializeHomeCurrency[2m > [22mshould initialize USD as default
[31m[1mReferenceError[22m: COMMON_CURRENCIES is not defined[39m
[36m [2mâ¯[22m CurrencyService.initializeHomeCurrency src/services/currency.service.ts:[2m311:29[22m[39m
    [90m309| [39m
    [90m310| [39m    [90m// Find currency details from common currencies[39m
    [90m311| [39m    [35mconst[39m commonCurrency [33m=[39m ([33mCOMMON_CURRENCIES[39m [35mas[39m readonly {
    [90m   | [39m                            [31m^[39m
    [90m312| [39m      code[33m:[39m string[33m;[39m
    [90m313| [39m      name[33m:[39m string[33m;[39m
[90m [2mâ¯[22m src/services/__tests__/currency.service.test.ts:[2m313:24[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[5/8]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/__tests__/currency.service.test.ts[2m > [22mCurrencyService[2m > [22minitializeHomeCurrency[2m > [22mshould initialize custom currency
[31m[1mReferenceError[22m: COMMON_CURRENCIES is not defined[39m
[36m [2mâ¯[22m CurrencyService.initializeHomeCurrency src/services/currency.service.ts:[2m311:29[22m[39m
    [90m309| [39m
    [90m310| [39m    [90m// Find currency details from common currencies[39m
    [90m311| [39m    [35mconst[39m commonCurrency [33m=[39m ([33mCOMMON_CURRENCIES[39m [35mas[39m readonly {
    [90m   | [39m                            [31m^[39m
    [90m312| [39m      code[33m:[39m string[33m;[39m
    [90m313| [39m      name[33m:[39m string[33m;[39m
[90m [2mâ¯[22m src/services/__tests__/currency.service.test.ts:[2m322:24[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[6/8]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/__tests__/currency.service.test.ts[2m > [22mCurrencyService[2m > [22minitializeHomeCurrency[2m > [22mshould not duplicate if home currency exists
[31m[1mReferenceError[22m: COMMON_CURRENCIES is not defined[39m
[36m [2mâ¯[22m CurrencyService.initializeHomeCurrency src/services/currency.service.ts:[2m311:29[22m[39m
    [90m309| [39m
    [90m310| [39m    [90m// Find currency details from common currencies[39m
    [90m311| [39m    [35mconst[39m commonCurrency [33m=[39m ([33mCOMMON_CURRENCIES[39m [35mas[39m readonly {
    [90m   | [39m                            [31m^[39m
    [90m312| [39m      code[33m:[39m string[33m;[39m
    [90m313| [39m      name[33m:[39m string[33m;[39m
[90m [2mâ¯[22m src/services/__tests__/currency.service.test.ts:[2m330:21[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[7/8]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/__tests__/currency.service.test.ts[2m > [22mCurrencyService[2m > [22mgetCommonCurrencies[2m > [22mshould return list of common currencies
[31m[1mReferenceError[22m: COMMON_CURRENCIES is not defined[39m
[36m [2mâ¯[22m CurrencyService.getCommonCurrencies src/services/currency.service.ts:[2m336:5[22m[39m
    [90m334| [39m   */[39m
    [90m335| [39m  [34mgetCommonCurrencies[39m()[33m:[39m [35mtypeof[39m [33mCOMMON_CURRENCIES[39m {
    [90m336| [39m    [35mreturn[39m [33mCOMMON_CURRENCIES[39m[33m;[39m
    [90m   | [39m    [31m^[39m
    [90m337| [39m  }
    [90m338| [39m}
[90m [2mâ¯[22m src/services/__tests__/currency.service.test.ts:[2m343:38[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[8/8]âŽ¯[22m[39m

[2m Test Files [22m [1m[31m1 failed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[31m8 failed[39m[22m[2m | [22m[1m[32m14 passed[39m[22m[90m (22)[39m
[2m   Start at [22m 05:01:04
[2m   Duration [22m 64.71s


[1m[7m[31m FAIL [39m[27m[22m[31m Tests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
       [34mrerun x1[39m
[2K[1A[2K[G       [90mrerun x1[39m
[2K[1A[2K[G       [2m[90mrerun x1[39m[22m
[2K[1A[2K[G[3Jc
[7m[1m[34m RERUN [39m[22m[27m[2m src/__tests__/integration/groupD.integration.test.ts[22m [34mx1[39m


[2m Test Files [22m [2mno tests[22m
[2m      Tests [22m [2mno tests[22m
[2m   Start at [22m 05:04:39
[2m   Duration [22m 0ms


[1m[7m[32m PASS [39m[27m[22m[32m Waiting for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
       [34mrerun x1[39m
[2K[1A[2K[G[3Jc
[7m[1m[34m RERUN [39m[22m[27m[2m src/__tests__/integration/reconciliation.e2e.test.ts[22m


[2m Test Files [22m [2mno tests[22m
[2m      Tests [22m [2mno tests[22m
[2m   Start at [22m 05:04:41
[2m   Duration [22m 0ms


[1m[7m[32m PASS [39m[27m[22m[32m Waiting for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
[3Jc
[7m[1m[34m RERUN [39m[22m[27m[2m src/db/database.ts[22m

[1m[35m
Restarting due to config changes...[39m[22m

[31mâŽ¯âŽ¯âŽ¯âŽ¯[1m[7m Unhandled Rejection [27m[22mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'logger')[39m
[90m [2mâ¯[22m DefaultReporter.onFinished node_modules/vitest/dist/vendor/index.-xs08BYx.js:[2m2027:14[22m[39m
[90m [2mâ¯[22m Vitest.report node_modules/vitest/dist/vendor/cli-api.OdDWuB7Y.js:[2m11537:5[22m[39m
[90m [2mâ¯[22m async file:/C:/Users/Admin/graceful_books/node_modules/vitest/dist/vendor/cli-api.OdDWuB7Y.js:[2m11237:7[22m[39m


[31mâŽ¯âŽ¯âŽ¯âŽ¯[1m[7m Unhandled Rejection [27m[22mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'logger')[39m
[90m [2mâ¯[22m DefaultReporter.onFinished node_modules/vitest/dist/vendor/index.-xs08BYx.js:[2m2027:14[22m[39m
[90m [2mâ¯[22m Vitest.report node_modules/vitest/dist/vendor/cli-api.OdDWuB7Y.js:[2m11537:5[22m[39m
[90m [2mâ¯[22m async file:/C:/Users/Admin/graceful_books/node_modules/vitest/dist/vendor/cli-api.OdDWuB7Y.js:[2m11237:7[22m[39m


[31mâŽ¯âŽ¯âŽ¯âŽ¯[1m[7m Unhandled Rejection [27m[22mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'logger')[39m
[90m [2mâ¯[22m DefaultReporter.onFinished node_modules/vitest/dist/vendor/index.-xs08BYx.js:[2m2027:14[22m[39m
[90m [2mâ¯[22m Vitest.report node_modules/vitest/dist/vendor/cli-api.OdDWuB7Y.js:[2m11537:5[22m[39m
[90m [2mâ¯[22m async file:/C:/Users/Admin/graceful_books/node_modules/vitest/dist/vendor/cli-api.OdDWuB7Y.js:[2m11237:7[22m[39m


[31mâŽ¯âŽ¯âŽ¯âŽ¯[1m[7m Unhandled Rejection [27m[22mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'logger')[39m
[90m [2mâ¯[22m DefaultReporter.onFinished node_modules/vitest/dist/vendor/index.-xs08BYx.js:[2m2027:14[22m[39m
[90m [2mâ¯[22m Vitest.report node_modules/vitest/dist/vendor/cli-api.OdDWuB7Y.js:[2m11537:5[22m[39m
[90m [2mâ¯[22m async file:/C:/Users/Admin/graceful_books/node_modules/vitest/dist/vendor/cli-api.OdDWuB7Y.js:[2m11237:7[22m[39m


[31mâŽ¯âŽ¯âŽ¯âŽ¯[1m[7m Unhandled Rejection [27m[22mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'logger')[39m
[90m [2mâ¯[22m DefaultReporter.onFinished node_modules/vitest/dist/vendor/index.-xs08BYx.js:[2m2027:14[22m[39m
[90m [2mâ¯[22m Vitest.report node_modules/vitest/dist/vendor/cli-api.OdDWuB7Y.js:[2m11537:5[22m[39m
[90m [2mâ¯[22m async file:/C:/Users/Admin/graceful_books/node_modules/vitest/dist/vendor/cli-api.OdDWuB7Y.js:[2m11237:7[22m[39m


[31mâŽ¯âŽ¯âŽ¯âŽ¯[1m[7m Unhandled Rejection [27m[22mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'logger')[39m
[90m [2mâ¯[22m DefaultReporter.onFinished node_modules/vitest/dist/vendor/index.-xs08BYx.js:[2m2027:14[22m[39m
[90m [2mâ¯[22m Vitest.report node_modules/vitest/dist/vendor/cli-api.OdDWuB7Y.js:[2m11537:5[22m[39m
[90m [2mâ¯[22m async file:/C:/Users/Admin/graceful_books/node_modules/vitest/dist/vendor/cli-api.OdDWuB7Y.js:[2m11237:7[22m[39m


[31mâŽ¯âŽ¯âŽ¯âŽ¯[1m[7m Unhandled Rejection [27m[22mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'logger')[39m
[90m [2mâ¯[22m DefaultReporter.onFinished node_modules/vitest/dist/vendor/index.-xs08BYx.js:[2m2027:14[22m[39m
[90m [2mâ¯[22m Vitest.report node_modules/vitest/dist/vendor/cli-api.OdDWuB7Y.js:[2m11537:5[22m[39m
[90m [2mâ¯[22m async file:/C:/Users/Admin/graceful_books/node_modules/vitest/dist/vendor/cli-api.OdDWuB7Y.js:[2m11237:7[22m[39m




