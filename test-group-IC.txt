
> graceful-books@0.1.0 test
> vitest src/components/conflicts/ConflictResolutionButtons.test.tsx src/components/activity/CommentComposer.test.tsx src/services/multiUser/notification.service.test.ts src/services/comments.service.test.ts src/services/admin/charity.service.test.ts src/services/billing.service.test.ts src/services/stripe.service.test.ts src/services/admin/charityDistribution.service.test.ts src/db/schema/charity.schema.test.ts


[1m[46m RUN [49m[22m [36mv4.0.17 [39m[90mC:/Users/Admin/graceful_books[39m

 [31mâ¯[39m src/db/schema/charity.schema.test.ts [2m([22m[2m11 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[32m 53[2mms[22m[39m
[31m       [31mÃ—[31m should create a charity with all required fields[39m[32m 24[2mms[22m[39m
[31m       [31mÃ—[31m should include logo when provided[39m[32m 4[2mms[22m[39m
[31m       [31mÃ—[31m should pass validation for valid charity[39m[32m 9[2mms[22m[39m
       [32mâœ“[39m should fail validation when name is missing[32m 2[2mms[22m[39m
       [32mâœ“[39m should fail validation when description is missing[32m 1[2mms[22m[39m
       [32mâœ“[39m should fail validation when category is missing[32m 1[2mms[22m[39m
       [32mâœ“[39m should fail validation when website is missing[32m 0[2mms[22m[39m
       [32mâœ“[39m should fail validation for invalid website URL[32m 1[2mms[22m[39m
       [32mâœ“[39m should collect multiple validation errors[32m 1[2mms[22m[39m
       [32mâœ“[39m should return correct display name for each category[32m 2[2mms[22m[39m
       [32mâœ“[39m should return descriptive text for each category[32m 2[2mms[22m[39m
[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould enable submit button when text is entered
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould enable submit button when text is entered
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould enable submit button when text is entered
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould enable submit button when text is entered
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould enable submit button when text is entered
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould enable submit button when text is entered
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould enable submit button when text is entered
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould enable submit button when text is entered
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould enable submit button when text is entered
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould enable submit button when text is entered
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould enable submit button when text is entered
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

 [31mâ¯[39m src/components/conflicts/ConflictResolutionButtons.test.tsx [2m([22m[2m21 tests[22m[2m | [22m[31m12 failed[39m[2m)[22m[33m 1339[2mms[22m[39m
       [32mâœ“[39m should render all primary buttons[32m 79[2mms[22m[39m
[31m       [31mÃ—[31m should render all options when showAllOptions is true[39m[33m 449[2mms[22m[39m
       [32mâœ“[39m should not render merge button when callback not provided[32m 37[2mms[22m[39m
       [32mâœ“[39m should not render custom button when callback not provided[32m 24[2mms[22m[39m
       [32mâœ“[39m should render with horizontal layout[32m 9[2mms[22m[39m
       [32mâœ“[39m should render with vertical layout[32m 6[2mms[22m[39m
[31m       [31mÃ—[31m should render all size variants[39m[32m 50[2mms[22m[39m
[31m       [31mÃ—[31m should call onKeepLocal when Keep Mine is clicked[39m[32m 66[2mms[22m[39m
[31m       [31mÃ—[31m should call onKeepRemote when Keep Theirs is clicked[39m[32m 42[2mms[22m[39m
[31m       [31mÃ—[31m should call onMergeFields when Merge Fields is clicked[39m[32m 67[2mms[22m[39m
[31m       [31mÃ—[31m should call onCustom when Custom is clicked[39m[32m 62[2mms[22m[39m
[31m       [31mÃ—[31m should not call handlers when loading[39m[32m 58[2mms[22m[39m
       [32mâœ“[39m should disable all buttons when loading[32m 39[2mms[22m[39m
[31m       [31mÃ—[31m should show loading spinner on Keep Mine button[39m[32m 51[2mms[22m[39m
       [32mâœ“[39m should have role="group" on button container[32m 7[2mms[22m[39m
       [32mâœ“[39m should have appropriate aria-label on group[32m 9[2mms[22m[39m
       [32mâœ“[39m should have descriptive aria-labels on buttons[32m 72[2mms[22m[39m
[31m       [31mÃ—[31m should be keyboard navigable[39m[32m 58[2mms[22m[39m
[31m       [31mÃ—[31m should support keyboard activation[39m[32m 41[2mms[22m[39m
[31m       [31mÃ—[31m should handle rapid clicks[39m[32m 62[2mms[22m[39m
[31m       [31mÃ—[31m should handle different conflict IDs[39m[32m 43[2mms[22m[39m
[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould enable submit button when text is entered
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould enable submit button when text is entered
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould enable submit button when text is entered
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould enable submit button when text is entered
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould enable submit button when text is entered
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould enable submit button when text is entered
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould enable submit button when text is entered
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould enable submit button when text is entered
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould enable submit button when text is entered
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould enable submit button when text is entered
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould enable submit button when text is entered
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould call onSubmit with content when submitted
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould call onSubmit with content when submitted
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould call onSubmit with content when submitted
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould call onSubmit with content when submitted
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould call onSubmit with content when submitted
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould call onSubmit with content when submitted
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould call onSubmit with content when submitted
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould call onSubmit with content when submitted
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould call onSubmit with content when submitted
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould call onSubmit with content when submitted
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould call onSubmit with content when submitted
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould call onSubmit with content when submitted
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould call onSubmit with content when submitted
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould clear textarea after submission
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould clear textarea after submission
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould clear textarea after submission
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould clear textarea after submission
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould clear textarea after submission
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould clear textarea after submission
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould clear textarea after submission
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould clear textarea after submission
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould clear textarea after submission
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould clear textarea after submission
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould clear textarea after submission
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould clear textarea after submission
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould clear textarea after submission
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould display submitting state
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould display submitting state
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould display submitting state
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould display submitting state
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould submit with Cmd+Enter
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould submit with Cmd+Enter
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould submit with Cmd+Enter
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould submit with Cmd+Enter
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould submit with Cmd+Enter
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould submit with Cmd+Enter
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould submit with Cmd+Enter
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould submit with Cmd+Enter
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould submit with Cmd+Enter
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould submit with Cmd+Enter
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould submit with Cmd+Enter
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould submit with Cmd+Enter
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

[90mstderr[2m | src/components/activity/CommentComposer.test.tsx[2m > [22m[2mCommentComposer[2m > [22m[2mshould submit with Cmd+Enter
[22m[39mWarning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)
Warning: An update to CommentComposer inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at CommentComposer (C:/Users/Admin/graceful_books/src/components/activity/CommentComposer.tsx:9:3)

 [31mâ¯[39m src/components/activity/CommentComposer.test.tsx [2m([22m[2m15 tests[22m[2m | [22m[31m2 failed[39m[2m)[22m[33m 4137[2mms[22m[39m
     [33m[2mâœ“[22m[39m should render textarea with placeholder [33m 327[2mms[22m[39m
     [32mâœ“[39m should render submit button disabled when empty[32m 63[2mms[22m[39m
     [33m[2mâœ“[22m[39m should enable submit button when text is entered [33m 821[2mms[22m[39m
     [33m[2mâœ“[22m[39m should call onSubmit with content when submitted [33m 378[2mms[22m[39m
     [33m[2mâœ“[22m[39m should clear textarea after submission [33m 539[2mms[22m[39m
     [32mâœ“[39m should render cancel button when onCancel provided[32m 36[2mms[22m[39m
     [32mâœ“[39m should call onCancel when cancel button clicked[32m 76[2mms[22m[39m
[31m     [31mÃ—[31m should display submitting state[39m[33m 1202[2mms[22m[39m
     [32mâœ“[39m should have visible label for accessibility[32m 29[2mms[22m[39m
     [32mâœ“[39m should have hint text for users[32m 16[2mms[22m[39m
     [32mâœ“[39m should respect initialValue prop[32m 27[2mms[22m[39m
     [32mâœ“[39m should use custom placeholder[32m 19[2mms[22m[39m
[31m     [31mÃ—[31m should be keyboard accessible[39m[32m 135[2mms[22m[39m
     [33m[2mâœ“[22m[39m should submit with Cmd+Enter [33m 436[2mms[22m[39m
     [32mâœ“[39m should have proper ARIA attributes[32m 23[2mms[22m[39m
[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mcreateComment[2m > [22m[2mshould create a basic comment successfully
[22m[39m[CommentsService] Created comment {
  commentId: [32m'6rgXXP2gwztuYTZxlxpyM'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'This is a test comment'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mcreateComment[2m > [22m[2mshould create a threaded reply comment
[22m[39m[CommentsService] Created comment {
  commentId: [32m'x2Xxm3vwZX5KmGfrO8RhR'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Parent comment'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mcreateComment[2m > [22m[2mshould create a threaded reply comment
[22m[39m[CommentsService] Created comment {
  commentId: [32m'mNO3T1DqZqh_eEVIAhlyw'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [32m'x2Xxm3vwZX5KmGfrO8RhR'[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Reply comment'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mcreateComment[2m > [22m[2mshould create comment with metadata
[22m[39m[CommentsService] Created comment {
  commentId: [32m'FeNWiEWBHzuv4cmC2xpdC'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Comment with metadata'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mcreateComment[2m > [22m[2mshould process @mentions in comment
[22m[39m[CommentsService] Created comment {
  commentId: [32m'9IP2luietsoiVgZGzqYig'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text {
  text: [32m'Hey @testuser2, please review this transaction'[39m,
  mentionsCount: [33m1[39m,
  usernames: [ [32m'testuser2'[39m ]
}

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mcreateComment[2m > [22m[2mshould process @mentions in comment
[22m[39m[MentionsService] Validated mentions { totalMentions: [33m1[39m, validMentions: [33m1[39m, invalidMentions: [33m0[39m }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mcreateComment[2m > [22m[2mshould process @mentions in comment
[22m[39m[MentionsService] Created mention {
  mentionId: [32m'9k5CLu5RrhgUnvAU2KbsY'[39m,
  mentionedUserId: [32m'user-test-002'[39m,
  mentioningUserId: [32m'user-test-001'[39m,
  commentId: [32m'9IP2luietsoiVgZGzqYig'[39m
}
[MentionsService] Created mentions for comment {
  commentId: [32m'9IP2luietsoiVgZGzqYig'[39m,
  mentionsCreated: [33m1[39m,
  notificationsScheduled: [33m1[39m,
  checklistItemsCreated: [33m0[39m,
  errors: [33m0[39m
}

[90mstderr[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mcreateComment[2m > [22m[2mshould reject comment with empty content
[22m[39m[CommentsService] Failed to create comment {
  error: Error: Invalid comment: content is required
      at CommentsService.createComment (C:/Users/Admin/graceful_books/src/services/comments.service.ts:120:15)
  [90m    at runNextTicks (node:internal/process/task_queues:64:5)[39m
  [90m    at processImmediate (node:internal/timers:472:9)[39m
      at C:/Users/Admin/graceful_books/src/services/comments.service.test.ts:226:7
      at [90mfile:///C:/Users/Admin/graceful_books/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:20
}

[90mstderr[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mcreateComment[2m > [22m[2mshould reject comment with content exceeding max length
[22m[39m[CommentsService] Failed to create comment {
  error: Error: Invalid comment: content must not exceed 5000 characters
      at CommentsService.createComment (C:/Users/Admin/graceful_books/src/services/comments.service.ts:120:15)
  [90m    at runNextTicks (node:internal/process/task_queues:64:5)[39m
  [90m    at processImmediate (node:internal/timers:472:9)[39m
      at C:/Users/Admin/graceful_books/src/services/comments.service.test.ts:237:7
      at [90mfile:///C:/Users/Admin/graceful_books/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:20
}

[90mstderr[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mcreateComment[2m > [22m[2mshould reject reply to non-existent parent
[22m[39m[CommentsService] Failed to create comment {
  error: Error: Parent comment not found
      at CommentsService.createComment (C:/Users/Admin/graceful_books/src/services/comments.service.ts:127:17)
      at C:/Users/Admin/graceful_books/src/services/comments.service.test.ts:247:7
      at [90mfile:///C:/Users/Admin/graceful_books/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:20
}

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mcreateComment[2m > [22m[2mshould reject reply to deleted parent comment
[22m[39m[CommentsService] Created comment {
  commentId: [32m'HC0u_JhEatSSHDgLMvcc2'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Parent comment'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mcreateComment[2m > [22m[2mshould reject reply to deleted parent comment
[22m[39m[CommentsService] Deleted comment { commentId: [32m'HC0u_JhEatSSHDgLMvcc2'[39m, userId: [32m'user-test-001'[39m }

[90mstderr[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mcreateComment[2m > [22m[2mshould reject reply to deleted parent comment
[22m[39m[CommentsService] Failed to create comment {
  error: Error: Cannot reply to deleted comment
      at CommentsService.createComment (C:/Users/Admin/graceful_books/src/services/comments.service.ts:133:17)
      at C:/Users/Admin/graceful_books/src/services/comments.service.test.ts:267:7
      at [90mfile:///C:/Users/Admin/graceful_books/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:20
}

[90mstderr[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mcreateComment[2m > [22m[2mshould reject comment from user without permission
[22m[39m[CommentsService] Permission check failed {
  error: Error: User is not a member of this company
      at CommentsService.checkPermissions (C:/Users/Admin/graceful_books/src/services/comments.service.ts:535:15)
  [90m    at runNextTicks (node:internal/process/task_queues:64:5)[39m
  [90m    at processImmediate (node:internal/timers:472:9)[39m
      at CommentsService.createComment (C:/Users/Admin/graceful_books/src/services/comments.service.ts:98:7)
      at C:/Users/Admin/graceful_books/src/services/comments.service.test.ts:285:7
      at [90mfile:///C:/Users/Admin/graceful_books/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:20,
  commentableType: [32m'TRANSACTION'[39m,
  action: [32m'create'[39m
}

[90mstderr[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mcreateComment[2m > [22m[2mshould reject comment from user without permission
[22m[39m[CommentsService] Failed to create comment {
  error: Error: User is not a member of this company
      at CommentsService.checkPermissions (C:/Users/Admin/graceful_books/src/services/comments.service.ts:535:15)
  [90m    at runNextTicks (node:internal/process/task_queues:64:5)[39m
  [90m    at processImmediate (node:internal/timers:472:9)[39m
      at CommentsService.createComment (C:/Users/Admin/graceful_books/src/services/comments.service.ts:98:7)
      at C:/Users/Admin/graceful_books/src/services/comments.service.test.ts:285:7
      at [90mfile:///C:/Users/Admin/graceful_books/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:20
}

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mgetComments[2m > [22m[2mshould retrieve all comments for entity
[22m[39m[CommentsService] Created comment {
  commentId: [32m'bvZUwK5Qb1y8VMzeVTWJ-'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'First comment'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mgetComments[2m > [22m[2mshould retrieve all comments for entity
[22m[39m[CommentsService] Created comment {
  commentId: [32m'KdN1DPKDjM31u2Y9EPW2I'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Second comment'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mgetComments[2m > [22m[2mshould filter top-level comments only
[22m[39m[CommentsService] Created comment {
  commentId: [32m'B2J3vCxAheEsamnK7SCM2'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'First comment'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mgetComments[2m > [22m[2mshould filter top-level comments only
[22m[39m[CommentsService] Created comment {
  commentId: [32m'bM5OszSP1CPj2pCmjx1Qe'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Second comment'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mgetComments[2m > [22m[2mshould filter top-level comments only
[22m[39m[CommentsService] Created comment {
  commentId: [32m'-0F-45ilV1fo_r2FSuTno'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Parent'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mgetComments[2m > [22m[2mshould filter top-level comments only
[22m[39m[CommentsService] Created comment {
  commentId: [32m'X0_Q1JdnRGmN8Uq3b6YNS'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [32m'-0F-45ilV1fo_r2FSuTno'[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Reply'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mgetComments[2m > [22m[2mshould exclude deleted comments by default
[22m[39m[CommentsService] Created comment {
  commentId: [32m'wBDJXO0Xk9SJWOO5j8CXI'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'First comment'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mgetComments[2m > [22m[2mshould exclude deleted comments by default
[22m[39m[CommentsService] Created comment {
  commentId: [32m'rUnZfPJewf-dGg1OeEw8W'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Second comment'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mgetComments[2m > [22m[2mshould exclude deleted comments by default
[22m[39m[CommentsService] Created comment {
  commentId: [32m'aZjQZ2DSXU1Rm7OvMQtoM'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'To be deleted'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mgetComments[2m > [22m[2mshould exclude deleted comments by default
[22m[39m[CommentsService] Deleted comment { commentId: [32m'aZjQZ2DSXU1Rm7OvMQtoM'[39m, userId: [32m'user-test-001'[39m }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mgetComments[2m > [22m[2mshould include deleted comments when requested
[22m[39m[CommentsService] Created comment {
  commentId: [32m'og3UcocDH-riKQ_YpNkV3'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'First comment'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mgetComments[2m > [22m[2mshould include deleted comments when requested
[22m[39m[CommentsService] Created comment {
  commentId: [32m'43zTWUCYwmLlwhNYtYIgc'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Second comment'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mgetComments[2m > [22m[2mshould include deleted comments when requested
[22m[39m[CommentsService] Created comment {
  commentId: [32m'eP7gS2XJ03wGU92sWTIQ-'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'To be deleted'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mgetComments[2m > [22m[2mshould include deleted comments when requested
[22m[39m[CommentsService] Deleted comment { commentId: [32m'eP7gS2XJ03wGU92sWTIQ-'[39m, userId: [32m'user-test-001'[39m }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mgetComments[2m > [22m[2mshould return empty array for entity with no comments
[22m[39m[CommentsService] Created comment {
  commentId: [32m'JHTvMWKpXnarQ1RMUr0nl'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'First comment'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mgetComments[2m > [22m[2mshould return empty array for entity with no comments
[22m[39m[CommentsService] Created comment {
  commentId: [32m'KOTxOyn7FaBb4SR1Pnth4'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Second comment'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mgetComment[2m > [22m[2mshould retrieve single comment by ID
[22m[39m[CommentsService] Created comment {
  commentId: [32m'WnoL-7SymWDR-X-u4wOI6'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Test comment'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mgetComment[2m > [22m[2mshould reject comment from different company
[22m[39m[CommentsService] Created comment {
  commentId: [32m'XNRCDH8oZmQO00UZcf9Ww'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Test comment'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstderr[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mgetComment[2m > [22m[2mshould reject comment from different company
[22m[39m[CommentsService] Failed to get comment {
  error: Error: Comment does not belong to this company
      at CommentsService.getComment (C:/Users/Admin/graceful_books/src/services/comments.service.ts:232:15)
  [90m    at runNextTicks (node:internal/process/task_queues:64:5)[39m
  [90m    at processImmediate (node:internal/timers:472:9)[39m
      at C:/Users/Admin/graceful_books/src/services/comments.service.test.ts:438:7
      at [90mfile:///C:/Users/Admin/graceful_books/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:20,
  commentId: [32m'XNRCDH8oZmQO00UZcf9Ww'[39m
}

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mbuildCommentThread[2m > [22m[2mshould build simple thread with one level of replies
[22m[39m[CommentsService] Created comment {
  commentId: [32m'QABwt00rLaPIzho2sGn-a'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Parent'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mbuildCommentThread[2m > [22m[2mshould build simple thread with one level of replies
[22m[39m[CommentsService] Created comment {
  commentId: [32m'6QIqdvoXUiFbM-l7wZy0G'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [32m'QABwt00rLaPIzho2sGn-a'[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Reply 1'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mbuildCommentThread[2m > [22m[2mshould build simple thread with one level of replies
[22m[39m[CommentsService] Created comment {
  commentId: [32m'DenG_De2LAlAL68FJOk2Z'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [32m'QABwt00rLaPIzho2sGn-a'[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Reply 2'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mbuildCommentThread[2m > [22m[2mshould build simple thread with one level of replies
[22m[39m[CommentsService] Built comment thread {
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  totalComments: [33m3[39m,
  topLevelComments: [33m1[39m,
  threads: [33m1[39m
}

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mbuildCommentThread[2m > [22m[2mshould build nested thread with multiple levels
[22m[39m[CommentsService] Created comment {
  commentId: [32m'RxuRtbVrXPPoXqBv_uoJJ'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Level 0'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mbuildCommentThread[2m > [22m[2mshould build nested thread with multiple levels
[22m[39m[CommentsService] Created comment {
  commentId: [32m'aPUPBT7bOq-0shSPg5zk9'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [32m'RxuRtbVrXPPoXqBv_uoJJ'[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Level 1'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mbuildCommentThread[2m > [22m[2mshould build nested thread with multiple levels
[22m[39m[CommentsService] Created comment {
  commentId: [32m'VLbTwwJcMX9pmwC_tWfHk'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [32m'aPUPBT7bOq-0shSPg5zk9'[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Level 2'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mbuildCommentThread[2m > [22m[2mshould build nested thread with multiple levels
[22m[39m[CommentsService] Built comment thread {
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  totalComments: [33m3[39m,
  topLevelComments: [33m1[39m,
  threads: [33m1[39m
}

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mbuildCommentThread[2m > [22m[2mshould respect maxDepth parameter
[22m[39m[CommentsService] Created comment {
  commentId: [32m'-GMqrRSYRC2pmNnFxKnli'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [1mnull[22m
}
[MentionsService] Parsed mentions from text { text: [32m'Level 0'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mbuildCommentThread[2m > [22m[2mshould respect maxDepth parameter
[22m[39m[CommentsService] Created comment {
  commentId: [32m'IceJI8IgMCtgLm0f-alCW'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [32m'-GMqrRSYRC2pmNnFxKnli'[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Level 1'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mbuildCommentThread[2m > [22m[2mshould respect maxDepth parameter
[22m[39m[CommentsService] Created comment {
  commentId: [32m'NT4wjW7kUWqmAIy_Fs8ib'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [32m'IceJI8IgMCtgLm0f-alCW'[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Level 2'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mbuildCommentThread[2m > [22m[2mshould respect maxDepth parameter
[22m[39m[CommentsService] Created comment {
  commentId: [32m'xrXIQy_ji-ELnVLE9be8r'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [32m'NT4wjW7kUWqmAIy_Fs8ib'[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Level 3'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mbuildCommentThread[2m > [22m[2mshould respect maxDepth parameter
[22m[39m[CommentsService] Created comment {
  commentId: [32m'dJy6qQ8bSg-BkjO_p6Dvt'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [32m'xrXIQy_ji-ELnVLE9be8r'[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Level 4'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mbuildCommentThread[2m > [22m[2mshould respect maxDepth parameter
[22m[39m[CommentsService] Created comment {
  commentId: [32m'DTw50jGiPXArAxESIR73V'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [32m'dJy6qQ8bSg-BkjO_p6Dvt'[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Level 5'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mbuildCommentThread[2m > [22m[2mshould respect maxDepth parameter
[22m[39m[CommentsService] Built comment thread {
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  totalComments: [33m6[39m,
  topLevelComments: [33m1[39m,
  threads: [33m1[39m
}

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mbuildCommentThread[2m > [22m[2mshould handle multiple top-level threads
[22m[39m[CommentsService] Created comment {
  commentId: [32m'NwzFOfUJilpr2YyzfJQWp'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Thread 1'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mbuildCommentThread[2m > [22m[2mshould handle multiple top-level threads
[22m[39m[CommentsService] Created comment {
  commentId: [32m'JaGMSbo4dj-tw1IniRTzI'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Thread 2'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mbuildCommentThread[2m > [22m[2mshould handle multiple top-level threads
[22m[39m[CommentsService] Created comment {
  commentId: [32m'3lew-9m2LTR--pDze97r8'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Thread 3'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mbuildCommentThread[2m > [22m[2mshould handle multiple top-level threads
[22m[39m[CommentsService] Built comment thread {
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  totalComments: [33m3[39m,
  topLevelComments: [33m3[39m,
  threads: [33m3[39m
}

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mupdateComment[2m > [22m[2mshould update comment content successfully
[22m[39m[CommentsService] Created comment {
  commentId: [32m'HoHTo3fMk2DrGkrBHHVUF'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Original content'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mupdateComment[2m > [22m[2mshould update comment content successfully
[22m[39m[MentionsService] Parsed mentions from text { text: [32m'Updated content'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mupdateComment[2m > [22m[2mshould update comment content successfully
[22m[39m[CommentsService] Updated comment {
  commentId: [32m'HoHTo3fMk2DrGkrBHHVUF'[39m,
  userId: [32m'user-test-001'[39m,
  contentChanged: [33mtrue[39m
}

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mupdateComment[2m > [22m[2mshould update comment metadata
[22m[39m[CommentsService] Created comment {
  commentId: [32m'2MF65V9eYqIbQdpcDEr_g'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Test comment'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mupdateComment[2m > [22m[2mshould update comment metadata
[22m[39m[CommentsService] Updated comment {
  commentId: [32m'2MF65V9eYqIbQdpcDEr_g'[39m,
  userId: [32m'user-test-001'[39m,
  contentChanged: [33mfalse[39m
}

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mupdateComment[2m > [22m[2mshould reprocess mentions when content changes
[22m[39m[CommentsService] Created comment {
  commentId: [32m'j3h3yFFm1c7vVH9IqRlfU'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Original comment'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mupdateComment[2m > [22m[2mshould reprocess mentions when content changes
[22m[39m[MentionsService] Parsed mentions from text {
  text: [32m'Hey @testuser2, check this out'[39m,
  mentionsCount: [33m1[39m,
  usernames: [ [32m'testuser2'[39m ]
}

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mupdateComment[2m > [22m[2mshould reprocess mentions when content changes
[22m[39m[MentionsService] Validated mentions { totalMentions: [33m1[39m, validMentions: [33m1[39m, invalidMentions: [33m0[39m }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mupdateComment[2m > [22m[2mshould reprocess mentions when content changes
[22m[39m[MentionsService] Created mention {
  mentionId: [32m'TjvzdGfh7T2Ktj_3UuRbv'[39m,
  mentionedUserId: [32m'user-test-002'[39m,
  mentioningUserId: [32m'user-test-001'[39m,
  commentId: [32m'j3h3yFFm1c7vVH9IqRlfU'[39m
}
[MentionsService] Created mentions for comment {
  commentId: [32m'j3h3yFFm1c7vVH9IqRlfU'[39m,
  mentionsCreated: [33m1[39m,
  notificationsScheduled: [33m1[39m,
  checklistItemsCreated: [33m0[39m,
  errors: [33m0[39m
}

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mupdateComment[2m > [22m[2mshould reprocess mentions when content changes
[22m[39m[CommentsService] Updated comment {
  commentId: [32m'j3h3yFFm1c7vVH9IqRlfU'[39m,
  userId: [32m'user-test-001'[39m,
  contentChanged: [33mtrue[39m
}

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mupdateComment[2m > [22m[2mshould reject update after 15 minute window
[22m[39m[CommentsService] Created comment {
  commentId: [32m'h6DIJvE7ceGAvm-uDkyob'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Old comment'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstderr[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mupdateComment[2m > [22m[2mshould reject update after 15 minute window
[22m[39m[CommentsService] Failed to update comment {
  error: Error: Cannot edit this comment (must be author and within 15 minute window)
      at CommentsService.updateComment (C:/Users/Admin/graceful_books/src/services/comments.service.ts:335:15)
  [90m    at runNextTicks (node:internal/process/task_queues:64:5)[39m
  [90m    at processImmediate (node:internal/timers:472:9)[39m
      at C:/Users/Admin/graceful_books/src/services/comments.service.test.ts:638:7
      at [90mfile:///C:/Users/Admin/graceful_books/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:20,
  commentId: [32m'h6DIJvE7ceGAvm-uDkyob'[39m
}

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mupdateComment[2m > [22m[2mshould reject update by non-author
[22m[39m[CommentsService] Created comment {
  commentId: [32m'by3mXJSZg_o7Km-ZILydX'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'User 1 comment'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstderr[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mupdateComment[2m > [22m[2mshould reject update by non-author
[22m[39m[CommentsService] Failed to update comment {
  error: Error: Cannot edit this comment (must be author and within 15 minute window)
      at CommentsService.updateComment (C:/Users/Admin/graceful_books/src/services/comments.service.ts:335:15)
  [90m    at runNextTicks (node:internal/process/task_queues:64:5)[39m
  [90m    at processImmediate (node:internal/timers:472:9)[39m
      at C:/Users/Admin/graceful_books/src/services/comments.service.test.ts:659:7
      at [90mfile:///C:/Users/Admin/graceful_books/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:20,
  commentId: [32m'by3mXJSZg_o7Km-ZILydX'[39m
}

[90mstderr[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mupdateComment[2m > [22m[2mshould reject update of non-existent comment
[22m[39m[CommentsService] Failed to update comment {
  error: Error: Comment not found
      at CommentsService.updateComment (C:/Users/Admin/graceful_books/src/services/comments.service.ts:326:15)
  [90m    at runNextTicks (node:internal/process/task_queues:64:5)[39m
  [90m    at processImmediate (node:internal/timers:472:9)[39m
      at C:/Users/Admin/graceful_books/src/services/comments.service.test.ts:667:7
      at [90mfile:///C:/Users/Admin/graceful_books/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:20,
  commentId: [32m'non-existent-id'[39m
}

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mupdateComment[2m > [22m[2mshould increment version vector on update
[22m[39m[CommentsService] Created comment {
  commentId: [32m'uQCkZZ40D6bDgCiEs41m7'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Original'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mupdateComment[2m > [22m[2mshould increment version vector on update
[22m[39m[MentionsService] Parsed mentions from text { text: [32m'Updated'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mupdateComment[2m > [22m[2mshould increment version vector on update
[22m[39m[CommentsService] Updated comment {
  commentId: [32m'uQCkZZ40D6bDgCiEs41m7'[39m,
  userId: [32m'user-test-001'[39m,
  contentChanged: [33mtrue[39m
}

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mdeleteComment[2m > [22m[2mshould soft delete comment successfully
[22m[39m[CommentsService] Created comment {
  commentId: [32m'e3Ft-lDCsYPk5pAZqyucz'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'To be deleted'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mdeleteComment[2m > [22m[2mshould soft delete comment successfully
[22m[39m[CommentsService] Deleted comment { commentId: [32m'e3Ft-lDCsYPk5pAZqyucz'[39m, userId: [32m'user-test-001'[39m }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mdeleteComment[2m > [22m[2mshould reject delete by non-author
[22m[39m[CommentsService] Created comment {
  commentId: [32m'WMxEoZsJSD5jSquJaXKn4'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'User 1 comment'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstderr[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mdeleteComment[2m > [22m[2mshould reject delete by non-author
[22m[39m[CommentsService] Failed to delete comment {
  error: Error: Cannot delete this comment (must be author and not already deleted)
      at CommentsService.deleteComment (C:/Users/Admin/graceful_books/src/services/comments.service.ts:417:15)
  [90m    at runNextTicks (node:internal/process/task_queues:64:5)[39m
  [90m    at processImmediate (node:internal/timers:472:9)[39m
      at C:/Users/Admin/graceful_books/src/services/comments.service.test.ts:724:7
      at [90mfile:///C:/Users/Admin/graceful_books/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:20,
  commentId: [32m'WMxEoZsJSD5jSquJaXKn4'[39m
}

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mdeleteComment[2m > [22m[2mshould reject delete of already deleted comment
[22m[39m[CommentsService] Created comment {
  commentId: [32m'hgdmlbipKiiDMdj9Qcm7j'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'To be deleted'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mdeleteComment[2m > [22m[2mshould reject delete of already deleted comment
[22m[39m[CommentsService] Deleted comment { commentId: [32m'hgdmlbipKiiDMdj9Qcm7j'[39m, userId: [32m'user-test-001'[39m }

[90mstderr[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mdeleteComment[2m > [22m[2mshould reject delete of already deleted comment
[22m[39m[CommentsService] Failed to delete comment {
  error: Error: Cannot delete this comment (must be author and not already deleted)
      at CommentsService.deleteComment (C:/Users/Admin/graceful_books/src/services/comments.service.ts:417:15)
  [90m    at runNextTicks (node:internal/process/task_queues:64:5)[39m
  [90m    at processImmediate (node:internal/timers:472:9)[39m
      at C:/Users/Admin/graceful_books/src/services/comments.service.test.ts:738:7
      at [90mfile:///C:/Users/Admin/graceful_books/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:20,
  commentId: [32m'hgdmlbipKiiDMdj9Qcm7j'[39m
}

[90mstderr[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mdeleteComment[2m > [22m[2mshould reject delete of non-existent comment
[22m[39m[CommentsService] Failed to delete comment {
  error: Error: Comment not found
      at CommentsService.deleteComment (C:/Users/Admin/graceful_books/src/services/comments.service.ts:408:15)
  [90m    at runNextTicks (node:internal/process/task_queues:64:5)[39m
  [90m    at processImmediate (node:internal/timers:472:9)[39m
      at C:/Users/Admin/graceful_books/src/services/comments.service.test.ts:744:7
      at [90mfile:///C:/Users/Admin/graceful_books/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:20,
  commentId: [32m'non-existent-id'[39m
}

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mdeleteComment[2m > [22m[2mshould increment version vector on delete
[22m[39m[CommentsService] Created comment {
  commentId: [32m'YO9lexe9o41tA_9EKt8vi'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'To be deleted'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mdeleteComment[2m > [22m[2mshould increment version vector on delete
[22m[39m[CommentsService] Deleted comment { commentId: [32m'YO9lexe9o41tA_9EKt8vi'[39m, userId: [32m'user-test-001'[39m }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mgetCommentCount[2m > [22m[2mshould count active comments only
[22m[39m[CommentsService] Created comment {
  commentId: [32m'3BjuOQtnUK2FZkB7MPL0R'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Comment 1'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mgetCommentCount[2m > [22m[2mshould count active comments only
[22m[39m[CommentsService] Created comment {
  commentId: [32m'A_GK9gdC0m6WQskMwqoev'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Comment 2'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mgetCommentCount[2m > [22m[2mshould count active comments only
[22m[39m[CommentsService] Created comment {
  commentId: [32m'isb1Eg6JhYR2MkR0gA1Zl'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Comment 3'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mgetCommentCount[2m > [22m[2mshould count active comments only
[22m[39m[CommentsService] Deleted comment { commentId: [32m'isb1Eg6JhYR2MkR0gA1Zl'[39m, userId: [32m'user-test-001'[39m }

[90mstdout[2m | src/services/billing.service.test.ts[2m > [22m[2mBilling Service[2m > [22m[2mcalculateAdvisorMonthlyCost[2m > [22m[2mshould calculate $0 for 0-3 clients
[22m[39m[BillingService] Calculated advisor billing {
  advisorId: [32m'test-advisor-1'[39m,
  clientCount: [33m3[39m,
  teamMemberCount: [33m0[39m,
  tier: [32m'free'[39m,
  totalMonthlyCost: [33m0[39m
}

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2msearchComments[2m > [22m[2mshould search comments by content (case-insensitive)
[22m[39m[CommentsService] Created comment {
  commentId: [32m'VuVPRvyzxoEHeoKPgaZVv'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text {
  text: [32m'This contains the word apple'[39m,
  mentionsCount: [33m0[39m,
  usernames: []
}

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2msearchComments[2m > [22m[2mshould search comments by content (case-insensitive)
[22m[39m[CommentsService] Created comment {
  commentId: [32m'MCUxQJN2pKAC5cO41BspO'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text {
  text: [32m'This contains the word banana'[39m,
  mentionsCount: [33m0[39m,
  usernames: []
}

[90mstdout[2m | src/services/billing.service.test.ts[2m > [22m[2mBilling Service[2m > [22m[2mcalculateAdvisorMonthlyCost[2m > [22m[2mshould calculate $50 for 4-50 clients
[22m[39m[BillingService] Calculated advisor billing {
  advisorId: [32m'test-advisor-1'[39m,
  clientCount: [33m25[39m,
  teamMemberCount: [33m0[39m,
  tier: [32m'tier_1'[39m,
  totalMonthlyCost: [33m5000[39m
}

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2msearchComments[2m > [22m[2mshould search comments by content (case-insensitive)
[22m[39m[CommentsService] Created comment {
  commentId: [32m'E48O8BKXjyAp8-ousPwCb'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text {
  text: [32m'This contains the word APPLE in uppercase'[39m,
  mentionsCount: [33m0[39m,
  usernames: []
}

[90mstdout[2m | src/services/billing.service.test.ts[2m > [22m[2mBilling Service[2m > [22m[2mcalculateAdvisorMonthlyCost[2m > [22m[2mshould calculate $100 for 51-100 clients
[22m[39m[BillingService] Calculated advisor billing {
  advisorId: [32m'test-advisor-1'[39m,
  clientCount: [33m75[39m,
  teamMemberCount: [33m0[39m,
  tier: [32m'tier_2'[39m,
  totalMonthlyCost: [33m10000[39m
}

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2msearchComments[2m > [22m[2mshould filter by commentable type
[22m[39m[CommentsService] Created comment {
  commentId: [32m'D87PA_QYmiF_Cy0_qCMyc'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text {
  text: [32m'This contains the word apple'[39m,
  mentionsCount: [33m0[39m,
  usernames: []
}

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2msearchComments[2m > [22m[2mshould filter by commentable type
[22m[39m[CommentsService] Created comment {
  commentId: [32m'rlDgdutNvhYWQs8NYPrYy'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text {
  text: [32m'This contains the word banana'[39m,
  mentionsCount: [33m0[39m,
  usernames: []
}

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2msearchComments[2m > [22m[2mshould filter by commentable type
[22m[39m[CommentsService] Created comment {
  commentId: [32m'3UCq9xYm4hbkpXovDbJf-'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text {
  text: [32m'This contains the word APPLE in uppercase'[39m,
  mentionsCount: [33m0[39m,
  usernames: []
}

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2msearchComments[2m > [22m[2mshould limit search results
[22m[39m[CommentsService] Created comment {
  commentId: [32m'eRcW6F97CRj__yzuHxlla'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text {
  text: [32m'This contains the word apple'[39m,
  mentionsCount: [33m0[39m,
  usernames: []
}

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2msearchComments[2m > [22m[2mshould limit search results
[22m[39m[CommentsService] Created comment {
  commentId: [32m'NowfJ7D74qO7FkV7woZte'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text {
  text: [32m'This contains the word banana'[39m,
  mentionsCount: [33m0[39m,
  usernames: []
}

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2msearchComments[2m > [22m[2mshould limit search results
[22m[39m[CommentsService] Created comment {
  commentId: [32m'JW0OyhXOW02iIsLY9flHj'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text {
  text: [32m'This contains the word APPLE in uppercase'[39m,
  mentionsCount: [33m0[39m,
  usernames: []
}

[90mstdout[2m | src/services/billing.service.test.ts[2m > [22m[2mBilling Service[2m > [22m[2mcalculateAdvisorMonthlyCost[2m > [22m[2mshould calculate $150 for 101-150 clients
[22m[39m[BillingService] Calculated advisor billing {
  advisorId: [32m'test-advisor-1'[39m,
  clientCount: [33m125[39m,
  teamMemberCount: [33m0[39m,
  tier: [32m'tier_3'[39m,
  totalMonthlyCost: [33m15000[39m
}

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2msearchComments[2m > [22m[2mshould exclude deleted comments from search
[22m[39m[CommentsService] Created comment {
  commentId: [32m'SEf0374HEnJQ1_MWPhibi'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text {
  text: [32m'This contains the word apple'[39m,
  mentionsCount: [33m0[39m,
  usernames: []
}

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2msearchComments[2m > [22m[2mshould exclude deleted comments from search
[22m[39m[CommentsService] Created comment {
  commentId: [32m'7FIVTno-r4i83nIqvtShd'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text {
  text: [32m'This contains the word banana'[39m,
  mentionsCount: [33m0[39m,
  usernames: []
}

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2msearchComments[2m > [22m[2mshould exclude deleted comments from search
[22m[39m[CommentsService] Created comment {
  commentId: [32m'dJqsDKSACozy4oJx3cI_D'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text {
  text: [32m'This contains the word APPLE in uppercase'[39m,
  mentionsCount: [33m0[39m,
  usernames: []
}

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2msearchComments[2m > [22m[2mshould exclude deleted comments from search
[22m[39m[CommentsService] Created comment {
  commentId: [32m'YQssnUFzunHajaULrCXtI'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Contains apple but deleted'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2msearchComments[2m > [22m[2mshould exclude deleted comments from search
[22m[39m[CommentsService] Deleted comment { commentId: [32m'YQssnUFzunHajaULrCXtI'[39m, userId: [32m'user-test-001'[39m }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2msearchComments[2m > [22m[2mshould return empty array when no matches
[22m[39m[CommentsService] Created comment {
  commentId: [32m'NrGNuePsum4WcbYDBX1Ai'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text {
  text: [32m'This contains the word apple'[39m,
  mentionsCount: [33m0[39m,
  usernames: []
}

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2msearchComments[2m > [22m[2mshould return empty array when no matches
[22m[39m[CommentsService] Created comment {
  commentId: [32m'Lk5RJXEp1g6MrlMXX8WLJ'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text {
  text: [32m'This contains the word banana'[39m,
  mentionsCount: [33m0[39m,
  usernames: []
}

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2msearchComments[2m > [22m[2mshould return empty array when no matches
[22m[39m[CommentsService] Created comment {
  commentId: [32m'Pkm1ZRREZgPNdbkavRB2w'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text {
  text: [32m'This contains the word APPLE in uppercase'[39m,
  mentionsCount: [33m0[39m,
  usernames: []
}

[90mstdout[2m | src/services/billing.service.test.ts[2m > [22m[2mBilling Service[2m > [22m[2mcalculateAdvisorMonthlyCost[2m > [22m[2mshould calculate custom tier for 150+ clients
[22m[39m[BillingService] Calculated advisor billing {
  advisorId: [32m'test-advisor-1'[39m,
  clientCount: [33m200[39m,
  teamMemberCount: [33m0[39m,
  tier: [32m'custom'[39m,
  totalMonthlyCost: [33m20000[39m
}

[90mstdout[2m | src/services/billing.service.test.ts[2m > [22m[2mBilling Service[2m > [22m[2mcalculateAdvisorMonthlyCost[2m > [22m[2mshould not count pending or removed clients
[22m[39m[BillingService] Calculated advisor billing {
  advisorId: [32m'test-advisor-1'[39m,
  clientCount: [33m5[39m,
  teamMemberCount: [33m0[39m,
  tier: [32m'tier_1'[39m,
  totalMonthlyCost: [33m5000[39m
}

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mgetRecentComments[2m > [22m[2mshould retrieve recent comments across all entities
[22m[39m[CommentsService] Created comment {
  commentId: [32m'Y9mm4JZdZIZZpoXTh26s5'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Transaction comment'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/billing.service.test.ts[2m > [22m[2mBilling Service[2m > [22m[2mcalculateAdvisorMonthlyCost[2m > [22m[2mshould calculate team member charges correctly
[22m[39m[BillingService] Calculated advisor billing {
  advisorId: [32m'test-advisor-1'[39m,
  clientCount: [33m4[39m,
  teamMemberCount: [33m8[39m,
  tier: [32m'tier_1'[39m,
  totalMonthlyCost: [33m5750[39m
}

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mgetRecentComments[2m > [22m[2mshould retrieve recent comments across all entities
[22m[39m[CommentsService] Created comment {
  commentId: [32m'YASpwGOurzEIjG9iTX2aF'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'other-transaction'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Other transaction comment'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/billing.service.test.ts[2m > [22m[2mBilling Service[2m > [22m[2mcalculateAdvisorMonthlyCost[2m > [22m[2mshould calculate per-client cost correctly
[22m[39m[BillingService] Calculated advisor billing {
  advisorId: [32m'test-advisor-1'[39m,
  clientCount: [33m50[39m,
  teamMemberCount: [33m0[39m,
  tier: [32m'tier_1'[39m,
  totalMonthlyCost: [33m5000[39m
}

[90mstdout[2m | src/services/billing.service.test.ts[2m > [22m[2mBilling Service[2m > [22m[2mcalculateAdvisorMonthlyCost[2m > [22m[2mshould include charity contribution (informational)
[22m[39m[BillingService] Calculated advisor billing {
  advisorId: [32m'test-advisor-1'[39m,
  clientCount: [33m10[39m,
  teamMemberCount: [33m0[39m,
  tier: [32m'tier_1'[39m,
  totalMonthlyCost: [33m5000[39m
}

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mgetRecentComments[2m > [22m[2mshould respect limit parameter
[22m[39m[CommentsService] Created comment {
  commentId: [32m'WDoQ6aVkF2lWT_Sn9rFk7'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Comment 0'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mgetRecentComments[2m > [22m[2mshould respect limit parameter
[22m[39m[CommentsService] Created comment {
  commentId: [32m'L8JXVTSDdHo0yQiJJSnNE'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Comment 1'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mgetRecentComments[2m > [22m[2mshould respect limit parameter
[22m[39m[CommentsService] Created comment {
  commentId: [32m'GcwvF82U5TVNnCN3wscHT'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Comment 2'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mgetRecentComments[2m > [22m[2mshould respect limit parameter
[22m[39m[CommentsService] Created comment {
  commentId: [32m'UjbrBcusjxDiqjDsit5Ok'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Comment 3'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mgetRecentComments[2m > [22m[2mshould respect limit parameter
[22m[39m[CommentsService] Created comment {
  commentId: [32m'hpOoqUnNYei_2kZ54fDP8'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Comment 4'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mgetRecentComments[2m > [22m[2mshould respect limit parameter
[22m[39m[CommentsService] Created comment {
  commentId: [32m'7l8hFL_exwPr0miFR-UcM'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Comment 5'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/billing.service.test.ts[2m > [22m[2mBilling Service[2m > [22m[2maddClientToAdvisorPlan[2m > [22m[2mshould create client with pending_invitation status
[22m[39m[BillingService] Added client to advisor plan {
  advisorId: [32m'test-advisor-1'[39m,
  clientUuid: [32m'9d47a7a3-2be0-4d56-a583-37c03af5f936'[39m
}

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mgetRecentComments[2m > [22m[2mshould respect limit parameter
[22m[39m[CommentsService] Created comment {
  commentId: [32m'XreUT2k_bQif4YA4URRVJ'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Comment 6'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mgetRecentComments[2m > [22m[2mshould respect limit parameter
[22m[39m[CommentsService] Created comment {
  commentId: [32m'T4_qHW6M0_4NcC6ztvF4i'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Comment 7'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/billing.service.test.ts[2m > [22m[2mBilling Service[2m > [22m[2macceptClientInvitation[2m > [22m[2mshould activate client and start billing
[22m[39m[BillingService] Added client to advisor plan {
  advisorId: [32m'test-advisor-1'[39m,
  clientUuid: [32m'4678d8cc-a467-4905-aed8-b24f16ecb41e'[39m
}

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mgetRecentComments[2m > [22m[2mshould respect limit parameter
[22m[39m[CommentsService] Created comment {
  commentId: [32m'JNwWNdo0yrERn_dWdTYgz'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Comment 8'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mgetRecentComments[2m > [22m[2mshould respect limit parameter
[22m[39m[CommentsService] Created comment {
  commentId: [32m'qZeSHqCnkUVc00LU_88_Q'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Comment 9'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mgetRecentComments[2m > [22m[2mshould respect limit parameter
[22m[39m[CommentsService] Created comment {
  commentId: [32m'HLVQ6t6xOgyWReAtinqhH'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Comment 10'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/billing.service.test.ts[2m > [22m[2mBilling Service[2m > [22m[2macceptClientInvitation[2m > [22m[2mshould activate client and start billing
[22m[39m[BillingService] Client accepted invitation {
  advisorId: [32m'test-advisor-1'[39m,
  clientUuid: [32m'4678d8cc-a467-4905-aed8-b24f16ecb41e'[39m
}

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mgetRecentComments[2m > [22m[2mshould respect limit parameter
[22m[39m[CommentsService] Created comment {
  commentId: [32m'bL-TOoadu2zl-dJqLgEbO'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Comment 11'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mgetRecentComments[2m > [22m[2mshould respect limit parameter
[22m[39m[CommentsService] Created comment {
  commentId: [32m'6CEvw7GNeqd5rF42BuSrD'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Comment 12'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mgetRecentComments[2m > [22m[2mshould respect limit parameter
[22m[39m[CommentsService] Created comment {
  commentId: [32m'HUZBTEoDnsXXmjch07Bk9'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Comment 13'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/billing.service.test.ts[2m > [22m[2mBilling Service[2m > [22m[2mremoveClientFromAdvisorPlan[2m > [22m[2mshould mark client as removed and end billing
[22m[39m[BillingService] Added client to advisor plan {
  advisorId: [32m'test-advisor-1'[39m,
  clientUuid: [32m'a3702d0b-4e0f-40d7-b2aa-ae94348dfe7f'[39m
}

[90mstdout[2m | src/services/billing.service.test.ts[2m > [22m[2mBilling Service[2m > [22m[2mremoveClientFromAdvisorPlan[2m > [22m[2mshould mark client as removed and end billing
[22m[39m[BillingService] Client accepted invitation {
  advisorId: [32m'test-advisor-1'[39m,
  clientUuid: [32m'a3702d0b-4e0f-40d7-b2aa-ae94348dfe7f'[39m
}

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mgetRecentComments[2m > [22m[2mshould respect limit parameter
[22m[39m[CommentsService] Created comment {
  commentId: [32m'Y89VFMbpTPr_wKGLUoJ0N'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Comment 14'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/billing.service.test.ts[2m > [22m[2mBilling Service[2m > [22m[2mremoveClientFromAdvisorPlan[2m > [22m[2mshould mark client as removed and end billing
[22m[39m[BillingService] Removed client from advisor plan {
  advisorId: [32m'test-advisor-1'[39m,
  clientUuid: [32m'a3702d0b-4e0f-40d7-b2aa-ae94348dfe7f'[39m
}

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mgetRecentComments[2m > [22m[2mshould respect limit parameter
[22m[39m[CommentsService] Created comment {
  commentId: [32m'ZbCw-Dk7yeXgMLs-1ikdQ'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Comment 15'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mgetRecentComments[2m > [22m[2mshould respect limit parameter
[22m[39m[CommentsService] Created comment {
  commentId: [32m'pqFvR8NeDfZhrWfe22-Gi'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Comment 16'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mgetRecentComments[2m > [22m[2mshould respect limit parameter
[22m[39m[CommentsService] Created comment {
  commentId: [32m'YiIiriREEGSeK1x3bSECV'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Comment 17'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mgetRecentComments[2m > [22m[2mshould respect limit parameter
[22m[39m[CommentsService] Created comment {
  commentId: [32m'9WXutQjsXw3q1yifR96mb'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Comment 18'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mgetRecentComments[2m > [22m[2mshould respect limit parameter
[22m[39m[CommentsService] Created comment {
  commentId: [32m'3gLlgaUnZozLGI8VPNziZ'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Comment 19'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mgetRecentComments[2m > [22m[2mshould respect limit parameter
[22m[39m[CommentsService] Created comment {
  commentId: [32m'uwbSReMWlk1gEmdFEwizo'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Comment 20'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mgetRecentComments[2m > [22m[2mshould respect limit parameter
[22m[39m[CommentsService] Created comment {
  commentId: [32m'E61ucLGsfT2Dk_NwR5N36'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Comment 21'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mgetRecentComments[2m > [22m[2mshould respect limit parameter
[22m[39m[CommentsService] Created comment {
  commentId: [32m'sxE6kEIrEB9E_cUho37XW'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Comment 22'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mgetRecentComments[2m > [22m[2mshould respect limit parameter
[22m[39m[CommentsService] Created comment {
  commentId: [32m'htkeZv8MhCRfQZJwE6Kal'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Comment 23'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mgetRecentComments[2m > [22m[2mshould respect limit parameter
[22m[39m[CommentsService] Created comment {
  commentId: [32m'ZkRkQeHLPbqYRBUEBajrB'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Comment 24'[39m, mentionsCount: [33m0[39m, usernames: [] }

 [32mâœ“[39m src/services/billing.service.test.ts [2m([22m[2m21 tests[22m[2m)[22m[33m 692[2mms[22m[39m
[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mgetRecentComments[2m > [22m[2mshould exclude deleted comments
[22m[39m[CommentsService] Created comment {
  commentId: [32m'Xd3Kax4tDZOi6MYHpVO8z'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Deleted'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mgetRecentComments[2m > [22m[2mshould exclude deleted comments
[22m[39m[CommentsService] Deleted comment { commentId: [32m'Xd3Kax4tDZOi6MYHpVO8z'[39m, userId: [32m'user-test-001'[39m }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mgetRecentComments[2m > [22m[2mshould exclude deleted comments
[22m[39m[CommentsService] Created comment {
  commentId: [32m'xpNcwtAN3s0A6JcbVZQBx'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Active'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mgetRecentComments[2m > [22m[2mshould only return accessible comments
[22m[39m[CommentsService] Created comment {
  commentId: [32m'7ggEa6OKi2D9Xpx5alxq8'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Accessible comment'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mpermissions[2m > [22m[2mshould allow comment creation with proper permissions
[22m[39m[CommentsService] Created comment {
  commentId: [32m'-7_DHuWHmpUhZOtuLyonb'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Authorized comment'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mpermissions[2m > [22m[2mshould enforce read permissions on getComments
[22m[39m[CommentsService] Created comment {
  commentId: [32m'MdhcBrqKU7FwVaGzuLsdj'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Test comment'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstderr[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mpermissions[2m > [22m[2mshould enforce read permissions on getComments
[22m[39m[CommentsService] Permission check failed {
  error: Error: User is not a member of this company
      at CommentsService.checkPermissions (C:/Users/Admin/graceful_books/src/services/comments.service.ts:535:15)
  [90m    at runNextTicks (node:internal/process/task_queues:64:5)[39m
  [90m    at processImmediate (node:internal/timers:472:9)[39m
      at CommentsService.getComments (C:/Users/Admin/graceful_books/src/services/comments.service.ts:194:7)
      at C:/Users/Admin/graceful_books/src/services/comments.service.test.ts:980:7
      at [90mfile:///C:/Users/Admin/graceful_books/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:20,
  commentableType: [32m'TRANSACTION'[39m,
  action: [32m'read'[39m
}

[90mstderr[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mpermissions[2m > [22m[2mshould enforce read permissions on getComments
[22m[39m[CommentsService] Failed to get comments {
  error: Error: User is not a member of this company
      at CommentsService.checkPermissions (C:/Users/Admin/graceful_books/src/services/comments.service.ts:535:15)
  [90m    at runNextTicks (node:internal/process/task_queues:64:5)[39m
  [90m    at processImmediate (node:internal/timers:472:9)[39m
      at CommentsService.getComments (C:/Users/Admin/graceful_books/src/services/comments.service.ts:194:7)
      at C:/Users/Admin/graceful_books/src/services/comments.service.test.ts:980:7
      at [90mfile:///C:/Users/Admin/graceful_books/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:20,
  query: {
    company_id: [32m'company-test-001'[39m,
    commentable_type: [32m'TRANSACTION'[39m,
    commentable_id: [32m'transaction-test-001'[39m
  }
}

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mpermissions[2m > [22m[2mshould enforce update permissions
[22m[39m[CommentsService] Created comment {
  commentId: [32m'suFIo06cYFIhtjvfzVYB6'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Test comment'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstderr[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mpermissions[2m > [22m[2mshould enforce update permissions
[22m[39m[CommentsService] Permission check failed {
  error: Error: Missing permission: transactions.update
      at CommentsService.checkPermissions (C:/Users/Admin/graceful_books/src/services/comments.service.ts:554:15)
      at CommentsService.updateComment (C:/Users/Admin/graceful_books/src/services/comments.service.ts:339:7)
      at C:/Users/Admin/graceful_books/src/services/comments.service.test.ts:1001:7
      at [90mfile:///C:/Users/Admin/graceful_books/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:20,
  commentableType: [32m'TRANSACTION'[39m,
  action: [32m'update'[39m
}

[90mstderr[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mpermissions[2m > [22m[2mshould enforce update permissions
[22m[39m[CommentsService] Failed to update comment {
  error: Error: Missing permission: transactions.update
      at CommentsService.checkPermissions (C:/Users/Admin/graceful_books/src/services/comments.service.ts:554:15)
      at CommentsService.updateComment (C:/Users/Admin/graceful_books/src/services/comments.service.ts:339:7)
      at C:/Users/Admin/graceful_books/src/services/comments.service.test.ts:1001:7
      at [90mfile:///C:/Users/Admin/graceful_books/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:20,
  commentId: [32m'suFIo06cYFIhtjvfzVYB6'[39m
}

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mpermissions[2m > [22m[2mshould enforce delete permissions
[22m[39m[CommentsService] Created comment {
  commentId: [32m'DvnzDTLzWaEuUnh5az6EA'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Test comment'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstderr[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mpermissions[2m > [22m[2mshould enforce delete permissions
[22m[39m[CommentsService] Permission check failed {
  error: Error: Missing permission: transactions.delete
      at CommentsService.checkPermissions (C:/Users/Admin/graceful_books/src/services/comments.service.ts:554:15)
      at CommentsService.deleteComment (C:/Users/Admin/graceful_books/src/services/comments.service.ts:421:7)
      at C:/Users/Admin/graceful_books/src/services/comments.service.test.ts:1020:7
      at [90mfile:///C:/Users/Admin/graceful_books/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:20,
  commentableType: [32m'TRANSACTION'[39m,
  action: [32m'delete'[39m
}

[90mstderr[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2mpermissions[2m > [22m[2mshould enforce delete permissions
[22m[39m[CommentsService] Failed to delete comment {
  error: Error: Missing permission: transactions.delete
      at CommentsService.checkPermissions (C:/Users/Admin/graceful_books/src/services/comments.service.ts:554:15)
      at CommentsService.deleteComment (C:/Users/Admin/graceful_books/src/services/comments.service.ts:421:7)
      at C:/Users/Admin/graceful_books/src/services/comments.service.test.ts:1020:7
      at [90mfile:///C:/Users/Admin/graceful_books/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:20,
  commentId: [32m'DvnzDTLzWaEuUnh5az6EA'[39m
}

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2medge cases[2m > [22m[2mshould handle very long comment threads gracefully
[22m[39m[CommentsService] Created comment {
  commentId: [32m'h0lFXKxWH-GWwCRuQQVsy'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [1mnull[22m
}
[MentionsService] Parsed mentions from text { text: [32m'Level 0'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2medge cases[2m > [22m[2mshould handle very long comment threads gracefully
[22m[39m[CommentsService] Created comment {
  commentId: [32m'-DgNKnLVPHh951IKM2OkU'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [32m'h0lFXKxWH-GWwCRuQQVsy'[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Level 1'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2medge cases[2m > [22m[2mshould handle very long comment threads gracefully
[22m[39m[CommentsService] Created comment {
  commentId: [32m'SfajUtVGHZT74S-FnEvkP'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [32m'-DgNKnLVPHh951IKM2OkU'[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Level 2'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2medge cases[2m > [22m[2mshould handle very long comment threads gracefully
[22m[39m[CommentsService] Created comment {
  commentId: [32m'-8ILmX9AKk29_yIdj_A94'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [32m'SfajUtVGHZT74S-FnEvkP'[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Level 3'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2medge cases[2m > [22m[2mshould handle very long comment threads gracefully
[22m[39m[CommentsService] Created comment {
  commentId: [32m'fMVFNMqNG43Yu2oooAqor'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [32m'-8ILmX9AKk29_yIdj_A94'[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Level 4'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2medge cases[2m > [22m[2mshould handle very long comment threads gracefully
[22m[39m[CommentsService] Created comment {
  commentId: [32m'VLn0mLRt7uE6M1FTEJpg3'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [32m'fMVFNMqNG43Yu2oooAqor'[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Level 5'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2medge cases[2m > [22m[2mshould handle very long comment threads gracefully
[22m[39m[CommentsService] Created comment {
  commentId: [32m'NcxhFIMMfPSZJXmuVQZRy'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [32m'VLn0mLRt7uE6M1FTEJpg3'[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Level 6'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2medge cases[2m > [22m[2mshould handle very long comment threads gracefully
[22m[39m[CommentsService] Created comment {
  commentId: [32m'4kPa3MF_R3hnQP2cupWRP'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [32m'NcxhFIMMfPSZJXmuVQZRy'[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Level 7'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2medge cases[2m > [22m[2mshould handle very long comment threads gracefully
[22m[39m[CommentsService] Created comment {
  commentId: [32m'yHX_7yuEL1zkk2yql2LeD'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [32m'4kPa3MF_R3hnQP2cupWRP'[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Level 8'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2medge cases[2m > [22m[2mshould handle very long comment threads gracefully
[22m[39m[CommentsService] Created comment {
  commentId: [32m'gzBesr6gbYuPQJ_9rJC5L'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [32m'yHX_7yuEL1zkk2yql2LeD'[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Level 9'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2medge cases[2m > [22m[2mshould handle very long comment threads gracefully
[22m[39m[CommentsService] Built comment thread {
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  totalComments: [33m10[39m,
  topLevelComments: [33m1[39m,
  threads: [33m1[39m
}

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2medge cases[2m > [22m[2mshould handle special characters in comment content
[22m[39m[CommentsService] Created comment {
  commentId: [32m'aFrd-O6xgLC8jkw_Y_LF7'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text {
  text: [32m`Special chars: @#$%^&*() "quotes" 'apostrophes' <html>`[39m,
  mentionsCount: [33m0[39m,
  usernames: []
}

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2medge cases[2m > [22m[2mshould handle multiple mentions of same user
[22m[39m[CommentsService] Created comment {
  commentId: [32m'G6nWVJ4uxBruD42X8m35j'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text {
  text: [32m'@testuser2 please review. Hey @testuser2, did you see this?'[39m,
  mentionsCount: [33m1[39m,
  usernames: [ [32m'testuser2'[39m ]
}

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2medge cases[2m > [22m[2mshould handle multiple mentions of same user
[22m[39m[MentionsService] Validated mentions { totalMentions: [33m1[39m, validMentions: [33m1[39m, invalidMentions: [33m0[39m }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2medge cases[2m > [22m[2mshould handle multiple mentions of same user
[22m[39m[MentionsService] Created mention {
  mentionId: [32m'kb3oe6CQALBKwTHXSfm-w'[39m,
  mentionedUserId: [32m'user-test-002'[39m,
  mentioningUserId: [32m'user-test-001'[39m,
  commentId: [32m'G6nWVJ4uxBruD42X8m35j'[39m
}
[MentionsService] Created mentions for comment {
  commentId: [32m'G6nWVJ4uxBruD42X8m35j'[39m,
  mentionsCreated: [33m1[39m,
  notificationsScheduled: [33m1[39m,
  checklistItemsCreated: [33m0[39m,
  errors: [33m0[39m
}

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2medge cases[2m > [22m[2mshould handle concurrent comment creation
[22m[39m[CommentsService] Created comment {
  commentId: [32m'BEPBcGPk9BUPBPk0Y7hrn'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Concurrent comment 0'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2medge cases[2m > [22m[2mshould handle concurrent comment creation
[22m[39m[CommentsService] Created comment {
  commentId: [32m'XOsOjYYWRR1JV2eQ0XFHr'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Concurrent comment 1'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2medge cases[2m > [22m[2mshould handle concurrent comment creation
[22m[39m[CommentsService] Created comment {
  commentId: [32m'bUvHiz75Mj-6zFnslph07'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Concurrent comment 2'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2medge cases[2m > [22m[2mshould handle concurrent comment creation
[22m[39m[CommentsService] Created comment {
  commentId: [32m'NFEiaIylLxIChWNM3GyuN'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Concurrent comment 3'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2medge cases[2m > [22m[2mshould handle concurrent comment creation
[22m[39m[CommentsService] Created comment {
  commentId: [32m'w4eVr5DnMEMuKgAklinrP'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Concurrent comment 4'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2medge cases[2m > [22m[2mshould handle concurrent comment creation
[22m[39m[CommentsService] Created comment {
  commentId: [32m'qRVk4cbJ_LN2WgLwBuIuL'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Concurrent comment 5'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2medge cases[2m > [22m[2mshould handle concurrent comment creation
[22m[39m[CommentsService] Created comment {
  commentId: [32m'6QZCBADI_LYYMyD3L9g3G'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Concurrent comment 6'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2medge cases[2m > [22m[2mshould handle concurrent comment creation
[22m[39m[CommentsService] Created comment {
  commentId: [32m'vamDuAjAvLuFVtkEJwMWj'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Concurrent comment 7'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2medge cases[2m > [22m[2mshould handle concurrent comment creation
[22m[39m[CommentsService] Created comment {
  commentId: [32m'L5f4IOUdBZfcG_dzG5B-1'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Concurrent comment 8'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2medge cases[2m > [22m[2mshould handle concurrent comment creation
[22m[39m[CommentsService] Created comment {
  commentId: [32m'F5dBWG6xJyW1uIKHI0-Ui'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Concurrent comment 9'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2medge cases[2m > [22m[2mshould preserve comment order by creation time
[22m[39m[CommentsService] Created comment {
  commentId: [32m'mR-eXxVDlu5E1-tmyfr8V'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Comment 0'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2medge cases[2m > [22m[2mshould preserve comment order by creation time
[22m[39m[CommentsService] Created comment {
  commentId: [32m'Dn8u_g4Y9YGSWKokfXUdr'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Comment 1'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2medge cases[2m > [22m[2mshould preserve comment order by creation time
[22m[39m[CommentsService] Created comment {
  commentId: [32m'hBCR3iS0uVpa5Dw5DoPcA'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Comment 2'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2medge cases[2m > [22m[2mshould preserve comment order by creation time
[22m[39m[CommentsService] Created comment {
  commentId: [32m'HZ3cxc-1OCZjwKHhiQQ-f'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Comment 3'[39m, mentionsCount: [33m0[39m, usernames: [] }

[90mstdout[2m | src/services/comments.service.test.ts[2m > [22m[2mCommentsService[2m > [22m[2medge cases[2m > [22m[2mshould preserve comment order by creation time
[22m[39m[CommentsService] Created comment {
  commentId: [32m'yAD_uOE_yzQLg9P4uzFU0'[39m,
  commentableType: [32m'TRANSACTION'[39m,
  commentableId: [32m'transaction-test-001'[39m,
  authorUserId: [32m'user-test-001'[39m,
  parentCommentId: [90mundefined[39m
}
[MentionsService] Parsed mentions from text { text: [32m'Comment 4'[39m, mentionsCount: [33m0[39m, usernames: [] }

 [32mâœ“[39m src/services/comments.service.test.ts [2m([22m[2m53 tests[22m[2m)[22m[33m 2941[2mms[22m[39m
[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2msendNotification[2m > [22m[2mshould send notification with DISC-adapted message
[22m[39m[MultiUserNotification] Email notification queued { userId: [32m'user-456'[39m, notificationId: [32m'28bVGDAJ-FjM3l9g4S_ZX'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2msendNotification[2m > [22m[2mshould send notification with DISC-adapted message
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_INVITED'[39m, channel: [32m'BOTH'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2msendNotification[2m > [22m[2mshould use correct DISC variant for Dominance (D)
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'KEY_ROTATION_STARTED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2msendNotification[2m > [22m[2mshould use correct DISC variant for Influence (I)
[22m[39m[MultiUserNotification] Notification sent {
  userId: [32m'user-456'[39m,
  type: [32m'KEY_ROTATION_COMPLETED'[39m,
  channel: [32m'IN_APP'[39m
}

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2msendNotification[2m > [22m[2mshould use correct DISC variant for Steadiness (S)
[22m[39m[MultiUserNotification] Email notification queued { userId: [32m'user-456'[39m, notificationId: [32m'wsaVktZynj0-guNjqQ3wA'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2msendNotification[2m > [22m[2mshould use correct DISC variant for Steadiness (S)
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_ACCESS_REVOKED'[39m, channel: [32m'BOTH'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2msendNotification[2m > [22m[2mshould use correct DISC variant for Conscientiousness (C)
[22m[39m[MultiUserNotification] Notification sent {
  userId: [32m'user-456'[39m,
  type: [32m'KEY_ROTATION_COMPLETED'[39m,
  channel: [32m'IN_APP'[39m
}

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2msendNotification[2m > [22m[2mshould interpolate variables in messages
[22m[39m[MultiUserNotification] Email notification queued { userId: [32m'user-456'[39m, notificationId: [32m'8tG9MbCv7wJDCHnGlH_nc'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2msendNotification[2m > [22m[2mshould interpolate variables in messages
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_ROLE_CHANGED'[39m, channel: [32m'BOTH'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2msendNotification[2m > [22m[2mshould respect user disabled notification types
[22m[39m[MultiUserNotification] Notification preferences updated { userId: [32m'user-456'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2msendNotification[2m > [22m[2mshould respect user disabled notification types
[22m[39m[MultiUserNotification] Notification disabled by user { userId: [32m'user-456'[39m, type: [32m'USER_INVITED'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2msendNotification[2m > [22m[2mshould respect quiet hours for non-urgent notifications
[22m[39m[MultiUserNotification] Notification preferences updated { userId: [32m'user-456'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2msendNotification[2m > [22m[2mshould respect quiet hours for non-urgent notifications
[22m[39m[MultiUserNotification] User in quiet hours { userId: [32m'user-456'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2msendNotification[2m > [22m[2mshould bypass quiet hours for urgent notifications
[22m[39m[MultiUserNotification] Notification preferences updated { userId: [32m'user-456'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2msendNotification[2m > [22m[2mshould bypass quiet hours for urgent notifications
[22m[39m[MultiUserNotification] User in quiet hours { userId: [32m'user-456'[39m }
[MultiUserNotification] Email notification queued { userId: [32m'user-456'[39m, notificationId: [32m'JOxmAU5ZqzP_ngtlni28-'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2msendNotification[2m > [22m[2mshould bypass quiet hours for urgent notifications
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'SUSPICIOUS_ACTIVITY'[39m, channel: [32m'BOTH'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2msendNotification[2m > [22m[2mshould create in-app notification
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Types Coverage[2m > [22m[2mshould send notification for 'USER_INVITED'
[22m[39m[MultiUserNotification] Email notification queued { userId: [32m'user-456'[39m, notificationId: [32m'T6eNsbowX_h_vcBQOoFEW'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Types Coverage[2m > [22m[2mshould send notification for 'USER_INVITED'
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_INVITED'[39m, channel: [32m'BOTH'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Types Coverage[2m > [22m[2mshould send notification for 'USER_JOINED'
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Types Coverage[2m > [22m[2mshould send notification for 'USER_ROLE_CHANGED'
[22m[39m[MultiUserNotification] Email notification queued { userId: [32m'user-456'[39m, notificationId: [32m'o6tWptjBkC0DZyUrMeW0K'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Types Coverage[2m > [22m[2mshould send notification for 'USER_ROLE_CHANGED'
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_ROLE_CHANGED'[39m, channel: [32m'BOTH'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Types Coverage[2m > [22m[2mshould send notification for 'USER_ACCESS_REVOKED'
[22m[39m[MultiUserNotification] Email notification queued { userId: [32m'user-456'[39m, notificationId: [32m'GRUZl7r1gjc_6a_xv61ZC'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Types Coverage[2m > [22m[2mshould send notification for 'USER_ACCESS_REVOKED'
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_ACCESS_REVOKED'[39m, channel: [32m'BOTH'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Types Coverage[2m > [22m[2mshould send notification for 'USER_ACCESS_RESTORED'
[22m[39m[MultiUserNotification] Email notification queued { userId: [32m'user-456'[39m, notificationId: [32m'gGL3nI_U6c-8Y2AyX7UyW'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Types Coverage[2m > [22m[2mshould send notification for 'USER_ACCESS_RESTORED'
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_ACCESS_RESTORED'[39m, channel: [32m'BOTH'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Types Coverage[2m > [22m[2mshould send notification for 'KEY_ROTATION_STARTED'
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'KEY_ROTATION_STARTED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Types Coverage[2m > [22m[2mshould send notification for 'KEY_ROTATION_COMPLETED'
[22m[39m[MultiUserNotification] Notification sent {
  userId: [32m'user-456'[39m,
  type: [32m'KEY_ROTATION_COMPLETED'[39m,
  channel: [32m'IN_APP'[39m
}

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Types Coverage[2m > [22m[2mshould send notification for 'KEY_ROTATION_FAILED'
[22m[39m[MultiUserNotification] Email notification queued { userId: [32m'user-456'[39m, notificationId: [32m'GXWMe46D6wb6FRn9NVCHX'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Types Coverage[2m > [22m[2mshould send notification for 'KEY_ROTATION_FAILED'
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'KEY_ROTATION_FAILED'[39m, channel: [32m'BOTH'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Types Coverage[2m > [22m[2mshould send notification for 'SESSION_INVALIDATED'
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'SESSION_INVALIDATED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Types Coverage[2m > [22m[2mshould send notification for 'CONCURRENT_SESSION_DETECTED'
[22m[39m[MultiUserNotification] Notification sent {
  userId: [32m'user-456'[39m,
  type: [32m'CONCURRENT_SESSION_DETECTED'[39m,
  channel: [32m'IN_APP'[39m
}

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Types Coverage[2m > [22m[2mshould send notification for 'PASSWORD_CHANGED'
[22m[39m[MultiUserNotification] Email notification queued { userId: [32m'user-456'[39m, notificationId: [32m'xvTRI40qwxMZjBDVAYjYF'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Types Coverage[2m > [22m[2mshould send notification for 'PASSWORD_CHANGED'
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'PASSWORD_CHANGED'[39m, channel: [32m'BOTH'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Types Coverage[2m > [22m[2mshould send notification for 'SUSPICIOUS_ACTIVITY'
[22m[39m[MultiUserNotification] Email notification queued { userId: [32m'user-456'[39m, notificationId: [32m'oOPakPDbsYjTXo4ARgufL'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Types Coverage[2m > [22m[2mshould send notification for 'SUSPICIOUS_ACTIVITY'
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'SUSPICIOUS_ACTIVITY'[39m, channel: [32m'BOTH'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Types Coverage[2m > [22m[2mshould send notification for 'EXPORT_REQUESTED'
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'EXPORT_REQUESTED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mgetUnreadNotifications[2m > [22m[2mshould return all unread notifications for user
[22m[39m[MultiUserNotification] Email notification queued { userId: [32m'user-456'[39m, notificationId: [32m'BFtrefdgmBb9fwTu9Mie-'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mgetUnreadNotifications[2m > [22m[2mshould return all unread notifications for user
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_INVITED'[39m, channel: [32m'BOTH'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mgetUnreadNotifications[2m > [22m[2mshould return all unread notifications for user
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mgetUnreadNotifications[2m > [22m[2mshould order notifications by creation time (newest first)
[22m[39m[MultiUserNotification] Email notification queued { userId: [32m'user-456'[39m, notificationId: [32m'cUWZ-uEH3PVrSw-D9dIUt'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mgetUnreadNotifications[2m > [22m[2mshould order notifications by creation time (newest first)
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_INVITED'[39m, channel: [32m'BOTH'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mgetUnreadNotifications[2m > [22m[2mshould order notifications by creation time (newest first)
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mgetUnreadNotifications[2m > [22m[2mshould not include read notifications
[22m[39m[MultiUserNotification] Email notification queued { userId: [32m'user-456'[39m, notificationId: [32m'G8XsQv3vOckHBsnEOTOZw'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mgetUnreadNotifications[2m > [22m[2mshould not include read notifications
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_INVITED'[39m, channel: [32m'BOTH'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mgetUnreadNotifications[2m > [22m[2mshould not include read notifications
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mgetAllNotifications[2m > [22m[2mshould return all notifications for user
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mgetAllNotifications[2m > [22m[2mshould return all notifications for user
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mgetAllNotifications[2m > [22m[2mshould return all notifications for user
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mgetAllNotifications[2m > [22m[2mshould return all notifications for user
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mgetAllNotifications[2m > [22m[2mshould return all notifications for user
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mgetAllNotifications[2m > [22m[2mshould respect limit parameter
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mgetAllNotifications[2m > [22m[2mshould respect limit parameter
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mgetAllNotifications[2m > [22m[2mshould respect limit parameter
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mgetAllNotifications[2m > [22m[2mshould respect limit parameter
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mgetAllNotifications[2m > [22m[2mshould respect limit parameter
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mgetAllNotifications[2m > [22m[2mshould include both read and unread notifications
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mgetAllNotifications[2m > [22m[2mshould include both read and unread notifications
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mgetAllNotifications[2m > [22m[2mshould include both read and unread notifications
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mgetAllNotifications[2m > [22m[2mshould include both read and unread notifications
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mgetAllNotifications[2m > [22m[2mshould include both read and unread notifications
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mmarkAsRead[2m > [22m[2mshould mark notification as read
[22m[39m[MultiUserNotification] Email notification queued { userId: [32m'user-456'[39m, notificationId: [32m'pO_nsF8-NVfOokF39dZui'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mmarkAsRead[2m > [22m[2mshould mark notification as read
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_INVITED'[39m, channel: [32m'BOTH'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mmarkAsRead[2m > [22m[2mshould return false for non-existent notification
[22m[39m[MultiUserNotification] Email notification queued { userId: [32m'user-456'[39m, notificationId: [32m'nyxClFskK2fQKT4tGUDZB'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mmarkAsRead[2m > [22m[2mshould return false for non-existent notification
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_INVITED'[39m, channel: [32m'BOTH'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mmarkAllAsRead[2m > [22m[2mshould mark all notifications as read
[22m[39m[MultiUserNotification] Email notification queued { userId: [32m'user-456'[39m, notificationId: [32m'k9xqiT-WkieQ2TKKz2Xnf'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mmarkAllAsRead[2m > [22m[2mshould mark all notifications as read
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_INVITED'[39m, channel: [32m'BOTH'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mmarkAllAsRead[2m > [22m[2mshould mark all notifications as read
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mmarkAllAsRead[2m > [22m[2mshould not count already read notifications
[22m[39m[MultiUserNotification] Email notification queued { userId: [32m'user-456'[39m, notificationId: [32m'Gm4Y-hy-YSnDPfHlxSmiS'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mmarkAllAsRead[2m > [22m[2mshould not count already read notifications
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_INVITED'[39m, channel: [32m'BOTH'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mmarkAllAsRead[2m > [22m[2mshould not count already read notifications
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mdeleteNotification[2m > [22m[2mshould delete notification
[22m[39m[MultiUserNotification] Email notification queued { userId: [32m'user-456'[39m, notificationId: [32m'5FFzj75nv5GklQYhQUyow'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mdeleteNotification[2m > [22m[2mshould delete notification
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_INVITED'[39m, channel: [32m'BOTH'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mdeleteNotification[2m > [22m[2mshould return false for non-existent notification
[22m[39m[MultiUserNotification] Email notification queued { userId: [32m'user-456'[39m, notificationId: [32m'bcMoEeCcWIWg73YXp-7Kk'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mdeleteNotification[2m > [22m[2mshould return false for non-existent notification
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_INVITED'[39m, channel: [32m'BOTH'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mupdatePreferences[2m > [22m[2mshould update notification preferences
[22m[39m[MultiUserNotification] Notification preferences updated { userId: [32m'user-456'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mupdatePreferences[2m > [22m[2mshould merge with existing preferences
[22m[39m[MultiUserNotification] Notification preferences updated { userId: [32m'user-456'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mupdatePreferences[2m > [22m[2mshould merge with existing preferences
[22m[39m[MultiUserNotification] Notification preferences updated { userId: [32m'user-456'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2msendBatchNotification[2m > [22m[2mshould send notification to multiple users
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-1'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }
[MultiUserNotification] Notification sent { userId: [32m'user-2'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }
[MultiUserNotification] Notification sent { userId: [32m'user-3'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mNotification Pruning[2m > [22m[2mshould prune old notifications when limit exceeded
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-456'[39m, type: [32m'USER_JOINED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mDISC Message Quality[2m > [22m[2mshould have different messages for each DISC type
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-D'[39m, type: [32m'KEY_ROTATION_STARTED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mDISC Message Quality[2m > [22m[2mshould have different messages for each DISC type
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-I'[39m, type: [32m'KEY_ROTATION_STARTED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mDISC Message Quality[2m > [22m[2mshould have different messages for each DISC type
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-S'[39m, type: [32m'KEY_ROTATION_STARTED'[39m, channel: [32m'IN_APP'[39m }

[90mstdout[2m | src/services/multiUser/notification.service.test.ts[2m > [22m[2mMultiUserNotificationService[2m > [22m[2mDISC Message Quality[2m > [22m[2mshould have different messages for each DISC type
[22m[39m[MultiUserNotification] Notification sent { userId: [32m'user-C'[39m, type: [32m'KEY_ROTATION_STARTED'[39m, channel: [32m'IN_APP'[39m }

 [32mâœ“[39m src/services/multiUser/notification.service.test.ts [2m([22m[2m41 tests[22m[2m)[22m[32m 204[2mms[22m[39m
[90mstderr[2m | src/services/admin/charity.service.test.ts[2m > [22m[2mAdmin Charity Service[2m > [22m[2mcreateCharity[2m > [22m[2mshould validate EIN format
[22m[39mError creating charity: Error: Validation failed: EIN must be in format XX-XXXXXXX (e.g., 12-3456789)
    at Module.createCharity (C:/Users/Admin/graceful_books/src/services/admin/charity.service.ts:170:13)
    at C:/Users/Admin/graceful_books/src/services/admin/charity.service.test.ts:98:9
    at [90mfile:///C:/Users/Admin/graceful_books/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at [90mfile:///C:/Users/Admin/graceful_books/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at [90mfile:///C:/Users/Admin/graceful_books/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///C:/Users/Admin/graceful_books/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1209:10[90m)[39m
    at [90mfile:///C:/Users/Admin/graceful_books/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1653:37
    at Traces.$ [90m(file:///C:/Users/Admin/graceful_books/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.CCmnQaNT.js:142:27[90m)[39m
    at trace [90m(file:///C:/Users/Admin/graceful_books/[39mnode_modules/[4mvitest[24m/dist/chunks/test.B8ej_ZHS.js:239:21[90m)[39m

[90mstderr[2m | src/services/admin/charity.service.test.ts[2m > [22m[2mAdmin Charity Service[2m > [22m[2mcreateCharity[2m > [22m[2mshould validate required fields
[22m[39mError creating charity: Error: Validation failed: name is required
    at Module.createCharity (C:/Users/Admin/graceful_books/src/services/admin/charity.service.ts:170:13)
    at C:/Users/Admin/graceful_books/src/services/admin/charity.service.test.ts:111:9
    at [90mfile:///C:/Users/Admin/graceful_books/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at [90mfile:///C:/Users/Admin/graceful_books/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at [90mfile:///C:/Users/Admin/graceful_books/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///C:/Users/Admin/graceful_books/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1209:10[90m)[39m
    at [90mfile:///C:/Users/Admin/graceful_books/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1653:37
    at Traces.$ [90m(file:///C:/Users/Admin/graceful_books/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.CCmnQaNT.js:142:27[90m)[39m
    at trace [90m(file:///C:/Users/Admin/graceful_books/[39mnode_modules/[4mvitest[24m/dist/chunks/test.B8ej_ZHS.js:239:21[90m)[39m

[90mstdout[2m | src/services/admin/charity.service.test.ts[2m > [22m[2mAdmin Charity Service[2m > [22m[2mverifyCharity[2m > [22m[2mshould change status from PENDING to VERIFIED
[22m[39mCharity Test Charity verified by admin admin-456

[90mstderr[2m | src/services/admin/charity.service.test.ts[2m > [22m[2mAdmin Charity Service[2m > [22m[2mverifyCharity[2m > [22m[2mshould reject verification if status is not PENDING
[22m[39mError verifying charity: Error: Cannot verify charity with status: VERIFIED
    at Module.verifyCharity (C:/Users/Admin/graceful_books/src/services/admin/charity.service.ts:255:13)
[90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m

[90mstdout[2m | src/services/admin/charity.service.test.ts[2m > [22m[2mAdmin Charity Service[2m > [22m[2mrejectCharity[2m > [22m[2mshould change status from PENDING to REJECTED with reason
[22m[39mCharity Test Charity rejected by admin admin-456: Invalid EIN on IRS database

[90mstderr[2m | src/services/admin/charity.service.test.ts[2m > [22m[2mAdmin Charity Service[2m > [22m[2mrejectCharity[2m > [22m[2mshould reject rejection if status is not PENDING
[22m[39mError rejecting charity: Error: Cannot reject charity with status: REJECTED
    at Module.rejectCharity (C:/Users/Admin/graceful_books/src/services/admin/charity.service.ts:295:13)
[90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m

 [32mâœ“[39m src/services/admin/charity.service.test.ts [2m([22m[2m17 tests[22m[2m)[22m[32m 77[2mms[22m[39m
[90mstderr[2m | src/services/stripe.service.test.ts
[22m[39m[StripeService] Stripe secret key not configured - billing features will not work 

[90mstderr[2m | src/services/stripe.service.test.ts[2m > [22m[2mStripe Service[2m > [22m[2mhandleWebhook[2m > [22m[2mshould reject webhooks with invalid signatures
[22m[39m[StripeService] Stripe secret key not configured - billing features will not work 

[90mstderr[2m | src/services/stripe.service.test.ts[2m > [22m[2mStripe Service[2m > [22m[2mhandleWebhook[2m > [22m[2mshould reject webhooks with invalid signatures
[22m[39m[StripeService] Stripe secret key not configured - billing features will not work 
[StripeService] Error handling webhook Error: Stripe not initialized - check VITE_STRIPE_SECRET_KEY
    at getStripe (C:/Users/Admin/graceful_books/src/services/stripe.service.ts:65:11)
    at handleWebhook (C:/Users/Admin/graceful_books/src/services/stripe.service.ts:430:20)
    at C:/Users/Admin/graceful_books/src/services/stripe.service.test.ts:55:9
    at [90mfile:///C:/Users/Admin/graceful_books/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:145:11
    at [90mfile:///C:/Users/Admin/graceful_books/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:915:26
    at [90mfile:///C:/Users/Admin/graceful_books/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1243:20
    at new Promise (<anonymous>)
    at runWithTimeout [90m(file:///C:/Users/Admin/graceful_books/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1209:10[90m)[39m
    at [90mfile:///C:/Users/Admin/graceful_books/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:1653:37
    at Traces.$ [90m(file:///C:/Users/Admin/graceful_books/[39mnode_modules/[4mvitest[24m/dist/chunks/traces.CCmnQaNT.js:142:27[90m)[39m

[90mstderr[2m | src/services/stripe.service.test.ts[2m > [22m[2mStripe Service[2m > [22m[2mhandleWebhook[2m > [22m[2mshould store webhook events in database
[22m[39m[StripeService] Stripe secret key not configured - billing features will not work 

[90mstderr[2m | src/services/stripe.service.test.ts[2m > [22m[2mStripe Service[2m > [22m[2mSubscription Status Updates[2m > [22m[2mshould update subscription status from webhook
[22m[39m[StripeService] Stripe secret key not configured - billing features will not work 

[90mstderr[2m | src/services/stripe.service.test.ts[2m > [22m[2mStripe Service[2m > [22m[2mInvoice Payment Events[2m > [22m[2mshould store invoice when payment succeeds
[22m[39m[StripeService] Stripe secret key not configured - billing features will not work 

[90mstderr[2m | src/services/stripe.service.test.ts[2m > [22m[2mStripe Service[2m > [22m[2mInvoice Payment Events[2m > [22m[2mshould update subscription to past_due when payment fails
[22m[39m[StripeService] Stripe secret key not configured - billing features will not work 

[90mstderr[2m | src/services/stripe.service.test.ts[2m > [22m[2mStripe Service[2m > [22m[2mWebhook Idempotency[2m > [22m[2mshould handle duplicate webhook events
[22m[39m[StripeService] Stripe secret key not configured - billing features will not work 

[90mstderr[2m | src/services/stripe.service.test.ts[2m > [22m[2mStripe Service[2m > [22m[2mGrace Period Handling[2m > [22m[2mshould allow 7-day grace period for failed payments
[22m[39m[StripeService] Stripe secret key not configured - billing features will not work 

 [32mâœ“[39m src/services/stripe.service.test.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 244[2mms[22m[39m
[90mstdout[2m | src/services/admin/charityDistribution.service.test.ts[2m > [22m[2mCharityDistributionService[2m > [22m[2mmarkPaymentSent[2m > [22m[2mshould mark payment as sent
[22m[39mPayment sent: Khan Academy - $5 via ach by admin admin-1

[90mstderr[2m | src/services/admin/charityDistribution.service.test.ts[2m > [22m[2mCharityDistributionService[2m > [22m[2mmarkPaymentSent[2m > [22m[2mshould throw error if distribution not found
[22m[39mError marking payment as sent: Error: Distribution record not found
    at Module.markPaymentSent (C:/Users/Admin/graceful_books/src/services/admin/charityDistribution.service.ts:317:13)
[90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m

[90mstderr[2m | src/services/admin/charityDistribution.service.test.ts[2m > [22m[2mCharityDistributionService[2m > [22m[2mmarkPaymentSent[2m > [22m[2mshould throw error if status is not pending
[22m[39mError marking payment as sent: Error: Cannot mark payment as sent. Current status: sent
    at Module.markPaymentSent (C:/Users/Admin/graceful_books/src/services/admin/charityDistribution.service.ts:321:13)
[90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m

[90mstdout[2m | src/services/admin/charityDistribution.service.test.ts[2m > [22m[2mCharityDistributionService[2m > [22m[2mconfirmPayment[2m > [22m[2mshould confirm payment
[22m[39mPayment confirmed: Khan Academy - $5 confirmed by admin admin-1

[90mstderr[2m | src/services/admin/charityDistribution.service.test.ts[2m > [22m[2mCharityDistributionService[2m > [22m[2mconfirmPayment[2m > [22m[2mshould throw error if status is not sent
[22m[39mError confirming payment: Error: Cannot confirm payment. Current status: pending
    at Module.confirmPayment (C:/Users/Admin/graceful_books/src/services/admin/charityDistribution.service.ts:362:13)
[90m    at processTicksAndRejections (node:internal/process/task_queues:103:5)[39m

 [32mâœ“[39m src/services/admin/charityDistribution.service.test.ts [2m([22m[2m16 tests[22m[2m)[22m[32m 63[2mms[22m[39m

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m[1m[41m Failed Tests 17 [49m[22m[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[41m[1m FAIL [22m[49m src/components/conflicts/ConflictResolutionButtons.test.tsx[2m > [22mConflictResolutionButtons Component[2m > [22mrendering[2m > [22mshould render all options when showAllOptions is true
[31m[1mTestingLibraryElementError[22m: Unable to find an accessible element with the role "button" and name `/keep mine/i`

Here are the accessible roles:

  group:

  Name "Conflict resolution options":
  [36m<div[31m
    [33maria-label[31m=[32m"Conflict resolution options"[31m
    [33mclass[31m=[32m"_buttonGroup_4e40b9 _horizontal_4e40b9"[31m
    [33mrole[31m=[32m"group"[31m
  [36m/>[31m

  --------------------------------------------------
  button:

  Name "Keep my version of the changes":
  [36m<button[31m
    [33maria-busy[31m=[32m"false"[31m
    [33maria-disabled[31m=[32m"false"[31m
    [33maria-label[31m=[32m"Keep my version of the changes"[31m
    [33mclass[31m=[32m"_button_c9c6cf _primary_c9c6cf _md_c9c6cf"[31m
    [33mtype[31m=[32m"button"[31m
  [36m/>[31m

  Name "Keep the other person's version of the changes":
  [36m<button[31m
    [33maria-busy[31m=[32m"false"[31m
    [33maria-disabled[31m=[32m"false"[31m
    [33maria-label[31m=[32m"Keep the other person's version of the changes"[31m
    [33mclass[31m=[32m"_button_c9c6cf _outline_c9c6cf _md_c9c6cf"[31m
    [33mtype[31m=[32m"button"[31m
  [36m/>[31m

  Name "Automatically merge both versions by combining all changes":
  [36m<button[31m
    [33maria-busy[31m=[32m"false"[31m
    [33maria-disabled[31m=[32m"false"[31m
    [33maria-label[31m=[32m"Automatically merge both versions by combining all changes"[31m
    [33mclass[31m=[32m"_button_c9c6cf _secondary_c9c6cf _md_c9c6cf"[31m
    [33mtype[31m=[32m"button"[31m
  [36m/>[31m

  Name "Review changes field by field and choose which to keep":
  [36m<button[31m
    [33maria-busy[31m=[32m"false"[31m
    [33maria-disabled[31m=[32m"false"[31m
    [33maria-label[31m=[32m"Review changes field by field and choose which to keep"[31m
    [33mclass[31m=[32m"_button_c9c6cf _ghost_c9c6cf _md_c9c6cf"[31m
    [33mtype[31m=[32m"button"[31m
  [36m/>[31m

  --------------------------------------------------

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33maria-label[31m=[32m"Conflict resolution options"[31m
      [33mclass[31m=[32m"_buttonGroup_4e40b9 _horizontal_4e40b9"[31m
      [33mrole[31m=[32m"group"[31m
    [36m>[31m
      [36m<button[31m
        [33maria-busy[31m=[32m"false"[31m
        [33maria-disabled[31m=[32m"false"[31m
        [33maria-label[31m=[32m"Keep my version of the changes"[31m
        [33mclass[31m=[32m"_button_c9c6cf _primary_c9c6cf _md_c9c6cf"[31m
        [33mtype[31m=[32m"button"[31m
      [36m>[31m
        [36m<span[31m
          [33mclass[31m=[32m"_content_c9c6cf"[31m
        [36m>[31m
          [0mKeep Mine[0m
        [36m</span>[31m
      [36m</button>[31m
      [36m<button[31m
        [33maria-busy[31m=[32m"false"[31m
        [33maria-disabled[31m=[32m"false"[31m
        [33maria-label[31m=[32m"Keep the other person's version of the changes"[31m
        [33mclass[31m=[32m"_button_c9c6cf _outline_c9c6cf _md_c9c6cf"[31m
        [33mtype[31m=[32m"button"[31m
      [36m>[31m
        [36m<span[31m
          [33mclass[31m=[32m"_content_c9c6cf"[31m
        [36m>[31m
          [0mKeep Theirs[0m
        [36m</span>[31m
      [36m</button>[31m
      [36m<button[31m
        [33maria-busy[31m=[32m"false"[31m
        [33maria-disabled[31m=[32m"false"[31m
        [33maria-label[31m=[32m"Automatically merge both versions by combining all changes"[31m
        [33mclass[31m=[32m"_button_c9c6cf _secondary_c9c6cf _md_c9c6cf"[31m
        [33mtype[31m=[32m"button"[31m
      [36m>[31m
        [36m<span[31m
          [33mclass[31m=[32m"_content_c9c6cf"[31m
        [36m>[31m
          [0mMerge Fields[0m
        [36m</span>[31m
      [36m</button>[31m
      [36m<button[31m
        [33maria-busy[31m=[32m"false"[31m
        [33maria-disabled[31m=[32m"false"[31m
        [33maria-label[31m=[32m"Review changes field by field and choose which to keep"[31m
        [33mclass[31m=[32m"_button_c9c6cf _ghost_c9c6cf _md_c9c6cf"[31m
        [33mtype[31m=[32m"button"[31m
      [36m>[31m
        [36m<span[31m
          [33mclass[31m=[32m"_content_c9c6cf"[31m
        [36m>[31m
          [0mCustom[0m
        [36m</span>[31m
      [36m</button>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
[90m [2mâ¯[22m Object.getElementError node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/config.js:[2m37:19[22m[39m
[90m [2mâ¯[22m node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:[2m76:38[22m[39m
[90m [2mâ¯[22m node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:[2m52:17[22m[39m
[90m [2mâ¯[22m node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:[2m95:19[22m[39m
[36m [2mâ¯[22m src/components/conflicts/ConflictResolutionButtons.test.tsx:[2m54:21[22m[39m
    [90m 52| [39m      )
    [90m 53| [39m
    [90m 54| [39m      expect(screen.getByRole('button', { name: /keep mine/i })).toBeIâ€¦
    [90m   | [39m                    [31m^[39m
    [90m 55| [39m      expect(screen.getByRole('button', { name: /keep theirs/i })).toBâ€¦
    [90m 56| [39m      expect(screen.getByRole('button', { name: /merge fields/i })).toâ€¦

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/17]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/components/conflicts/ConflictResolutionButtons.test.tsx[2m > [22mConflictResolutionButtons Component[2m > [22mrendering[2m > [22mshould render all size variants
[31m[1mTestingLibraryElementError[22m: Unable to find an accessible element with the role "button" and name `/keep mine/i`

Here are the accessible roles:

  group:

  Name "Conflict resolution options":
  [36m<div[31m
    [33maria-label[31m=[32m"Conflict resolution options"[31m
    [33mclass[31m=[32m"_buttonGroup_4e40b9 _horizontal_4e40b9"[31m
    [33mrole[31m=[32m"group"[31m
  [36m/>[31m

  --------------------------------------------------
  button:

  Name "Keep my version of the changes":
  [36m<button[31m
    [33maria-busy[31m=[32m"false"[31m
    [33maria-disabled[31m=[32m"false"[31m
    [33maria-label[31m=[32m"Keep my version of the changes"[31m
    [33mclass[31m=[32m"_button_c9c6cf _primary_c9c6cf _sm_c9c6cf"[31m
    [33mtype[31m=[32m"button"[31m
  [36m/>[31m

  Name "Keep the other person's version of the changes":
  [36m<button[31m
    [33maria-busy[31m=[32m"false"[31m
    [33maria-disabled[31m=[32m"false"[31m
    [33maria-label[31m=[32m"Keep the other person's version of the changes"[31m
    [33mclass[31m=[32m"_button_c9c6cf _outline_c9c6cf _sm_c9c6cf"[31m
    [33mtype[31m=[32m"button"[31m
  [36m/>[31m

  --------------------------------------------------

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33maria-label[31m=[32m"Conflict resolution options"[31m
      [33mclass[31m=[32m"_buttonGroup_4e40b9 _horizontal_4e40b9"[31m
      [33mrole[31m=[32m"group"[31m
    [36m>[31m
      [36m<button[31m
        [33maria-busy[31m=[32m"false"[31m
        [33maria-disabled[31m=[32m"false"[31m
        [33maria-label[31m=[32m"Keep my version of the changes"[31m
        [33mclass[31m=[32m"_button_c9c6cf _primary_c9c6cf _sm_c9c6cf"[31m
        [33mtype[31m=[32m"button"[31m
      [36m>[31m
        [36m<span[31m
          [33mclass[31m=[32m"_content_c9c6cf"[31m
        [36m>[31m
          [0mKeep Mine[0m
        [36m</span>[31m
      [36m</button>[31m
      [36m<button[31m
        [33maria-busy[31m=[32m"false"[31m
        [33maria-disabled[31m=[32m"false"[31m
        [33maria-label[31m=[32m"Keep the other person's version of the changes"[31m
        [33mclass[31m=[32m"_button_c9c6cf _outline_c9c6cf _sm_c9c6cf"[31m
        [33mtype[31m=[32m"button"[31m
      [36m>[31m
        [36m<span[31m
          [33mclass[31m=[32m"_content_c9c6cf"[31m
        [36m>[31m
          [0mKeep Theirs[0m
        [36m</span>[31m
      [36m</button>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
[90m [2mâ¯[22m Object.getElementError node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/config.js:[2m37:19[22m[39m
[90m [2mâ¯[22m node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:[2m76:38[22m[39m
[90m [2mâ¯[22m node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:[2m52:17[22m[39m
[90m [2mâ¯[22m node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:[2m95:19[22m[39m
[36m [2mâ¯[22m src/components/conflicts/ConflictResolutionButtons.test.tsx:[2m127:23[22m[39m
    [90m125| [39m        )
    [90m126| [39m
    [90m127| [39m        expect(screen.getByRole('button', { name: /keep mine/i })).toBâ€¦
    [90m   | [39m                      [31m^[39m
    [90m128| [39m        [34munmount[39m()
    [90m129| [39m      })
[90m [2mâ¯[22m src/components/conflicts/ConflictResolutionButtons.test.tsx:[2m117:13[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[2/17]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/components/conflicts/ConflictResolutionButtons.test.tsx[2m > [22mConflictResolutionButtons Component[2m > [22minteractions[2m > [22mshould call onKeepLocal when Keep Mine is clicked
[31m[1mTestingLibraryElementError[22m: Unable to find an accessible element with the role "button" and name `/keep mine/i`

Here are the accessible roles:

  group:

  Name "Conflict resolution options":
  [36m<div[31m
    [33maria-label[31m=[32m"Conflict resolution options"[31m
    [33mclass[31m=[32m"_buttonGroup_4e40b9 _horizontal_4e40b9"[31m
    [33mrole[31m=[32m"group"[31m
  [36m/>[31m

  --------------------------------------------------
  button:

  Name "Keep my version of the changes":
  [36m<button[31m
    [33maria-busy[31m=[32m"false"[31m
    [33maria-disabled[31m=[32m"false"[31m
    [33maria-label[31m=[32m"Keep my version of the changes"[31m
    [33mclass[31m=[32m"_button_c9c6cf _primary_c9c6cf _md_c9c6cf"[31m
    [33mtype[31m=[32m"button"[31m
  [36m/>[31m

  Name "Keep the other person's version of the changes":
  [36m<button[31m
    [33maria-busy[31m=[32m"false"[31m
    [33maria-disabled[31m=[32m"false"[31m
    [33maria-label[31m=[32m"Keep the other person's version of the changes"[31m
    [33mclass[31m=[32m"_button_c9c6cf _outline_c9c6cf _md_c9c6cf"[31m
    [33mtype[31m=[32m"button"[31m
  [36m/>[31m

  --------------------------------------------------

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33maria-label[31m=[32m"Conflict resolution options"[31m
      [33mclass[31m=[32m"_buttonGroup_4e40b9 _horizontal_4e40b9"[31m
      [33mrole[31m=[32m"group"[31m
    [36m>[31m
      [36m<button[31m
        [33maria-busy[31m=[32m"false"[31m
        [33maria-disabled[31m=[32m"false"[31m
        [33maria-label[31m=[32m"Keep my version of the changes"[31m
        [33mclass[31m=[32m"_button_c9c6cf _primary_c9c6cf _md_c9c6cf"[31m
        [33mtype[31m=[32m"button"[31m
      [36m>[31m
        [36m<span[31m
          [33mclass[31m=[32m"_content_c9c6cf"[31m
        [36m>[31m
          [0mKeep Mine[0m
        [36m</span>[31m
      [36m</button>[31m
      [36m<button[31m
        [33maria-busy[31m=[32m"false"[31m
        [33maria-disabled[31m=[32m"false"[31m
        [33maria-label[31m=[32m"Keep the other person's version of the changes"[31m
        [33mclass[31m=[32m"_button_c9c6cf _outline_c9c6cf _md_c9c6cf"[31m
        [33mtype[31m=[32m"button"[31m
      [36m>[31m
        [36m<span[31m
          [33mclass[31m=[32m"_content_c9c6cf"[31m
        [36m>[31m
          [0mKeep Theirs[0m
        [36m</span>[31m
      [36m</button>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
[90m [2mâ¯[22m Object.getElementError node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/config.js:[2m37:19[22m[39m
[90m [2mâ¯[22m node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:[2m76:38[22m[39m
[90m [2mâ¯[22m node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:[2m52:17[22m[39m
[90m [2mâ¯[22m node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:[2m95:19[22m[39m
[36m [2mâ¯[22m src/components/conflicts/ConflictResolutionButtons.test.tsx:[2m146:31[22m[39m
    [90m144| [39m      )
    [90m145| [39m
    [90m146| [39m      await user.click(screen.getByRole('button', { name: /keep mine/iâ€¦
    [90m   | [39m                              [31m^[39m
    [90m147| [39m
    [90m148| [39m      [34mexpect[39m(handleKeepLocal)[33m.[39m[34mtoHaveBeenCalledTimes[39m([34m1[39m)

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[3/17]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/components/conflicts/ConflictResolutionButtons.test.tsx[2m > [22mConflictResolutionButtons Component[2m > [22minteractions[2m > [22mshould call onKeepRemote when Keep Theirs is clicked
[31m[1mTestingLibraryElementError[22m: Unable to find an accessible element with the role "button" and name `/keep theirs/i`

Here are the accessible roles:

  group:

  Name "Conflict resolution options":
  [36m<div[31m
    [33maria-label[31m=[32m"Conflict resolution options"[31m
    [33mclass[31m=[32m"_buttonGroup_4e40b9 _horizontal_4e40b9"[31m
    [33mrole[31m=[32m"group"[31m
  [36m/>[31m

  --------------------------------------------------
  button:

  Name "Keep my version of the changes":
  [36m<button[31m
    [33maria-busy[31m=[32m"false"[31m
    [33maria-disabled[31m=[32m"false"[31m
    [33maria-label[31m=[32m"Keep my version of the changes"[31m
    [33mclass[31m=[32m"_button_c9c6cf _primary_c9c6cf _md_c9c6cf"[31m
    [33mtype[31m=[32m"button"[31m
  [36m/>[31m

  Name "Keep the other person's version of the changes":
  [36m<button[31m
    [33maria-busy[31m=[32m"false"[31m
    [33maria-disabled[31m=[32m"false"[31m
    [33maria-label[31m=[32m"Keep the other person's version of the changes"[31m
    [33mclass[31m=[32m"_button_c9c6cf _outline_c9c6cf _md_c9c6cf"[31m
    [33mtype[31m=[32m"button"[31m
  [36m/>[31m

  --------------------------------------------------

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33maria-label[31m=[32m"Conflict resolution options"[31m
      [33mclass[31m=[32m"_buttonGroup_4e40b9 _horizontal_4e40b9"[31m
      [33mrole[31m=[32m"group"[31m
    [36m>[31m
      [36m<button[31m
        [33maria-busy[31m=[32m"false"[31m
        [33maria-disabled[31m=[32m"false"[31m
        [33maria-label[31m=[32m"Keep my version of the changes"[31m
        [33mclass[31m=[32m"_button_c9c6cf _primary_c9c6cf _md_c9c6cf"[31m
        [33mtype[31m=[32m"button"[31m
      [36m>[31m
        [36m<span[31m
          [33mclass[31m=[32m"_content_c9c6cf"[31m
        [36m>[31m
          [0mKeep Mine[0m
        [36m</span>[31m
      [36m</button>[31m
      [36m<button[31m
        [33maria-busy[31m=[32m"false"[31m
        [33maria-disabled[31m=[32m"false"[31m
        [33maria-label[31m=[32m"Keep the other person's version of the changes"[31m
        [33mclass[31m=[32m"_button_c9c6cf _outline_c9c6cf _md_c9c6cf"[31m
        [33mtype[31m=[32m"button"[31m
      [36m>[31m
        [36m<span[31m
          [33mclass[31m=[32m"_content_c9c6cf"[31m
        [36m>[31m
          [0mKeep Theirs[0m
        [36m</span>[31m
      [36m</button>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
[90m [2mâ¯[22m Object.getElementError node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/config.js:[2m37:19[22m[39m
[90m [2mâ¯[22m node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:[2m76:38[22m[39m
[90m [2mâ¯[22m node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:[2m52:17[22m[39m
[90m [2mâ¯[22m node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:[2m95:19[22m[39m
[36m [2mâ¯[22m src/components/conflicts/ConflictResolutionButtons.test.tsx:[2m164:31[22m[39m
    [90m162| [39m      )
    [90m163| [39m
    [90m164| [39m      await user.click(screen.getByRole('button', { name: /keep theirsâ€¦
    [90m   | [39m                              [31m^[39m
    [90m165| [39m
    [90m166| [39m      [34mexpect[39m(handleKeepRemote)[33m.[39m[34mtoHaveBeenCalledTimes[39m([34m1[39m)

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[4/17]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/components/conflicts/ConflictResolutionButtons.test.tsx[2m > [22mConflictResolutionButtons Component[2m > [22minteractions[2m > [22mshould call onMergeFields when Merge Fields is clicked
[31m[1mTestingLibraryElementError[22m: Unable to find an accessible element with the role "button" and name `/merge fields/i`

Here are the accessible roles:

  group:

  Name "Conflict resolution options":
  [36m<div[31m
    [33maria-label[31m=[32m"Conflict resolution options"[31m
    [33mclass[31m=[32m"_buttonGroup_4e40b9 _horizontal_4e40b9"[31m
    [33mrole[31m=[32m"group"[31m
  [36m/>[31m

  --------------------------------------------------
  button:

  Name "Keep my version of the changes":
  [36m<button[31m
    [33maria-busy[31m=[32m"false"[31m
    [33maria-disabled[31m=[32m"false"[31m
    [33maria-label[31m=[32m"Keep my version of the changes"[31m
    [33mclass[31m=[32m"_button_c9c6cf _primary_c9c6cf _md_c9c6cf"[31m
    [33mtype[31m=[32m"button"[31m
  [36m/>[31m

  Name "Keep the other person's version of the changes":
  [36m<button[31m
    [33maria-busy[31m=[32m"false"[31m
    [33maria-disabled[31m=[32m"false"[31m
    [33maria-label[31m=[32m"Keep the other person's version of the changes"[31m
    [33mclass[31m=[32m"_button_c9c6cf _outline_c9c6cf _md_c9c6cf"[31m
    [33mtype[31m=[32m"button"[31m
  [36m/>[31m

  Name "Automatically merge both versions by combining all changes":
  [36m<button[31m
    [33maria-busy[31m=[32m"false"[31m
    [33maria-disabled[31m=[32m"false"[31m
    [33maria-label[31m=[32m"Automatically merge both versions by combining all changes"[31m
    [33mclass[31m=[32m"_button_c9c6cf _secondary_c9c6cf _md_c9c6cf"[31m
    [33mtype[31m=[32m"button"[31m
  [36m/>[31m

  --------------------------------------------------

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33maria-label[31m=[32m"Conflict resolution options"[31m
      [33mclass[31m=[32m"_buttonGroup_4e40b9 _horizontal_4e40b9"[31m
      [33mrole[31m=[32m"group"[31m
    [36m>[31m
      [36m<button[31m
        [33maria-busy[31m=[32m"false"[31m
        [33maria-disabled[31m=[32m"false"[31m
        [33maria-label[31m=[32m"Keep my version of the changes"[31m
        [33mclass[31m=[32m"_button_c9c6cf _primary_c9c6cf _md_c9c6cf"[31m
        [33mtype[31m=[32m"button"[31m
      [36m>[31m
        [36m<span[31m
          [33mclass[31m=[32m"_content_c9c6cf"[31m
        [36m>[31m
          [0mKeep Mine[0m
        [36m</span>[31m
      [36m</button>[31m
      [36m<button[31m
        [33maria-busy[31m=[32m"false"[31m
        [33maria-disabled[31m=[32m"false"[31m
        [33maria-label[31m=[32m"Keep the other person's version of the changes"[31m
        [33mclass[31m=[32m"_button_c9c6cf _outline_c9c6cf _md_c9c6cf"[31m
        [33mtype[31m=[32m"button"[31m
      [36m>[31m
        [36m<span[31m
          [33mclass[31m=[32m"_content_c9c6cf"[31m
        [36m>[31m
          [0mKeep Theirs[0m
        [36m</span>[31m
      [36m</button>[31m
      [36m<button[31m
        [33maria-busy[31m=[32m"false"[31m
        [33maria-disabled[31m=[32m"false"[31m
        [33maria-label[31m=[32m"Automatically merge both versions by combining all changes"[31m
        [33mclass[31m=[32m"_button_c9c6cf _secondary_c9c6cf _md_c9c6cf"[31m
        [33mtype[31m=[32m"button"[31m
      [36m>[31m
        [36m<span[31m
          [33mclass[31m=[32m"_content_c9c6cf"[31m
        [36m>[31m
          [0mMerge Fields[0m
        [36m</span>[31m
      [36m</button>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
[90m [2mâ¯[22m Object.getElementError node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/config.js:[2m37:19[22m[39m
[90m [2mâ¯[22m node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:[2m76:38[22m[39m
[90m [2mâ¯[22m node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:[2m52:17[22m[39m
[90m [2mâ¯[22m node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:[2m95:19[22m[39m
[36m [2mâ¯[22m src/components/conflicts/ConflictResolutionButtons.test.tsx:[2m184:31[22m[39m
    [90m182| [39m      )
    [90m183| [39m
    [90m184| [39m      await user.click(screen.getByRole('button', { name: /merge fieldâ€¦
    [90m   | [39m                              [31m^[39m
    [90m185| [39m
    [90m186| [39m      [34mexpect[39m(handleMergeFields)[33m.[39m[34mtoHaveBeenCalledTimes[39m([34m1[39m)

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[5/17]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/components/conflicts/ConflictResolutionButtons.test.tsx[2m > [22mConflictResolutionButtons Component[2m > [22minteractions[2m > [22mshould call onCustom when Custom is clicked
[31m[1mTestingLibraryElementError[22m: Unable to find an accessible element with the role "button" and name `/custom/i`

Here are the accessible roles:

  group:

  Name "Conflict resolution options":
  [36m<div[31m
    [33maria-label[31m=[32m"Conflict resolution options"[31m
    [33mclass[31m=[32m"_buttonGroup_4e40b9 _horizontal_4e40b9"[31m
    [33mrole[31m=[32m"group"[31m
  [36m/>[31m

  --------------------------------------------------
  button:

  Name "Keep my version of the changes":
  [36m<button[31m
    [33maria-busy[31m=[32m"false"[31m
    [33maria-disabled[31m=[32m"false"[31m
    [33maria-label[31m=[32m"Keep my version of the changes"[31m
    [33mclass[31m=[32m"_button_c9c6cf _primary_c9c6cf _md_c9c6cf"[31m
    [33mtype[31m=[32m"button"[31m
  [36m/>[31m

  Name "Keep the other person's version of the changes":
  [36m<button[31m
    [33maria-busy[31m=[32m"false"[31m
    [33maria-disabled[31m=[32m"false"[31m
    [33maria-label[31m=[32m"Keep the other person's version of the changes"[31m
    [33mclass[31m=[32m"_button_c9c6cf _outline_c9c6cf _md_c9c6cf"[31m
    [33mtype[31m=[32m"button"[31m
  [36m/>[31m

  Name "Review changes field by field and choose which to keep":
  [36m<button[31m
    [33maria-busy[31m=[32m"false"[31m
    [33maria-disabled[31m=[32m"false"[31m
    [33maria-label[31m=[32m"Review changes field by field and choose which to keep"[31m
    [33mclass[31m=[32m"_button_c9c6cf _ghost_c9c6cf _md_c9c6cf"[31m
    [33mtype[31m=[32m"button"[31m
  [36m/>[31m

  --------------------------------------------------

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33maria-label[31m=[32m"Conflict resolution options"[31m
      [33mclass[31m=[32m"_buttonGroup_4e40b9 _horizontal_4e40b9"[31m
      [33mrole[31m=[32m"group"[31m
    [36m>[31m
      [36m<button[31m
        [33maria-busy[31m=[32m"false"[31m
        [33maria-disabled[31m=[32m"false"[31m
        [33maria-label[31m=[32m"Keep my version of the changes"[31m
        [33mclass[31m=[32m"_button_c9c6cf _primary_c9c6cf _md_c9c6cf"[31m
        [33mtype[31m=[32m"button"[31m
      [36m>[31m
        [36m<span[31m
          [33mclass[31m=[32m"_content_c9c6cf"[31m
        [36m>[31m
          [0mKeep Mine[0m
        [36m</span>[31m
      [36m</button>[31m
      [36m<button[31m
        [33maria-busy[31m=[32m"false"[31m
        [33maria-disabled[31m=[32m"false"[31m
        [33maria-label[31m=[32m"Keep the other person's version of the changes"[31m
        [33mclass[31m=[32m"_button_c9c6cf _outline_c9c6cf _md_c9c6cf"[31m
        [33mtype[31m=[32m"button"[31m
      [36m>[31m
        [36m<span[31m
          [33mclass[31m=[32m"_content_c9c6cf"[31m
        [36m>[31m
          [0mKeep Theirs[0m
        [36m</span>[31m
      [36m</button>[31m
      [36m<button[31m
        [33maria-busy[31m=[32m"false"[31m
        [33maria-disabled[31m=[32m"false"[31m
        [33maria-label[31m=[32m"Review changes field by field and choose which to keep"[31m
        [33mclass[31m=[32m"_button_c9c6cf _ghost_c9c6cf _md_c9c6cf"[31m
        [33mtype[31m=[32m"button"[31m
      [36m>[31m
        [36m<span[31m
          [33mclass[31m=[32m"_content_c9c6cf"[31m
        [36m>[31m
          [0mCustom[0m
        [36m</span>[31m
      [36m</button>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
[90m [2mâ¯[22m Object.getElementError node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/config.js:[2m37:19[22m[39m
[90m [2mâ¯[22m node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:[2m76:38[22m[39m
[90m [2mâ¯[22m node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:[2m52:17[22m[39m
[90m [2mâ¯[22m node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:[2m95:19[22m[39m
[36m [2mâ¯[22m src/components/conflicts/ConflictResolutionButtons.test.tsx:[2m204:31[22m[39m
    [90m202| [39m      )
    [90m203| [39m
    [90m204| [39m      [35mawait[39m user[33m.[39m[34mclick[39m(screen[33m.[39m[34mgetByRole[39m([32m'button'[39m[33m,[39m { name[33m:[39m [36m/custom/i[39m }))
    [90m   | [39m                              [31m^[39m
    [90m205| [39m
    [90m206| [39m      [34mexpect[39m(handleCustom)[33m.[39m[34mtoHaveBeenCalledTimes[39m([34m1[39m)

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[6/17]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/components/conflicts/ConflictResolutionButtons.test.tsx[2m > [22mConflictResolutionButtons Component[2m > [22minteractions[2m > [22mshould not call handlers when loading
[31m[1mTestingLibraryElementError[22m: Unable to find an accessible element with the role "button" and name `/keep mine/i`

Here are the accessible roles:

  group:

  Name "Conflict resolution options":
  [36m<div[31m
    [33maria-label[31m=[32m"Conflict resolution options"[31m
    [33mclass[31m=[32m"_buttonGroup_4e40b9 _horizontal_4e40b9"[31m
    [33mrole[31m=[32m"group"[31m
  [36m/>[31m

  --------------------------------------------------
  button:

  Name "Keep my version of the changes":
  [36m<button[31m
    [33maria-busy[31m=[32m"true"[31m
    [33maria-disabled[31m=[32m"true"[31m
    [33maria-label[31m=[32m"Keep my version of the changes"[31m
    [33mclass[31m=[32m"_button_c9c6cf _primary_c9c6cf _md_c9c6cf _loading_c9c6cf"[31m
    [33mdisabled[31m=[32m""[31m
    [33mtype[31m=[32m"button"[31m
  [36m/>[31m

  Name "Keep the other person's version of the changes":
  [36m<button[31m
    [33maria-busy[31m=[32m"false"[31m
    [33maria-disabled[31m=[32m"true"[31m
    [33maria-label[31m=[32m"Keep the other person's version of the changes"[31m
    [33mclass[31m=[32m"_button_c9c6cf _outline_c9c6cf _md_c9c6cf"[31m
    [33mdisabled[31m=[32m""[31m
    [33mtype[31m=[32m"button"[31m
  [36m/>[31m

  --------------------------------------------------

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33maria-label[31m=[32m"Conflict resolution options"[31m
      [33mclass[31m=[32m"_buttonGroup_4e40b9 _horizontal_4e40b9"[31m
      [33mrole[31m=[32m"group"[31m
    [36m>[31m
      [36m<button[31m
        [33maria-busy[31m=[32m"true"[31m
        [33maria-disabled[31m=[32m"true"[31m
        [33maria-label[31m=[32m"Keep my version of the changes"[31m
        [33mclass[31m=[32m"_button_c9c6cf _primary_c9c6cf _md_c9c6cf _loading_c9c6cf"[31m
        [33mdisabled[31m=[32m""[31m
        [33mtype[31m=[32m"button"[31m
      [36m>[31m
        [36m<span[31m
          [33maria-hidden[31m=[32m"true"[31m
          [33mclass[31m=[32m"_spinner_c9c6cf"[31m
        [36m>[31m
          [36m<span[31m
            [33mclass[31m=[32m"_spinnerCircle_c9c6cf"[31m
          [36m/>[31m
        [36m</span>[31m
        [36m<span[31m
          [33mclass[31m=[32m"_content_c9c6cf"[31m
        [36m>[31m
          [0mKeep Mine[0m
        [36m</span>[31m
      [36m</button>[31m
      [36m<button[31m
        [33maria-busy[31m=[32m"false"[31m
        [33maria-disabled[31m=[32m"true"[31m
        [33maria-label[31m=[32m"Keep the other person's version of the changes"[31m
        [33mclass[31m=[32m"_button_c9c6cf _outline_c9c6cf _md_c9c6cf"[31m
        [33mdisabled[31m=[32m""[31m
        [33mtype[31m=[32m"button"[31m
      [36m>[31m
        [36m<span[31m
          [33mclass[31m=[32m"_content_c9c6cf"[31m
        [36m>[31m
          [0mKeep Theirs[0m
        [36m</span>[31m
      [36m</button>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
[90m [2mâ¯[22m Object.getElementError node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/config.js:[2m37:19[22m[39m
[90m [2mâ¯[22m node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:[2m76:38[22m[39m
[90m [2mâ¯[22m node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:[2m52:17[22m[39m
[90m [2mâ¯[22m node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:[2m95:19[22m[39m
[36m [2mâ¯[22m src/components/conflicts/ConflictResolutionButtons.test.tsx:[2m223:31[22m[39m
    [90m221| [39m      )
    [90m222| [39m
    [90m223| [39m      await user.click(screen.getByRole('button', { name: /keep mine/iâ€¦
    [90m   | [39m                              [31m^[39m
    [90m224| [39m
    [90m225| [39m      [34mexpect[39m(handleKeepLocal)[33m.[39mnot[33m.[39m[34mtoHaveBeenCalled[39m()

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[7/17]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/components/conflicts/ConflictResolutionButtons.test.tsx[2m > [22mConflictResolutionButtons Component[2m > [22mloading state[2m > [22mshould show loading spinner on Keep Mine button
[31m[1mTestingLibraryElementError[22m: Unable to find an accessible element with the role "button" and name `/keep mine/i`

Here are the accessible roles:

  group:

  Name "Conflict resolution options":
  [36m<div[31m
    [33maria-label[31m=[32m"Conflict resolution options"[31m
    [33mclass[31m=[32m"_buttonGroup_4e40b9 _horizontal_4e40b9"[31m
    [33mrole[31m=[32m"group"[31m
  [36m/>[31m

  --------------------------------------------------
  button:

  Name "Keep my version of the changes":
  [36m<button[31m
    [33maria-busy[31m=[32m"true"[31m
    [33maria-disabled[31m=[32m"true"[31m
    [33maria-label[31m=[32m"Keep my version of the changes"[31m
    [33mclass[31m=[32m"_button_c9c6cf _primary_c9c6cf _md_c9c6cf _loading_c9c6cf"[31m
    [33mdisabled[31m=[32m""[31m
    [33mtype[31m=[32m"button"[31m
  [36m/>[31m

  Name "Keep the other person's version of the changes":
  [36m<button[31m
    [33maria-busy[31m=[32m"false"[31m
    [33maria-disabled[31m=[32m"true"[31m
    [33maria-label[31m=[32m"Keep the other person's version of the changes"[31m
    [33mclass[31m=[32m"_button_c9c6cf _outline_c9c6cf _md_c9c6cf"[31m
    [33mdisabled[31m=[32m""[31m
    [33mtype[31m=[32m"button"[31m
  [36m/>[31m

  --------------------------------------------------

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33maria-label[31m=[32m"Conflict resolution options"[31m
      [33mclass[31m=[32m"_buttonGroup_4e40b9 _horizontal_4e40b9"[31m
      [33mrole[31m=[32m"group"[31m
    [36m>[31m
      [36m<button[31m
        [33maria-busy[31m=[32m"true"[31m
        [33maria-disabled[31m=[32m"true"[31m
        [33maria-label[31m=[32m"Keep my version of the changes"[31m
        [33mclass[31m=[32m"_button_c9c6cf _primary_c9c6cf _md_c9c6cf _loading_c9c6cf"[31m
        [33mdisabled[31m=[32m""[31m
        [33mtype[31m=[32m"button"[31m
      [36m>[31m
        [36m<span[31m
          [33maria-hidden[31m=[32m"true"[31m
          [33mclass[31m=[32m"_spinner_c9c6cf"[31m
        [36m>[31m
          [36m<span[31m
            [33mclass[31m=[32m"_spinnerCircle_c9c6cf"[31m
          [36m/>[31m
        [36m</span>[31m
        [36m<span[31m
          [33mclass[31m=[32m"_content_c9c6cf"[31m
        [36m>[31m
          [0mKeep Mine[0m
        [36m</span>[31m
      [36m</button>[31m
      [36m<button[31m
        [33maria-busy[31m=[32m"false"[31m
        [33maria-disabled[31m=[32m"true"[31m
        [33maria-label[31m=[32m"Keep the other person's version of the changes"[31m
        [33mclass[31m=[32m"_button_c9c6cf _outline_c9c6cf _md_c9c6cf"[31m
        [33mdisabled[31m=[32m""[31m
        [33mtype[31m=[32m"button"[31m
      [36m>[31m
        [36m<span[31m
          [33mclass[31m=[32m"_content_c9c6cf"[31m
        [36m>[31m
          [0mKeep Theirs[0m
        [36m</span>[31m
      [36m</button>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
[90m [2mâ¯[22m Object.getElementError node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/config.js:[2m37:19[22m[39m
[90m [2mâ¯[22m node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:[2m76:38[22m[39m
[90m [2mâ¯[22m node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:[2m52:17[22m[39m
[90m [2mâ¯[22m node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:[2m95:19[22m[39m
[36m [2mâ¯[22m src/components/conflicts/ConflictResolutionButtons.test.tsx:[2m259:37[22m[39m
    [90m257| [39m      )
    [90m258| [39m
    [90m259| [39m      const keepMineButton = screen.getByRole('button', { name: /keep â€¦
    [90m   | [39m                                    [31m^[39m
    [90m260| [39m      [34mexpect[39m(keepMineButton)[33m.[39m[34mtoHaveAttribute[39m([32m'aria-busy'[39m[33m,[39m [32m'true'[39m)
    [90m261| [39m    })

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[8/17]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/components/conflicts/ConflictResolutionButtons.test.tsx[2m > [22mConflictResolutionButtons Component[2m > [22maccessibility[2m > [22mshould be keyboard navigable
[31m[1mTestingLibraryElementError[22m: Unable to find an accessible element with the role "button" and name `/keep mine/i`

Here are the accessible roles:

  group:

  Name "Conflict resolution options":
  [36m<div[31m
    [33maria-label[31m=[32m"Conflict resolution options"[31m
    [33mclass[31m=[32m"_buttonGroup_4e40b9 _horizontal_4e40b9"[31m
    [33mrole[31m=[32m"group"[31m
  [36m/>[31m

  --------------------------------------------------
  button:

  Name "Keep my version of the changes":
  [36m<button[31m
    [33maria-busy[31m=[32m"false"[31m
    [33maria-disabled[31m=[32m"false"[31m
    [33maria-label[31m=[32m"Keep my version of the changes"[31m
    [33mclass[31m=[32m"_button_c9c6cf _primary_c9c6cf _md_c9c6cf"[31m
    [33mtype[31m=[32m"button"[31m
  [36m/>[31m

  Name "Keep the other person's version of the changes":
  [36m<button[31m
    [33maria-busy[31m=[32m"false"[31m
    [33maria-disabled[31m=[32m"false"[31m
    [33maria-label[31m=[32m"Keep the other person's version of the changes"[31m
    [33mclass[31m=[32m"_button_c9c6cf _outline_c9c6cf _md_c9c6cf"[31m
    [33mtype[31m=[32m"button"[31m
  [36m/>[31m

  --------------------------------------------------

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33maria-label[31m=[32m"Conflict resolution options"[31m
      [33mclass[31m=[32m"_buttonGroup_4e40b9 _horizontal_4e40b9"[31m
      [33mrole[31m=[32m"group"[31m
    [36m>[31m
      [36m<button[31m
        [33maria-busy[31m=[32m"false"[31m
        [33maria-disabled[31m=[32m"false"[31m
        [33maria-label[31m=[32m"Keep my version of the changes"[31m
        [33mclass[31m=[32m"_button_c9c6cf _primary_c9c6cf _md_c9c6cf"[31m
        [33mtype[31m=[32m"button"[31m
      [36m>[31m
        [36m<span[31m
          [33mclass[31m=[32m"_content_c9c6cf"[31m
        [36m>[31m
          [0mKeep Mine[0m
        [36m</span>[31m
      [36m</button>[31m
      [36m<button[31m
        [33maria-busy[31m=[32m"false"[31m
        [33maria-disabled[31m=[32m"false"[31m
        [33maria-label[31m=[32m"Keep the other person's version of the changes"[31m
        [33mclass[31m=[32m"_button_c9c6cf _outline_c9c6cf _md_c9c6cf"[31m
        [33mtype[31m=[32m"button"[31m
      [36m>[31m
        [36m<span[31m
          [33mclass[31m=[32m"_content_c9c6cf"[31m
        [36m>[31m
          [0mKeep Theirs[0m
        [36m</span>[31m
      [36m</button>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
[90m [2mâ¯[22m Object.getElementError node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/config.js:[2m37:19[22m[39m
[90m [2mâ¯[22m node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:[2m76:38[22m[39m
[90m [2mâ¯[22m node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:[2m52:17[22m[39m
[90m [2mâ¯[22m node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:[2m95:19[22m[39m
[36m [2mâ¯[22m src/components/conflicts/ConflictResolutionButtons.test.tsx:[2m328:37[22m[39m
    [90m326| [39m      )
    [90m327| [39m
    [90m328| [39m      const keepMineButton = screen.getByRole('button', { name: /keep â€¦
    [90m   | [39m                                    [31m^[39m
    [90m329| [39m      const keepTheirsButton = screen.getByRole('button', { name: /keeâ€¦
    [90m330| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[9/17]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/components/conflicts/ConflictResolutionButtons.test.tsx[2m > [22mConflictResolutionButtons Component[2m > [22maccessibility[2m > [22mshould support keyboard activation
[31m[1mTestingLibraryElementError[22m: Unable to find an accessible element with the role "button" and name `/keep mine/i`

Here are the accessible roles:

  group:

  Name "Conflict resolution options":
  [36m<div[31m
    [33maria-label[31m=[32m"Conflict resolution options"[31m
    [33mclass[31m=[32m"_buttonGroup_4e40b9 _horizontal_4e40b9"[31m
    [33mrole[31m=[32m"group"[31m
  [36m/>[31m

  --------------------------------------------------
  button:

  Name "Keep my version of the changes":
  [36m<button[31m
    [33maria-busy[31m=[32m"false"[31m
    [33maria-disabled[31m=[32m"false"[31m
    [33maria-label[31m=[32m"Keep my version of the changes"[31m
    [33mclass[31m=[32m"_button_c9c6cf _primary_c9c6cf _md_c9c6cf"[31m
    [33mtype[31m=[32m"button"[31m
  [36m/>[31m

  Name "Keep the other person's version of the changes":
  [36m<button[31m
    [33maria-busy[31m=[32m"false"[31m
    [33maria-disabled[31m=[32m"false"[31m
    [33maria-label[31m=[32m"Keep the other person's version of the changes"[31m
    [33mclass[31m=[32m"_button_c9c6cf _outline_c9c6cf _md_c9c6cf"[31m
    [33mtype[31m=[32m"button"[31m
  [36m/>[31m

  --------------------------------------------------

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33maria-label[31m=[32m"Conflict resolution options"[31m
      [33mclass[31m=[32m"_buttonGroup_4e40b9 _horizontal_4e40b9"[31m
      [33mrole[31m=[32m"group"[31m
    [36m>[31m
      [36m<button[31m
        [33maria-busy[31m=[32m"false"[31m
        [33maria-disabled[31m=[32m"false"[31m
        [33maria-label[31m=[32m"Keep my version of the changes"[31m
        [33mclass[31m=[32m"_button_c9c6cf _primary_c9c6cf _md_c9c6cf"[31m
        [33mtype[31m=[32m"button"[31m
      [36m>[31m
        [36m<span[31m
          [33mclass[31m=[32m"_content_c9c6cf"[31m
        [36m>[31m
          [0mKeep Mine[0m
        [36m</span>[31m
      [36m</button>[31m
      [36m<button[31m
        [33maria-busy[31m=[32m"false"[31m
        [33maria-disabled[31m=[32m"false"[31m
        [33maria-label[31m=[32m"Keep the other person's version of the changes"[31m
        [33mclass[31m=[32m"_button_c9c6cf _outline_c9c6cf _md_c9c6cf"[31m
        [33mtype[31m=[32m"button"[31m
      [36m>[31m
        [36m<span[31m
          [33mclass[31m=[32m"_content_c9c6cf"[31m
        [36m>[31m
          [0mKeep Theirs[0m
        [36m</span>[31m
      [36m</button>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
[90m [2mâ¯[22m Object.getElementError node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/config.js:[2m37:19[22m[39m
[90m [2mâ¯[22m node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:[2m76:38[22m[39m
[90m [2mâ¯[22m node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:[2m52:17[22m[39m
[90m [2mâ¯[22m node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:[2m95:19[22m[39m
[36m [2mâ¯[22m src/components/conflicts/ConflictResolutionButtons.test.tsx:[2m350:37[22m[39m
    [90m348| [39m      )
    [90m349| [39m
    [90m350| [39m      const keepMineButton = screen.getByRole('button', { name: /keep â€¦
    [90m   | [39m                                    [31m^[39m
    [90m351| [39m      keepMineButton[33m.[39m[34mfocus[39m()
    [90m352| [39m      [35mawait[39m user[33m.[39m[34mkeyboard[39m([32m'{Enter}'[39m)

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[10/17]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/components/conflicts/ConflictResolutionButtons.test.tsx[2m > [22mConflictResolutionButtons Component[2m > [22medge cases[2m > [22mshould handle rapid clicks
[31m[1mTestingLibraryElementError[22m: Unable to find an accessible element with the role "button" and name `/keep mine/i`

Here are the accessible roles:

  group:

  Name "Conflict resolution options":
  [36m<div[31m
    [33maria-label[31m=[32m"Conflict resolution options"[31m
    [33mclass[31m=[32m"_buttonGroup_4e40b9 _horizontal_4e40b9"[31m
    [33mrole[31m=[32m"group"[31m
  [36m/>[31m

  --------------------------------------------------
  button:

  Name "Keep my version of the changes":
  [36m<button[31m
    [33maria-busy[31m=[32m"false"[31m
    [33maria-disabled[31m=[32m"false"[31m
    [33maria-label[31m=[32m"Keep my version of the changes"[31m
    [33mclass[31m=[32m"_button_c9c6cf _primary_c9c6cf _md_c9c6cf"[31m
    [33mtype[31m=[32m"button"[31m
  [36m/>[31m

  Name "Keep the other person's version of the changes":
  [36m<button[31m
    [33maria-busy[31m=[32m"false"[31m
    [33maria-disabled[31m=[32m"false"[31m
    [33maria-label[31m=[32m"Keep the other person's version of the changes"[31m
    [33mclass[31m=[32m"_button_c9c6cf _outline_c9c6cf _md_c9c6cf"[31m
    [33mtype[31m=[32m"button"[31m
  [36m/>[31m

  --------------------------------------------------

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33maria-label[31m=[32m"Conflict resolution options"[31m
      [33mclass[31m=[32m"_buttonGroup_4e40b9 _horizontal_4e40b9"[31m
      [33mrole[31m=[32m"group"[31m
    [36m>[31m
      [36m<button[31m
        [33maria-busy[31m=[32m"false"[31m
        [33maria-disabled[31m=[32m"false"[31m
        [33maria-label[31m=[32m"Keep my version of the changes"[31m
        [33mclass[31m=[32m"_button_c9c6cf _primary_c9c6cf _md_c9c6cf"[31m
        [33mtype[31m=[32m"button"[31m
      [36m>[31m
        [36m<span[31m
          [33mclass[31m=[32m"_content_c9c6cf"[31m
        [36m>[31m
          [0mKeep Mine[0m
        [36m</span>[31m
      [36m</button>[31m
      [36m<button[31m
        [33maria-busy[31m=[32m"false"[31m
        [33maria-disabled[31m=[32m"false"[31m
        [33maria-label[31m=[32m"Keep the other person's version of the changes"[31m
        [33mclass[31m=[32m"_button_c9c6cf _outline_c9c6cf _md_c9c6cf"[31m
        [33mtype[31m=[32m"button"[31m
      [36m>[31m
        [36m<span[31m
          [33mclass[31m=[32m"_content_c9c6cf"[31m
        [36m>[31m
          [0mKeep Theirs[0m
        [36m</span>[31m
      [36m</button>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
[90m [2mâ¯[22m Object.getElementError node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/config.js:[2m37:19[22m[39m
[90m [2mâ¯[22m node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:[2m76:38[22m[39m
[90m [2mâ¯[22m node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:[2m52:17[22m[39m
[90m [2mâ¯[22m node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:[2m95:19[22m[39m
[36m [2mâ¯[22m src/components/conflicts/ConflictResolutionButtons.test.tsx:[2m371:29[22m[39m
    [90m369| [39m      )
    [90m370| [39m
    [90m371| [39m      [35mconst[39m button [33m=[39m screen[33m.[39m[34mgetByRole[39m([32m'button'[39m[33m,[39m { name[33m:[39m [36m/keep mine/i[39m })
    [90m   | [39m                            [31m^[39m
    [90m372| [39m      [35mawait[39m user[33m.[39m[34mtripleClick[39m(button)
    [90m373| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[11/17]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/components/conflicts/ConflictResolutionButtons.test.tsx[2m > [22mConflictResolutionButtons Component[2m > [22medge cases[2m > [22mshould handle different conflict IDs
[31m[1mTestingLibraryElementError[22m: Unable to find an accessible element with the role "button" and name `/keep mine/i`

Here are the accessible roles:

  group:

  Name "Conflict resolution options":
  [36m<div[31m
    [33maria-label[31m=[32m"Conflict resolution options"[31m
    [33mclass[31m=[32m"_buttonGroup_4e40b9 _horizontal_4e40b9"[31m
    [33mrole[31m=[32m"group"[31m
  [36m/>[31m

  --------------------------------------------------
  button:

  Name "Keep my version of the changes":
  [36m<button[31m
    [33maria-busy[31m=[32m"false"[31m
    [33maria-disabled[31m=[32m"false"[31m
    [33maria-label[31m=[32m"Keep my version of the changes"[31m
    [33mclass[31m=[32m"_button_c9c6cf _primary_c9c6cf _md_c9c6cf"[31m
    [33mtype[31m=[32m"button"[31m
  [36m/>[31m

  Name "Keep the other person's version of the changes":
  [36m<button[31m
    [33maria-busy[31m=[32m"false"[31m
    [33maria-disabled[31m=[32m"false"[31m
    [33maria-label[31m=[32m"Keep the other person's version of the changes"[31m
    [33mclass[31m=[32m"_button_c9c6cf _outline_c9c6cf _md_c9c6cf"[31m
    [33mtype[31m=[32m"button"[31m
  [36m/>[31m

  --------------------------------------------------

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33maria-label[31m=[32m"Conflict resolution options"[31m
      [33mclass[31m=[32m"_buttonGroup_4e40b9 _horizontal_4e40b9"[31m
      [33mrole[31m=[32m"group"[31m
    [36m>[31m
      [36m<button[31m
        [33maria-busy[31m=[32m"false"[31m
        [33maria-disabled[31m=[32m"false"[31m
        [33maria-label[31m=[32m"Keep my version of the changes"[31m
        [33mclass[31m=[32m"_button_c9c6cf _primary_c9c6cf _md_c9c6cf"[31m
        [33mtype[31m=[32m"button"[31m
      [36m>[31m
        [36m<span[31m
          [33mclass[31m=[32m"_content_c9c6cf"[31m
        [36m>[31m
          [0mKeep Mine[0m
        [36m</span>[31m
      [36m</button>[31m
      [36m<button[31m
        [33maria-busy[31m=[32m"false"[31m
        [33maria-disabled[31m=[32m"false"[31m
        [33maria-label[31m=[32m"Keep the other person's version of the changes"[31m
        [33mclass[31m=[32m"_button_c9c6cf _outline_c9c6cf _md_c9c6cf"[31m
        [33mtype[31m=[32m"button"[31m
      [36m>[31m
        [36m<span[31m
          [33mclass[31m=[32m"_content_c9c6cf"[31m
        [36m>[31m
          [0mKeep Theirs[0m
        [36m</span>[31m
      [36m</button>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
[90m [2mâ¯[22m Object.getElementError node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/config.js:[2m37:19[22m[39m
[90m [2mâ¯[22m node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:[2m76:38[22m[39m
[90m [2mâ¯[22m node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:[2m52:17[22m[39m
[90m [2mâ¯[22m node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/query-helpers.js:[2m95:19[22m[39m
[36m [2mâ¯[22m src/components/conflicts/ConflictResolutionButtons.test.tsx:[2m392:31[22m[39m
    [90m390| [39m      )
    [90m391| [39m
    [90m392| [39m      await user.click(screen.getByRole('button', { name: /keep mine/iâ€¦
    [90m   | [39m                              [31m^[39m
    [90m393| [39m      [34mexpect[39m(handleKeepLocal)[33m.[39m[34mtoHaveBeenCalledWith[39m([32m'conflict-1'[39m)
    [90m394| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[12/17]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/db/schema/charity.schema.test.ts[2m > [22mCharity Schema[2m > [22mcreateDefaultCharity[2m > [22mshould create a charity with all required fields
[31m[1mAssertionError[22m: expected 'EDUCATION' to be 'A test charity description' // Object.is equality[39m

Expected: [32m"A test charity description"[39m
Received: [31m"EDUCATION"[39m

[36m [2mâ¯[22m src/db/schema/charity.schema.test.ts:[2m25:35[22m[39m
    [90m 23| [39m
    [90m 24| [39m      [34mexpect[39m(charity[33m.[39mname)[33m.[39m[34mtoBe[39m([32m'Test Charity'[39m)[33m;[39m
    [90m 25| [39m      [34mexpect[39m(charity[33m.[39mdescription)[33m.[39m[34mtoBe[39m([32m'A test charity description'[39m)[33m;[39m
    [90m   | [39m                                  [31m^[39m
    [90m 26| [39m      [34mexpect[39m(charity[33m.[39mcategory)[33m.[39m[34mtoBe[39m([32m'EDUCATION'[39m)[33m;[39m
    [90m 27| [39m      [34mexpect[39m(charity[33m.[39mwebsite)[33m.[39m[34mtoBe[39m([32m'https://testcharity.org'[39m)[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[13/17]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/db/schema/charity.schema.test.ts[2m > [22mCharity Schema[2m > [22mcreateDefaultCharity[2m > [22mshould include logo when provided
[31m[1mAssertionError[22m: expected null to be 'test-logo' // Object.is equality[39m

[32m- Expected:[39m 
"test-logo"

[31m+ Received:[39m 
null

[36m [2mâ¯[22m src/db/schema/charity.schema.test.ts:[2m41:28[22m[39m
    [90m 39| [39m      )[33m;[39m
    [90m 40| [39m
    [90m 41| [39m      [34mexpect[39m(charity[33m.[39mlogo)[33m.[39m[34mtoBe[39m([32m'test-logo'[39m)[33m;[39m
    [90m   | [39m                           [31m^[39m
    [90m 42| [39m    })[33m;[39m
    [90m 43| [39m  })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[14/17]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/db/schema/charity.schema.test.ts[2m > [22mCharity Schema[2m > [22mvalidateCharity[2m > [22mshould pass validation for valid charity
[31m[1mAssertionError[22m: expected [ â€¦(2) ] to have a length of +0 but got 2[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 0[39m
[31m+ 2[39m

[36m [2mâ¯[22m src/db/schema/charity.schema.test.ts:[2m55:22[22m[39m
    [90m 53| [39m
    [90m 54| [39m      [35mconst[39m errors [33m=[39m [34mvalidateCharity[39m(charity)[33m;[39m
    [90m 55| [39m      [34mexpect[39m(errors)[33m.[39m[34mtoHaveLength[39m([34m0[39m)[33m;[39m
    [90m   | [39m                     [31m^[39m
    [90m 56| [39m    })[33m;[39m
    [90m 57| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[15/17]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/components/activity/CommentComposer.test.tsx[2m > [22mCommentComposer[2m > [22mshould display submitting state
[31m[1mTestingLibraryElementError[22m: Unable to find an element with the text: Posting.... This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"_composer_60d3af"[31m
    [36m>[31m
      [36m<div[31m
        [33mclass[31m=[32m"_inputContainer_60d3af"[31m
      [36m>[31m
        [36m<label[31m
          [33mclass[31m=[32m"_label_60d3af"[31m
          [33mfor[31m=[32m"comment-textarea"[31m
        [36m>[31m
          [0mComment[0m
          [36m<span[31m
            [33mclass[31m=[32m"_srOnly_60d3af"[31m
          [36m>[31m
            [0m (Type @ to mention a teammate)[0m
          [36m</span>[31m
        [36m</label>[31m
        [36m<textarea[31m
          [33maria-describedby[31m=[32m"comment-hint"[31m
          [33maria-label[31m=[32m"Comment"[31m
          [33mclass[31m=[32m"_textarea_60d3af"[31m
          [33mid[31m=[32m"comment-textarea"[31m
          [33mplaceholder[31m=[32m"Add a comment... (Type @ to mention a teammate)"[31m
          [33mrows[31m=[32m"3"[31m
          [33mstyle[31m=[32m"height: 3px;"[31m
        [36m>[31m
          [0mTest[0m
        [36m</textarea>[31m
        [36m<div[31m
          [33mclass[31m=[32m"_hint_60d3af"[31m
          [33mid[31m=[32m"comment-hint"[31m
        [36m>[31m
          [0mTip: Type @ to mention a teammate. Press Cmd+Enter to submit.[0m
        [36m</div>[31m
      [36m</div>[31m
      [36m<div[31m
        [33mclass[31m=[32m"_actions_60d3af"[31m
      [36m>[31m
        [36m<div[31m
          [33mclass[31m=[32m"_actionsLeft_60d3af"[31m
        [36m/>[31m
        [36m<div[31m
          [33mclass[31m=[32m"_actionsRight_60d3af"[31m
        [36m>[31m
          [36m<button[31m
            [33maria-label[31m=[32m"Submit comment"[31m
            [33mclass[31m=[32m"_submitButton_60d3af"[31m
            [33mtype[31m=[32m"button"[31m
          [36m>[31m
            [0mPost Comment[0m
          [36m</button>[31m
        [36m</div>[31m
      [36m</div>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<html>[31m
  [36m<head />[31m
  [36m<body>[31m
    [36m<div>[31m
      [36m<div[31m
        [33mclass[31m=[32m"_composer_60d3af"[31m
      [36m>[31m
        [36m<div[31m
          [33mclass[31m=[32m"_inputContainer_60d3af"[31m
        [36m>[31m
          [36m<label[31m
            [33mclass[31m=[32m"_label_60d3af"[31m
            [33mfor[31m=[32m"comment-textarea"[31m
          [36m>[31m
            [0mComment[0m
            [36m<span[31m
              [33mclass[31m=[32m"_srOnly_60d3af"[31m
            [36m>[31m
              [0m (Type @ to mention a teammate)[0m
            [36m</span>[31m
          [36m</label>[31m
          [36m<textarea[31m
            [33maria-describedby[31m=[32m"comment-hint"[31m
            [33maria-label[31m=[32m"Comment"[31m
            [33mclass[31m=[32m"_textarea_60d3af"[31m
            [33mid[31m=[32m"comment-textarea"[31m
            [33mplaceholder[31m=[32m"Add a comment... (Type @ to mention a teammate)"[31m
            [33mrows[31m=[32m"3"[31m
            [33mstyle[31m=[32m"height: 3px;"[31m
          [36m>[31m
            [0mTest[0m
          [36m</textarea>[31m
          [36m<div[31m
            [33mclass[31m=[32m"_hint_60d3af"[31m
            [33mid[31m=[32m"comment-hint"[31m
          [36m>[31m
            [0mTip: Type @ to mention a teammate. Press Cmd+Enter to submit.[0m
          [36m</div>[31m
        [36m</div>[31m
        [36m<div[31m
          [33mclass[31m=[32m"_actions_60d3af"[31m
        [36m>[31m
          [36m<div[31m
            [33mclass[31m=[32m"_actionsLeft_60d3af"[31m
          [36m/>[31m
          [36m<div[31m
            [33mclass[31m=[32m"_actionsRight_60d3af"[31m
          [36m>[31m
            [36m<button[31m
              [33maria-label[31m=[32m"Submit comment"[31m
              [33mclass[31m=[32m"_submitButton_60d3af"[31m
              [33mtype[31m=[32m"button"[31m
            [36m>[31m
              [0mPost Comment[0m
            [36m</button>[31m
          [36m</div>[31m
        [36m</div>[31m
      [36m</div>[31m
    [36m</div>[31m
  [36m</body>[31m
[36m</html>[31m...[39m
[90m [2mâ¯[22m Proxy.waitForWrapper node_modules/@testing-library/react/node_modules/@testing-library/dom/dist/wait-for.js:[2m163:27[22m[39m
[36m [2mâ¯[22m src/components/activity/CommentComposer.test.tsx:[2m128:11[22m[39m
    [90m126| [39m    [35mawait[39m user[33m.[39m[34mclick[39m(submitButton)
    [90m127| [39m
    [90m128| [39m    [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
    [90m   | [39m          [31m^[39m
    [90m129| [39m      [34mexpect[39m(screen[33m.[39m[34mgetByText[39m([32m'Posting...'[39m))[33m.[39m[34mtoBeInTheDocument[39m()
    [90m130| [39m    })

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[16/17]âŽ¯[22m[39m

[41m[1m FAIL [22m[49m src/components/activity/CommentComposer.test.tsx[2m > [22mCommentComposer[2m > [22mshould be keyboard accessible
[31m[1mError[22m: [2mexpect([22m[31melement[31m[2m).toHaveFocus()[22m

Expected element with focus:
  [32m<button
  aria-label="Submit comment"
  class="_submitButton_60d3af"
  disabled=""
  type="button"
>
  Post Comment
</button>[31m
Received element with focus:
  [31m<textarea
  aria-describedby="comment-hint"
  aria-label="Comment"
  class="_textarea_60d3af"
  id="comment-textarea"
  placeholder="Add a comment... (Type @ to mention a teammate)"
  rows="3"
  style="height: 3px;"
/>[31m[39m
[36m [2mâ¯[22m src/components/activity/CommentComposer.test.tsx:[2m173:26[22m[39m
    [90m171| [39m    [35mawait[39m user[33m.[39m[34mtab[39m() [90m// Skip hint[39m
    [90m172| [39m    const submitButton = screen.getByRole('button', { name: /submit coâ€¦
    [90m173| [39m    [34mexpect[39m(submitButton)[33m.[39m[34mtoHaveFocus[39m()
    [90m   | [39m                         [31m^[39m
    [90m174| [39m  })
    [90m175| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[17/17]âŽ¯[22m[39m


[2m Test Files [22m [1m[31m3 failed[39m[22m[2m | [22m[1m[32m6 passed[39m[22m[90m (9)[39m
[2m      Tests [22m [1m[31m17 failed[39m[22m[2m | [22m[1m[32m189 passed[39m[22m[90m (206)[39m
[2m   Start at [22m 18:24:15
[2m   Duration [22m 38.14s[2m (transform 3.30s, setup 32.26s, import 9.27s, tests 9.75s, environment 49.92s)[22m

